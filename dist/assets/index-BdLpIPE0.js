import{i as e,B as t,a as s,c as a,b as i,m as r,d as n,e as o,r as l,j as d,f as c,T as h,g as m,L as u,u as x,M as p,h as g,D as j,k as f,H as b,l as y,n as v,o as w,p as k,q as S,C,s as R,t as I,F as A,S as N,v as T,I as D,w as P,x as E,y as F,z,A as W,E as L,G as B,J as O,K as M,N as q,O as U,P as _,Q as H,R as J,U as $,V,W as G,X as Y,Y as K,Z as X,_ as Q,$ as Z,a0 as ee,a1 as te,a2 as se,a3 as ae,a4 as ie,a5 as re,a6 as ne,a7 as oe,a8 as le,a9 as de,aa as ce,ab as he,ac as me,ad as ue,ae as xe,af as pe,ag as ge,ah as je,ai as fe,aj as be,ak as ye,al as ve,am as we,an as ke,ao as Se,ap as Ce,aq as Re,ar as Ie,as as Ae,at as Ne,au as Te,av as De,aw as Pe,ax as Ee,ay as Fe,az as ze,aA as We,aB as Le,aC as Be,aD as Oe,aE as Me,aF as qe,aG as Ue,aH as _e,aI as He,aJ as Je,aK as $e,aL as Ve,aM as Ge,aN as Ye,aO as Ke,aP as Xe,aQ as Qe,aR as Ze,aS as et,aT as tt,aU as st,aV as at,aW as it,aX as rt,aY as nt,aZ as ot,a_ as lt,a$ as dt,b0 as ct,b1 as ht,b2 as mt,b3 as ut,b4 as xt,b5 as pt,b6 as gt,b7 as jt,b8 as ft,b9 as bt,ba as yt,bb as vt,bc as wt,bd as kt,be as St,bf as Ct,bg as Rt,bh as It,bi as At,bj as Nt,bk as Tt,bl as Dt,bm as Pt,bn as Et,bo as Ft,bp as zt,bq as Wt,br as Lt,bs as Bt,bt as Ot,bu as Mt,bv as qt,bw as Ut,bx as _t,by as Ht,bz as Jt,bA as $t,bB as Vt,bC as Gt,bD as Yt,bE as Kt,bF as Xt,bG as Qt,bH as Zt,bI as es,bJ as ts,bK as ss,bL as as,bM as is,bN as rs,bO as ns,bP as os,bQ as ls,bR as ds,bS as cs,bT as hs,bU as ms,bV as us,bW as xs,bX as ps,bY as gs,bZ as js,b_ as fs,b$ as bs,c0 as ys,c1 as vs,c2 as ws,c3 as ks,c4 as Ss,c5 as Cs,c6 as Rs,c7 as Is,c8 as As,c9 as Ns,ca as Ts,cb as Ds,cc as Ps,cd as Es,ce as Fs,cf as zs,cg as Ws,ch as Ls,ci as Bs,cj as Os,ck as Ms,cl as qs,cm as Us,cn as _s,co as Hs,cp as Js,cq as $s,cr as Vs,cs as Gs,ct as Ys,cu as Ks,cv as Xs,cw as Qs,cx as Zs,cy as ea,cz as ta,cA as sa,cB as aa,cC as ia,cD as ra,cE as na,cF as oa,cG as la,cH as da,cI as ca,cJ as ha,cK as ma,cL as ua,cM as xa,cN as pa,cO as ga,cP as ja,cQ as fa,cR as ba,cS as ya,cT as va,cU as wa,cV as ka,cW as Sa,cX as Ca,cY as Ra,cZ as Ia,c_ as Aa,c$ as Na}from"./vendor-VWgwjs_v.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),e.use(t).use(s).init({lng:localStorage.getItem("language")||"en",fallbackLng:"en",debug:!1,backend:{loadPath:"locales/{{lng}}/translation.json"},interpolation:{escapeValue:!1}});const Ta=a({palette:{primary:{main:"#2563eb"},secondary:{main:"#6e7781"}},typography:{fontFamily:'"Poppins", sans-serif'}}),Da=r(),Pa=["/api/admin/login","/api/admin/logout","/api/admin/refresh-token","/api/admin/me"],Ea=i.create({baseURL:"http://localhost:3000",withCredentials:!0,headers:{"Content-Type":"application/json"}});let Fa=!1,za=[];function Wa(e){za.forEach((t=>t(e))),za=[]}const La=i.create({baseURL:"http://localhost:3000",withCredentials:!0,headers:{"Content-Type":"application/json"}});"undefined"!=typeof window&&(window.addEventListener("online",(()=>{})),window.addEventListener("offline",(()=>{}))),Ea.interceptors.request.use((e=>(e.metadata={startTime:Date.now()},e))),Ea.interceptors.response.use((e=>{const t=Date.now()-(e.config.metadata?.startTime||Date.now());return t>3e3&&console.warn(`Slow API response: ${e.config.url} took ${t}ms`),e}),(async e=>{const t=e.config||{},s=e.response,a=s?.status,i=s?.data?.code,r=t?.url||"";if(!s){const s=t._networkRetries||0;if(s<3&&!t.skipRetry){t._networkRetries=s+1;const e=Math.min(1e3*Math.pow(2,s),5e3);return await(n=e,new Promise((e=>setTimeout(e,n)))),Ea(t)}return Promise.reject({...e,_classified:!0,__type:"NETWORK_ERROR"})}var n;if(((e="")=>Pa.some((t=>e.endsWith(t)&&!e.endsWith("/me"))))(r))return Promise.reject({...e,_classified:!0,__type:401===a?"AUTH_ERROR":"SERVER_ERROR"});if(((e,t)=>401===e&&(!t||"ACCESS_TOKEN_EXPIRED"===t||"ACCESS_TOKEN_INVALID"===t||"UNAUTHENTICATED"===t))(a,i)&&!t._retry){if(t._retry=!0,Fa)return new Promise(((s,a)=>{var i;i=i=>{i?s(Ea(t)):a({...e,refreshFailed:!0,_classified:!0,__type:"AUTH_ERROR"})},za.push(i)}));Fa=!0;try{return await La.post("/api/admin/refresh-token",{},{withCredentials:!0}),Fa=!1,Wa(!0),Da.emit("tokenRefreshed"),Ea(t)}catch(o){return Fa=!1,Wa(!1),Promise.reject({...e,refreshFailed:!0,_classified:!0,__type:"AUTH_ERROR"})}}return(e=>"INVALID_SESSION"===e||"JWT_INVALID"===e||"REFRESH_INVALID"===e)(i)?Promise.reject({...e,refreshFailed:!0,_classified:!0,__type:"AUTH_ERROR"}):Promise.reject({...e,_classified:!0,__type:"SERVER_ERROR"})}));const Ba="unknown",Oa="authenticated",Ma="unauthenticated",qa={isAuthenticated:!!localStorage.getItem("adminId"),authChecked:!1,authStatus:localStorage.getItem("adminId")?Oa:Ba,recaptchaPassed:!1,userRoles:[],userId:localStorage.getItem("adminId")||null,adminInfo:null,error:null,needsReauth:!1,lastFetchTime:null},Ua=n("admin/fetchAdminInfo",(async(e,t)=>{try{const{data:e}=await Ea.get("/api/admin/me",{withCredentials:!0});return e}catch(s){const e=(s?._classified?s:{}).__type||"SERVER_ERROR";return t.rejectWithValue({message:s?.response?.data?.message||s?.message||"Failed to fetch admin info",type:e,refreshFailed:!0===s?.refreshFailed})}})),_a=n("admin/logout",(async(e,t)=>{try{await Ea.post("/api/admin/logout",{},{withCredentials:!0}),["token","role","adminEmail","adminId"].forEach((e=>localStorage.removeItem(e)))}catch(s){["token","role","adminEmail","adminId"].forEach((e=>localStorage.removeItem(e)))}return!0})),Ha=o({name:"admin",initialState:qa,reducers:{setRecaptchaPassed(e,t){e.recaptchaPassed=t.payload},softAuthError(e,t){e.needsReauth=!0,e.error=t.payload||"Authentication error",e.authStatus=Oa},clearAdmin(e){e.isAuthenticated=!1,e.authChecked=!0,e.authStatus=Ma,e.userRoles=[],e.userId=null,e.adminInfo=null,e.error=null,e.needsReauth=!1},restoreAdminFromStorage(e){const t=localStorage.getItem("adminId");t&&(e.isAuthenticated=!0,e.authChecked=!1,e.authStatus=Oa,e.userId=t)},clearError(e){e.error=null}},extraReducers:e=>{e.addCase(Ua.pending,(e=>{e.authChecked=!1,e.error=null})).addCase(Ua.fulfilled,((e,{payload:t})=>{const s=t.admin??t;e.adminInfo=s,e.userId=s.id||s._id||null,e.userRoles=Array.isArray(s.roles)?s.roles:[s.roles].filter(Boolean),e.isAuthenticated=Boolean(e.userId),e.authStatus=e.isAuthenticated?Oa:Ba,e.authChecked=!0,e.needsReauth=!1,e.error=null,e.lastFetchTime=Date.now(),e.userId&&localStorage.setItem("adminId",e.userId)})).addCase(Ua.rejected,((e,{payload:t})=>{const{type:s,refreshFailed:a}=t||{};e.authChecked=!0,e.error=t?.message||"Failed to fetch admin info",e.lastFetchTime=Date.now(),"AUTH_ERROR"===s&&a?(e.adminInfo=null,e.userId=null,e.userRoles=[],e.isAuthenticated=!1,e.authStatus=Ma,e.needsReauth=!0,["adminId"].forEach((e=>localStorage.removeItem(e)))):(e.isAuthenticated=!!e.userId,e.authStatus=e.isAuthenticated?Oa:e.authStatus,e.needsReauth=!1)})).addCase(_a.fulfilled,(e=>{e.adminInfo=null,e.userId=null,e.userRoles=[],e.isAuthenticated=!1,e.authChecked=!0,e.authStatus=Ma,e.needsReauth=!1,e.error=null,e.lastFetchTime=null}))}}),{setRecaptchaPassed:Ja,softAuthError:$a,clearAdmin:Va,restoreAdminFromStorage:Ga,clearError:Ya}=Ha.actions,Ka=e=>e.admin.userRoles,Xa=e=>e.admin.isAuthenticated,Qa=e=>e.admin.authChecked,Za=Ha.reducer,ei=({onSuccess:e,disabled:t})=>{const[s,a]=l.useState(0),[i,r]=l.useState(!1),n=l.useRef(null),o=l.useRef(null),x=()=>{clearInterval(o.current),s<100&&(r(!1),a(0))};return d.jsxs(c,{sx:{textAlign:"center",mt:2},children:[d.jsx(h,{variant:"caption",sx:{mb:1,display:"block"},children:"Click and hold the button to verify you're human"}),d.jsx(m,{onMouseDown:()=>{t||(r(!0),n.current=Date.now(),o.current=setInterval((()=>{const t=Date.now()-n.current,s=Math.min(t/2500*100,100);a(s),s>=100&&(clearInterval(o.current),r(!1),a(100),Ea.post("/api/admin/verify-captcha-hold",{holdDuration:t,startedAt:n.current}).then((t=>{if(!t.data?.success)throw new Error("CAPTCHA failed");e()})).catch((()=>{alert("CAPTCHA verification failed. Try again."),a(0)})))}),20))},onMouseUp:x,onMouseLeave:x,disabled:t,variant:"outlined",fullWidth:!0,sx:{minHeight:50},children:i?"Verifying...":"Click & Hold to Verify"}),d.jsx(u,{variant:"determinate",value:s,sx:{maxHeight:"100%",borderRadius:1}})]})},ti=({open:e,onVerify:t})=>{const s=x();return d.jsx(p,{open:e,onClose:()=>{},"aria-labelledby":"captcha-modal",disableEscapeKeyDown:!0,children:d.jsxs(c,{sx:{width:400,bgcolor:"background.paper",borderRadius:2,boxShadow:24,p:4,mx:"auto",mt:"15vh",textAlign:"center"},children:[d.jsx(g,{size:48,color:s.palette.primary.main}),d.jsx(h,{variant:"h6",sx:{mt:2},children:"Let’s verify you’re a human"}),d.jsx(h,{variant:"body2",sx:{color:"text.secondary",mt:1},children:"Please click and hold the button below to securely complete login."}),d.jsx(j,{sx:{my:2}}),d.jsx(ei,{onSuccess:t})]})})},si=new f.Howl({src:["sounds/apple-sms.mp3"],volume:1,autoplay:!1}),ai=()=>{const e=y(),t=v(),s=w(Xa),a=w(Qa),[i,r]=l.useState(!1),[n,o]=l.useState(!1),[u,x]=l.useState(!1),[p,g]=l.useState(null),f="/Oauth2/v1/admin",b="/auth0/admin";l.useEffect((()=>{a&&s&&t(`${b}/dashboard`,{replace:!0})}),[t,s,a]);const O=()=>o((e=>!e)),M=k().shape({email:S().email("Invalid email").required("Email is required"),password:S().min(8,"Must be at least 8 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@#$!%*?&]).{8,}$/,"Must include uppercase, lowercase, number, special char").required("Password is required")}),q=async()=>{x(!1),p?await U(p):B.error("Unexpected error. Try again.")},U=async(s,a)=>{try{const a=await Ea.post("/api/admin/login",s,{withCredentials:!0});a.data.pre2FAToken?(localStorage.setItem("temp2FAToken",a.data.pre2FAToken),sessionStorage.setItem("pending2FA",s.email),B.info("Two-Factor Authentication required. Redirecting…"),t(`${f}/setup-2fa`,{replace:!0})):a.data.success?(await e(Ua()).unwrap(),si.play(),B.success(a.data.message||"Login successful.",{theme:"dark",color:"white",progressStyle:{backgroundColor:"#2e54a7ff"}}),localStorage.removeItem("temp2FAToken"),t(`${b}/dashboard`)):B.error(a.data.message||"Login failed.")}catch(i){const e=i.response?.data;403===i.response?.status&&e?.pre2FAToken?(localStorage.setItem("temp2FAToken",e.pre2FAToken),sessionStorage.setItem("pending2FA",s.email),B.info("Two-Factor Authentication required. Redirecting…"),t(`${f}/setup-2fa`,{replace:!0})):i.response&&423===i.response.status?B.warn(i.response.data.message||"Your account is temporarily suspended. Please try again later.",{autoClose:5e3}):i.response&&401===i.response.status?B.warn(i.response.data.message||"Not authorized to login here."):i.response&&404===i.response.status?B.error(i.response.data.message||"Invalid credentials. Password mismatch."):i.response&&503===i.response.status?B.error(i.response.data.message||"Server down. Please try again later."):"ERR_NETWORK"===i.code?B.error("Network error. Please check your connection."):B.error("An unexpected error occurred.")}finally{r(!1)}};return a?d.jsxs(c,{className:"adminLogin",sx:{display:"flex",position:"fixed",flexDirection:{xs:"column",sm:"row"},height:"100vh",columnGap:{xs:0,sm:15},transition:"all 0.3s ease",alignItems:"center",background:{xs:"url('/icons/TT-logo-1024x1024.png')",sm:"white"},backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:{xs:"bottom",sm:"right"}},children:[d.jsx(c,{className:"banner",sx:{height:{xs:"20vh",sm:"100vh"}},children:d.jsx("img",{src:"/admin_banner1.jpg",alt:"Admin Banner",className:"adminBannerImage",style:{height:{xs:"20vh",sm:"100vh"},width:"100%",objectFit:"cover"}})}),d.jsxs(c,{className:"adminForm",sx:{position:{xs:"absolute",sm:"relative"},mt:{xs:-10,sm:0},bottom:{xs:0,sm:"auto"},borderRadius:{xs:"40px 40px 0 0",sm:"20px"},mr:{xs:0,sm:10},p:3.5,placeSelf:{xs:"center",sm:"none"},transition:"all 0.3s ease",backgroundColor:"rgba(255, 255, 255, 0.91)",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},children:[d.jsxs(R,{sx:{display:{xs:"none",sm:"block"}},children:[d.jsx(I,{title:"Jeremiah K. Deku",subheader:"ADMINISTRATOR LOGIN",sx:{textAlign:"center",color:"rgb(9,51, 65)"},subheaderTypographyProps:{variant:"subtitle1",letterSpacing:2},titleTypographyProps:{variant:"h5",fontWeight:"800"}}),d.jsx(j,{sx:{mb:2,display:{xs:"none",sm:"block"}}})]}),d.jsx(h,{variant:"h5",sx:{mb:2,textAlign:"start",fontWeight:"800",color:"rgb(9,51, 65)",display:{xs:"block",sm:"none"}},children:"Jeremiah K. Deku"}),d.jsx(j,{sx:{mb:5}}),d.jsx(h,{variant:"h5",sx:{mb:3,textAlign:"center",color:"gray",display:{xs:"block",sm:"none"}},children:"ADMINISTRATOR LOGIN"}),d.jsx(A,{initialValues:{email:"",password:""},validationSchema:M,onSubmit:(e,{setSubmitting:t})=>{r(!0),t(!1),g(e),x(!0)},children:({values:e,errors:t,touched:s,handleChange:a,handleBlur:r,handleSubmit:o})=>d.jsxs(d.Fragment,{children:[d.jsx(ti,{open:u,onVerify:q}),d.jsx("form",{onSubmit:o,noValidate:!0,children:d.jsxs(N,{spacing:3.5,sx:{mb:2},children:[d.jsx(c,{sx:{mb:3},children:d.jsx(T,{name:"email",label:"Email",type:"email",placeholder:"Enter admin email",fullWidth:!0,value:e.email,onChange:a,onBlur:r,error:s.email&&Boolean(t.email),helperText:s.email&&t.email,InputProps:{sx:{borderRadius:50},startAdornment:d.jsx(D,{position:"start",children:d.jsx(P,{style:{marginRight:8}})})}})}),d.jsx(c,{sx:{mb:3},children:d.jsx(T,{name:"password",label:"Password",type:n?"text":"password",placeholder:"Enter your password",fullWidth:!0,value:e.password,onChange:a,onBlur:r,error:s.password&&Boolean(t.password),helperText:s.password&&t.password,InputProps:{sx:{borderRadius:50},startAdornment:d.jsx(D,{position:"start",children:d.jsx(W,{style:{marginRight:8}})}),endAdornment:d.jsx(D,{position:"end",children:d.jsx(E,{onClick:O,edge:"end",children:n?d.jsx(F,{}):d.jsx(z,{})})})}})}),d.jsx(h,{variant:"body2",sx:{mb:2,textAlign:"right"},children:d.jsx("a",{href:"/admin/forgot-password",style:{color:"#1A73E8",fontWeight:"bold",textDecoration:"underline"},children:"Forgot password?"})}),d.jsx(c,{sx:{textAlign:"center",mb:2},children:d.jsx(m,{type:"submit",variant:"contained",fullWidth:!0,disabled:i,children:i?d.jsx(C,{size:24}):"Login"})})]})})]})}),d.jsxs(h,{variant:"text",sx:{color:"tomato",fontFamily:"calibri",fontSize:18,textAlign:"center"},children:[d.jsx(L,{})," Restricted access: For authorized administrator only."]})]})]}):d.jsx(c,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:d.jsx(C,{size:60})})},ii=()=>d.jsxs(d.Fragment,{children:[d.jsxs(b,{children:[d.jsx("title",{children:"Admin Portal - TOLI-TOLI"}),d.jsx("meta",{name:"description",content:"Admin login page for TOLI-TOLI. Access restricted to authorized administrators only."}),d.jsx("meta",{name:"keywords",content:"admin login, TOLI-TOLI, administrator access, secure login"}),d.jsx("meta",{name:"robots",content:"noindex, nofollow"}),d.jsx("link",{rel:"canonical",href:"/Oauth2/v1/admin/login"}),d.jsx("meta",{property:"og:title",content:"Admin Login - TOLI-TOLI "}),d.jsx("meta",{property:"og:description",content:"Admin login page for TOLI-TOLI. Access restricted to authorized administrators only."}),d.jsx("meta",{property:"og:image",content:"/icons/TT-logo-1024x1024.png"}),d.jsx("meta",{property:"og:url",content:"/Oauth2/v1/admin/login"}),d.jsx("meta",{name:"twitter:card",content:"summary_large_image"})]}),d.jsx("div",{className:"admin-login-container",children:d.jsx(ai,{})})]}),ri=()=>{const e=v(),[t,s]=l.useState(""),[a,r]=l.useState(!1),n=k().shape({email:S().email("Invalid email address").required("Email is required")});return d.jsxs("div",{className:"overlay",children:[d.jsx(O,{style:{width:40,height:40,float:"left",margin:40,cursor:"pointer"},onClick:()=>e(-1)}),d.jsxs(c,{className:"container",sx:{maxWidth:400,mx:"auto",mt:18,p:3,boxShadow:3,borderRadius:2,backgroundColor:"#fff"},children:[d.jsx(h,{variant:"h4",sx:{textAlign:"center",mb:2},children:d.jsx("b",{children:"Forgot Password"})}),d.jsx(h,{sx:{textAlign:"center",mb:4},children:"Enter your email to receive a password reset link."}),d.jsx(A,{initialValues:{email:""},validationSchema:n,onSubmit:async(e,{resetForm:t,setSubmitting:a})=>{r(!0);try{const a=await i.post("/api/admin/forgot-password",{email:e.email});s(a.data.message),t()}catch(n){s("Error: "+(n.response?.data.message||"Something went wrong"))}r(!1),a(!1)},children:({values:e,errors:s,touched:i,handleChange:r,handleBlur:n,handleSubmit:o,isSubmitting:l})=>d.jsxs("form",{onSubmit:o,children:[d.jsx(c,{sx:{mb:3},children:d.jsx(T,{name:"email",label:"Email",type:"email",placeholder:"Enter your admin email",fullWidth:!0,value:e.email,onChange:r,onBlur:n,error:i.email&&Boolean(s.email),helperText:i.email&&s.email,InputProps:{startAdornment:d.jsx(D,{position:"start",children:d.jsx(P,{style:{marginRight:"8px"}})})}})}),t&&d.jsx(h,{variant:"body2",sx:{mb:2,textAlign:"center",color:t.startsWith("Error")?"red":"green",fontWeight:"bold"},children:t}),d.jsx(c,{sx:{textAlign:"center",mb:2},children:d.jsx(m,{type:"submit",variant:"contained",fullWidth:!0,disabled:l||a,children:l||a?d.jsx(C,{size:24}):"Send Reset Link"})})]})})]})]})},ni=()=>{const{token:e}=M(),t=v(),[s,a]=l.useState(!1),[r,n]=l.useState(""),[o,u]=l.useState(!1),x=()=>a((e=>!e)),p=k().shape({password:S().min(8,"Password must be at least 8 characters long").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,"Password must contain uppercase, lowercase, number, and special character.").required("Password is required")});return d.jsxs("div",{className:"overlay",children:[d.jsx(O,{style:{width:40,height:40,float:"left",margin:40,cursor:"pointer"},onClick:()=>t(-1)}),d.jsxs(c,{className:"container",sx:{maxWidth:400,mx:"auto",mt:18,p:3,boxShadow:3,borderRadius:2,backgroundColor:"#fff"},children:[d.jsx(h,{variant:"h4",sx:{textAlign:"center",mb:2},children:d.jsx("b",{children:"Reset Password"})}),d.jsx(h,{sx:{textAlign:"center",mb:4},children:"Enter a new password for your admin account."}),d.jsx(A,{initialValues:{password:""},validationSchema:p,onSubmit:async(s,{resetForm:a,setSubmitting:r})=>{u(!0);try{const r=await i.post(`/api/admin/reset-password/${e}`,{newPassword:s.password});n(r.data.message),a(),setTimeout((()=>t("/")),3e3)}catch(o){n("Error: "+(o.response?.data.message||"Something went wrong"))}u(!1),r(!1)},children:({values:e,errors:t,touched:a,handleChange:i,handleBlur:n,handleSubmit:l,isSubmitting:u})=>d.jsxs("form",{onSubmit:l,children:[d.jsx(c,{sx:{mb:3},children:d.jsx(T,{name:"password",label:"New Password",type:s?"text":"password",placeholder:"Enter new password",fullWidth:!0,value:e.password,onChange:i,onBlur:n,error:a.password&&Boolean(t.password),helperText:a.password&&t.password,InputProps:{endAdornment:d.jsx(D,{position:"end",children:d.jsx(E,{onClick:x,children:s?d.jsx(F,{}):d.jsx(z,{})})})}})}),r&&d.jsx(h,{variant:"body2",sx:{mb:2,textAlign:"center",color:r.startsWith("Error")?"red":"green",fontWeight:"bold"},children:r}),d.jsx(c,{sx:{textAlign:"center",mb:2},children:d.jsx(m,{type:"submit",variant:"contained",fullWidth:!0,disabled:u||o,children:u||o?d.jsx(C,{size:24}):"Reset Password"})})]})})]})]})},oi=()=>{const[e,t]=l.useState(""),[s,a]=l.useState([]),[i,r]=l.useState(""),[n,o]=l.useState(!1),[u,x]=l.useState(""),[p,g]=l.useState(""),[f,b]=l.useState(!0);l.useEffect((()=>{(async()=>{try{const e=localStorage.getItem("temp2FAToken"),s=await Ea.get("/api/admin/setup-2fa",{headers:{Authorization:`Bearer ${e}`}});t(s.data.qrDataURL),s.data.backupCodes&&a(s.data.backupCodes)}catch(e){g(e.response?.data?.message||"Failed to load 2FA setup. Try again.")}finally{b(!1)}})()}),[]);return d.jsx(q,{maxWidth:"sm",sx:{minHeight:"100vh",display:"flex",alignItems:"center"},children:d.jsxs(c,{sx:{mt:6,mb:6,p:{xs:2,sm:4},boxShadow:6,borderRadius:3,bgcolor:"#fafbfc",width:"100%"},children:[d.jsxs(N,{alignItems:"center",spacing:1,sx:{mb:2},children:[d.jsx(c,{sx:{bgcolor:"#e3f2fd",borderRadius:"50%",width:66,height:66,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:2,mb:1},children:d.jsx(U,{size:36,color:"#1e88e5"})}),d.jsx(h,{variant:"h5",fontWeight:700,children:"Secure Your Account"}),d.jsx(h,{sx:{color:"text.secondary",fontSize:16,textAlign:"center"},children:"Set up two-factor authentication (2FA) to protect your admin account."})]}),d.jsx(j,{sx:{mb:3}}),f?d.jsx(c,{sx:{textAlign:"center",mt:2},children:d.jsx(C,{size:40})}):d.jsxs(d.Fragment,{children:[u&&d.jsx(_,{severity:"success",sx:{mb:2,fontWeight:500},children:u}),p&&d.jsx(_,{severity:"error",sx:{mb:2,fontWeight:500},children:p}),d.jsxs(N,{spacing:2,children:[d.jsx(h,{variant:"subtitle1",fontWeight:600,children:"1. Scan QR Code"}),d.jsx(h,{sx:{color:"text.secondary"},children:"Scan this QR code using Google Authenticator, Authy, or any TOTP app:"}),d.jsx(c,{sx:{display:"flex",justifyContent:"center"},children:e&&d.jsx("img",{src:e,alt:"2FA QR",style:{maxWidth:180,maxHeight:180,border:"6px solid #f5f5f5",borderRadius:8,background:"#fff"}})})]}),s.length>0&&d.jsxs(H,{elevation:0,sx:{p:2,my:3,bgcolor:"#f1f8e9",border:"1px solid #c5e1a5"},children:[d.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[d.jsx(h,{fontWeight:700,flex:1,children:"Backup Codes"}),d.jsx(J,{title:"Download backup codes",children:d.jsx(E,{onClick:()=>{const e="TOLI-TOLI Backup Codes\n\n"+s.join("\n")+"\n\nEach code can be used once. Keep this file safe!",t=document.createElement("a"),a=new Blob([e],{type:"text/plain"});t.href=URL.createObjectURL(a),t.download="toli-toli-backup-codes.txt",document.body.appendChild(t),t.click(),document.body.removeChild(t)},color:"primary",size:"large",children:d.jsx($,{})})})]}),d.jsx(V,{container:!0,spacing:1,children:s.map(((e,t)=>d.jsx(V,{item:!0,xs:6,md:4,children:d.jsx(c,{sx:{p:1,bgcolor:"#fffde7",borderRadius:1,textAlign:"center",fontFamily:"monospace",fontWeight:"bold",fontSize:16,letterSpacing:1,border:"1px dashed #c5e1a5"},children:e})},t)))}),d.jsx(h,{sx:{mt:2,fontSize:13,color:"#33691e"},children:"Save these codes in a secure place. Each code can be used once if you lose access to your authenticator app."})]}),d.jsx(j,{sx:{mb:2,mt:3}}),d.jsx("form",{onSubmit:async e=>{e.preventDefault(),g(""),o(!0);try{const e=await Ea.post("/api/admin/verify-2fa",{totpCode:i},{headers:{Authorization:`Bearer ${localStorage.getItem("temp2FAToken")}`}});e.data.success?(x("2FA setup complete! Redirecting…"),localStorage.removeItem("temp2FAToken"),sessionStorage.removeItem("pending2FA"),setTimeout((()=>{window.location.href="/auth0/admin/dashboard"}),1200)):g(e.data.message||"Verification failed.")}catch(t){g(t.response?.data?.message||"Verification failed. Try again.")}finally{o(!1)}},children:d.jsxs(N,{spacing:2,children:[d.jsxs(c,{children:[d.jsx(h,{variant:"subtitle1",fontWeight:600,children:"2. Enter 6-digit Code"}),d.jsx(h,{sx:{color:"text.secondary",fontSize:15,mb:1},children:"Enter the 6-digit code from your authenticator app."}),d.jsx(T,{label:"Authenticator Code",value:i,onChange:e=>r(e.target.value.trim()),required:!0,fullWidth:!0,autoFocus:!0,inputProps:{maxLength:6,inputMode:"numeric",pattern:"\\d{6}",style:{letterSpacing:4,fontSize:22,textAlign:"center"}},sx:{mb:.5}})]}),d.jsx(m,{type:"submit",variant:"contained",color:"primary",size:"large",disabled:n||6!==i.length,sx:{fontWeight:700,py:1.3,letterSpacing:1,fontSize:17},children:n?d.jsx(C,{size:22}):"Verify & Enable 2FA"})]})}),d.jsx(j,{sx:{my:3}}),d.jsxs(c,{sx:{textAlign:"center"},children:[d.jsx(h,{sx:{mb:1,color:"text.secondary"},children:"Can't access your authenticator app?"}),d.jsx(m,{color:"secondary",variant:"outlined",onClick:()=>window.location.href="/admin/verify-backup-code",sx:{fontWeight:600,letterSpacing:.5,px:3,borderRadius:2},children:"Use a Backup Code"})]})]})]})})},li=()=>{const[e]=G(),t=e.get("token"),s=v(),[a,i]=l.useState(""),[r,n]=l.useState(""),[o,u]=l.useState(!1),[x,p]=l.useState(""),[g,j]=l.useState(!1);return d.jsx(q,{maxWidth:"sm",children:d.jsxs(c,{sx:{mt:8,p:4,boxShadow:3,borderRadius:2,bgcolor:"#fff"},children:[d.jsx(h,{variant:"h4",align:"center",sx:{mb:3,fontWeight:600},children:"Accept Admin Invitation"}),g?d.jsx(_,{severity:"success",sx:{mb:2},children:"Account created! Redirecting you to login…"}):d.jsxs(d.Fragment,{children:[d.jsx(h,{sx:{mb:3,color:"text.secondary"},children:"Set up your admin account by choosing a name and password. You’ll configure 2FA after logging in."}),d.jsxs("form",{onSubmit:async e=>{e.preventDefault(),p(""),u(!0);try{const e=await Ea.post("/api/admin/accept-invite",{token:t,name:a,password:r});e.data.success?(j(!0),setTimeout((()=>{s("/admin/login")}),2e3)):p(e.data.message||"Unknown error")}catch(i){p(i.response?.data?.message||"Server/network error. Please try again.")}finally{u(!1)}},children:[d.jsx(T,{label:"Full Name",value:a,onChange:e=>i(e.target.value),required:!0,fullWidth:!0,sx:{mb:2},InputProps:{startAdornment:d.jsx(Y,{style:{marginRight:8}})}}),d.jsx(T,{label:"Password",value:r,onChange:e=>n(e.target.value),type:"password",required:!0,fullWidth:!0,sx:{mb:2},InputProps:{startAdornment:d.jsx(W,{style:{marginRight:8}})},helperText:"Minimum 8 characters, strong password recommended."}),x&&d.jsx(_,{severity:"error",sx:{mb:2},children:x}),d.jsx(m,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:o,sx:{py:1.2,fontWeight:"bold"},children:o?d.jsx(C,{size:24}):"Set Up Account"})]})]})]})})},di=()=>{const[e,t]=l.useState(""),[s,a]=l.useState(!1),[i,r]=l.useState(""),[n,o]=l.useState("");return d.jsx(q,{maxWidth:"sm",children:d.jsxs(c,{sx:{mt:8,p:4,boxShadow:3,borderRadius:2,bgcolor:"#fff"},children:[d.jsxs(c,{sx:{textAlign:"center",mb:2},children:[d.jsx(K,{size:40,color:"#1e88e5"}),d.jsx(h,{variant:"h5",fontWeight:600,sx:{mt:1},children:"Use Backup Code"})]}),d.jsx(h,{sx:{mb:2},children:"If you cannot access your authenticator app, enter one of your backup codes below."}),n&&d.jsx(_,{severity:"success",sx:{mb:2},children:n}),i&&d.jsx(_,{severity:"error",sx:{mb:2},children:i}),d.jsxs("form",{onSubmit:async t=>{t.preventDefault(),r(""),a(!0);try{const t=localStorage.getItem("temp2FAToken"),s=await Ea.post("/api/admin/verify-backup-code",{backupCode:e},{headers:{Authorization:`Bearer ${t}`}});s.data.success?(o("Backup code accepted! Redirecting…"),localStorage.removeItem("temp2FAToken"),sessionStorage.removeItem("pending2FA"),setTimeout((()=>{window.location.href="/auth0/admin/dashboard"}),1200)):r(s.data.message||"Invalid backup code.")}catch(s){r(s.response?.data?.message||"Verification failed. Try again.")}finally{a(!1)}},children:[d.jsx(T,{label:"Backup Code",value:e,onChange:e=>t(e.target.value.trim()),required:!0,fullWidth:!0,inputProps:{maxLength:8,style:{fontFamily:"monospace",letterSpacing:2}},sx:{mb:2}}),d.jsx(m,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:s,sx:{py:1.2,fontWeight:"bold"},children:s?d.jsx(C,{size:22}):"Verify Backup Code"})]})]})})},ci=()=>d.jsxs("div",{children:[d.jsx("h2",{children:"Access Denied"}),d.jsx("p",{children:"You do not have permission to view this page."})]});function hi({children:e}){const t=y(),s=w(Qa),a=w(Xa),i=Q();return l.useEffect((()=>{s||t(Ua())}),[t,s]),s?a?d.jsx(d.Fragment,{children:e}):i.pathname.startsWith("/Oauth2/v1/admin/login")?null:d.jsx(Z,{to:`/Oauth2/v1/admin/login?redirect=${encodeURIComponent(i.pathname)}`,replace:!0}):d.jsx(c,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsx(C,{size:60})})}function mi({children:e}){const t=w(Xa),s=w(Qa),a=y();return l.useEffect((()=>{s||a(Ua())}),[s,a]),s?t?d.jsx(Z,{to:"/auth0/admin/dashboard",replace:!0}):d.jsx(d.Fragment,{children:e}):d.jsx(c,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:d.jsx(C,{size:60})})}const ui=()=>{const[e,t]=l.useState(0),[s,a]=l.useState({}),[i,r]=l.useState(!0),n=l.useMemo((()=>[{url:"admin_banner1.jpg",title:"Turning Ideas into Reality",description:"I design and build intuitive web applications that solve real-world problems.",gradient:"radial-gradient(circle at bottom left, var(--gradient-color-1) 40%, var(--gradient-color-2) 90%, transparent 100%)"},{url:"admin_banner1.jpg",title:"Scalable Solutions for Modern Business",description:"From simple prototypes to complex platforms, I create applications that grow with your needs.",gradient:"radial-gradient(circle at bottom left, var(--gradient-color-1) 40%, var(--gradient-color-2) 90%,  transparent 100%)"},{url:"admin_banner1.jpg",title:"Clean Code, Seamless Experiences",description:"I focus on back-end logic and front-end design to deliver applications that are as beautiful as they are functional.",gradient:"radial-gradient(circle at bottom left, var(--gradient-color-1) 40%, var(--gradient-color-2) 90%, transparent 100%)"},{url:"admin_banner1.jpg",title:"Building with React and Node.js",description:"Crafting full-stack applications with modern JavaScript libraries and frameworks",gradient:"radial-gradient(circle at bottom left, var(--gradient-color-1) 40%, var(--gradient-color-2) 90%, transparent 100%)"},{url:"admin_banner1.jpg",title:"Front-End to Back-End",description:"Proficient in the entire development cycle, from UI/UX design to database management.",gradient:"radial-gradient(circle at bottom left, var(--gradient-color-1) 40%, var(--gradient-color-2) 90%, transparent 100%)"}]),[]);l.useEffect((()=>{n.forEach((({url:e})=>{const t=new Image;t.src=e,t.onload=()=>{a((t=>({...t,[e]:!0})))},t.onerror=t=>{console.error(`Error loading image: ${e}`,t)}}))}),[n]),l.useEffect((()=>{const e=setInterval((()=>{r(!1),setTimeout((()=>{t((e=>(e+1)%n.length)),r(!0)}),300)}),5e3);return()=>clearInterval(e)}),[n.length]);const o=n[e];return d.jsxs("div",{className:"header "+(i?"fade-in":"fade-out"),style:{backgroundImage:s[o.url]?`${o.gradient}, url(${o.url})`:"none",backgroundSize:"cover",backgroundPosition:"center",transition:"opacity 0.8s ease-in-out"},children:[d.jsx(ee.div,{initial:{opacity:0,scale:3},animate:{opacity:1,scale:1},transition:{duration:1},children:d.jsxs("div",{className:"header-content",children:[d.jsx("h2",{children:o.title}),d.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:20,alignItems:"center"},children:[d.jsx(te,{to:"/jerryDek/blog",children:d.jsxs("button",{children:[d.jsx("div",{className:"arrow"})," View Projects"]})}),d.jsx(te,{to:"/jerryDek/contactUs",children:d.jsx(ee.button,{whileHover:{boxShadow:"0px 8px 20px rgba(25, 118, 210, 0.5)"},style:{display:{xs:"none",sm:"flex"},borderRadius:10,background:"linear-gradient(90deg, #1976d2, #42a5f5)",verticalAlign:"middle",marginLeft:"10px",width:"max-content",transition:"all 0.5s",padding:"16px 20px",color:"white",border:"none"},children:"Contact Me"})})]}),d.jsx("p",{children:o.description})]})}),d.jsx("div",{className:"profile",children:d.jsx("div",{className:"profile-pic",children:d.jsx("img",{src:"icons/profile-pic2.png",alt:"profile"})})}),d.jsx("div",{className:"dots",children:n.map(((s,a)=>d.jsx("span",{className:"dot "+(e===a?"active":""),onClick:()=>(e=>{r(!1),setTimeout((()=>{t(e),r(!0)}),300)})(a)},a)))})]})},xi=()=>d.jsxs("div",{className:"design-display",id:"design-display",children:[d.jsx("h1",{children:"Projects worked on"}),d.jsxs("div",{className:"design-display-list",children:[d.jsxs("div",{className:"card1",children:[d.jsx(se,{style:{width:"30px",color:"#2C3E50",height:"30px",marginBottom:"10px"}}),d.jsx("h2",{children:"Ride booking platform"}),d.jsx("p",{children:"We believe in providing value for your money. Enjoy competitive pricing without compromising on quality or comfort, ensuring you travel affordably every time."})]}),d.jsxs("div",{className:"card1",children:[d.jsx(ae,{style:{width:"30px",color:"#2C3E50",height:"30px",marginBottom:"10px"}}),d.jsx("h2",{children:"E-Commerce Platform"}),d.jsx("p",{children:"Created a crafted balloon and floral web app for florist. "})]}),d.jsxs("div",{className:"card1",children:[d.jsx(ie,{style:{width:"30px",color:"#2C3E50",height:"30px",marginBottom:"10px"}}),d.jsx("h2",{children:"Gadgets Servicing"}),d.jsx("p",{children:"Platform for servicing your gadgets by booking your gadgets to the servicers of the platform to reach out to you quickly. Its really free, easy and afordable."})]}),d.jsxs("div",{className:"card1",children:[d.jsx(re,{style:{width:"30px",color:"#2C3E50",height:"30px",marginBottom:"10px"}}),d.jsx("h2",{children:"transports Booking"}),d.jsx("p",{children:"We believe in providing value for your money. Enjoy competitive pricing without compromising on quality or comfort, ensuring you travel affordably every time."})]})]}),d.jsx("div",{children:d.jsx("p",{})})]}),pi=()=>{const[e,t]=l.useState(!1),[s,a]=l.useState([]),[r,n]=l.useState(""),[o,c]=l.useState(!1),[h,m]=l.useState(!1),u=l.useRef(null),x=l.useRef(null),p=()=>t(!e),g=e=>{const t=window.speechSynthesis;if(t){const s=new SpeechSynthesisUtterance(e);s.lang="en-US",t.speak(s)}},j=(e,t)=>({sender:e,text:t}),f={"how do i book a ride":"To book a ride, visit the rides page, choose your route, date, and confirm your selection.","how to cancel a booking":"Go to 'My Bookings' and click 'Cancel' next to the ride you want to cancel.","how does tqli-toli work":"TOLI-TOLI helps you book reliable transport. Browse rides, select your route, and confirm in a few steps."},b=async(e=r)=>{if(e.trim()){const r=j("user",e),o=[...s,r];a(o),n(""),c(!0),a((e=>[...e,j("bot","[typing]")]));const l=y(e)||(e=>{const t=Object.keys(f).find((t=>e.toLowerCase().includes(t)));return t?f[t]:null})(e);if(l)return void setTimeout((()=>{const e=j("bot",l);a((t=>[...t.slice(0,-1),e])),g(l),c(!1),localStorage.setItem("toli-chat",JSON.stringify([...o,e]))}),800);try{const t=await i.post("/api/chat/bot",{history:o,message:e});setTimeout((()=>{const e=j("bot",t.data.reply);a((t=>[...t.slice(0,-1),e])),g(t.data.reply),localStorage.setItem("toli-chat",JSON.stringify([...o,e])),c(!1)}),1e3)}catch(t){const e=j("bot","Oops! Something went wrong. Please try again later.");a((t=>[...t.slice(0,-1),e])),c(!1)}}},y=e=>{const t=e.toLowerCase();return t.includes("How to code in react")?"Are you really familiar in javascript?":t.includes("cancel ride")?"To cancel a ride, go to your bookings page and click 'Cancel' next to your ride.":t.includes("platform status")?"JeremiahDek is currently online and fully functional. You can contact the owner at +233246062758":null};l.useEffect((()=>{u.current?.scrollIntoView({behavior:"smooth"})}),[s]),l.useEffect((()=>{const e=localStorage.getItem("toli-chat");e&&a(JSON.parse(e))}),[]);return d.jsxs("div",{className:"chatbot-container",children:[d.jsx("button",{className:"chatbot-button",onClick:p,children:d.jsx(ne,{style:{color:"#fff",fontSize:"32px"}})}),e&&d.jsxs("div",{className:"chatbot-dialog",children:[d.jsxs("div",{className:"chatbot-header",children:[d.jsxs("div",{className:"header-left",children:[d.jsx("img",{src:"/chatbot.png",alt:"Bot",className:"bot-avatar"}),d.jsx("span",{className:"bot-title",children:"Jeremiah's Assistant"})]}),d.jsx("button",{className:"close-button",onClick:p,children:"×"})]}),d.jsxs("div",{className:"chatbot-messages",children:[s.map(((e,t)=>d.jsx("div",{className:`chat-message ${e.sender} ${"[typing]"===e.text?"typing":""}`,children:d.jsx("div",{className:"bubble",children:"[typing]"===e.text?d.jsx("span",{className:"dot-typing",children:o}):e.text})},t))),d.jsx("div",{ref:u})]}),d.jsx("div",{className:"chatbot-quick-replies",children:["How to code in react","Build a website","Platform status","Help"].map(((e,t)=>d.jsx("button",{className:"quick-reply-btn",onClick:()=>b(e),children:e},t)))}),d.jsxs("div",{className:"chatbot-input",children:[d.jsx("input",{type:"text",placeholder:"Type your message...",value:r,onChange:e=>n(e.target.value),onKeyDown:e=>"Enter"===e.key&&b()}),d.jsx("button",{onClick:()=>b(),title:"Send",children:d.jsx(oe,{})}),d.jsx("button",{onClick:()=>{if(!("webkitSpeechRecognition"in window))return void alert("Speech recognition not supported in this browser.");const e=new(0,window.webkitSpeechRecognition);e.continuous=!1,e.lang="en-US",e.onstart=()=>m(!0),e.onend=()=>m(!1),e.onerror=()=>m(!1),e.onresult=e=>{const t=e.results[0][0].transcript;n(t)},e.start(),x.current=e},title:"Speak",children:d.jsx(le,{color:h?"red":"#333"})})]})]})]})};function gi(){const e=x(),t=v();return d.jsxs(c,{className:"landing-description",sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",placeSelf:"center",mt:{xs:-6,sm:"120px"},height:"100%",width:"100%",maxWidth:"800px",textAlign:"center",bgcolor:"transparent",padding:4},children:[d.jsxs(h,{variant:"h1",component:"h1",sx:{mb:2,fontSize:{xs:"1.5rem",sm:"3rem"},fontWeight:800,color:"#333",fontFamily:"'Poppins', sans-serif"},children:["Welcome to JeremiahDek ",d.jsx("br",{})," Coding Platform"]}),d.jsx(h,{variant:"h6",component:"p",sx:{mb:{xs:2,sm:4},color:"text.secondary",maxWidth:"600px",lineHeight:{xs:1.4,sm:1.6},textAlign:{xs:"start",sm:"center"},placeSelf:{xs:"center",sm:"center"},p:{xs:0,sm:1}},children:"Crafting full-stack applications with modern JavaScript libraries and frameworks"}),d.jsx(m,{variant:"contained",size:"large",onClick:()=>{t("/jerryDek/contactUs")},sx:{width:{xs:"100%",sm:"300px"},py:1.5,fontSize:"1.2rem",fontWeight:600,borderRadius:e.shape.borderRadius,boxShadow:e.shadows[3],transition:"all 0.3s","&:hover":{transform:"translateY(-2px)",boxShadow:"0 0 16px #4280b9ff",bgcolor:"#444"},background:"linear-gradient(90deg, #1976d2, #42a5f5)"},children:"Contact Jeremiah"}),d.jsx(j,{className:"description-divider",sx:{bgcolor:{xs:"#ddd",sm:"none"},width:"100%",mt:8}})]})}const ji=()=>{const[e,t]=l.useState(!1);return l.useEffect((()=>{const e=()=>{const e=window.scrollY>150,s=window.innerHeight+window.scrollY>=document.body.scrollHeight-500;t(e&&!s)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),d.jsx("div",{className:"scroll-bottom-button",style:{opacity:e?1:0,pointerEvents:e?"auto":"none",position:"fixed",bottom:"150px",right:"20px",zIndex:1e3,backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"20px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)",padding:"15px",cursor:"pointer",transition:"opacity 0.4s ease"},children:d.jsx("a",{href:"#footer",className:"scroll-bottom-link",children:d.jsx(de,{className:"scroll-bottom-icon",size:30,style:{color:"#333"}})})})},fi=()=>{const e=l.useRef(null);return l.useEffect((()=>{const t=e.current,s=t.getContext("2d");let a=[];const i=()=>{t.width=window.innerWidth,t.height=window.innerHeight/1.5};window.addEventListener("resize",i),i();a=Array.from({length:50}).map((()=>({x:Math.random()*t.width,y:Math.random()*t.height,r:3*Math.random(),dx:.4*(Math.random()-.5),dy:.4*(Math.random()-.5)})));const r=()=>{s.clearRect(0,0,t.width,t.height),a.forEach((e=>{s.beginPath(),s.arc(e.x,e.y,e.r,0,2*Math.PI),s.fillStyle="rgba(255,255,255,0.7)",s.fill(),e.x+=e.dx,e.y+=e.dy,(e.x<0||e.x>t.width)&&(e.dx*=-1),(e.y<0||e.y>t.height)&&(e.dy*=-1)})),requestAnimationFrame(r)};return r(),()=>window.removeEventListener("resize",i)}),[]),d.jsx("canvas",{ref:e,className:"particle-bg"})},bi=[{icon:d.jsx(pe,{size:40,color:"#2563eb"}),label:"Projects Completed",value:15,suffix:"+"},{icon:d.jsx(ie,{size:40,color:"#2563eb"}),label:"Years of Experience",value:4,suffix:"+"},{icon:d.jsx(ge,{size:40,color:"#2563eb"}),label:"Tech & Tools Used",value:50,suffix:"+"},{icon:d.jsx(je,{size:40,color:"#2563eb"}),label:"Platforms Collaborated",value:1250,suffix:"+"}],yi=()=>{const e=l.useRef(null),t=ce(e,{once:!1,amount:.3}),s=he(0),a=he(0),i=me(s,[-50,50],[-15,15]),r=me(a,[-50,50],[-15,15]);return d.jsxs("div",{className:"glass-section",ref:e,children:[d.jsx("div",{className:"fog-layer"}),d.jsx("div",{className:"fog-layer layer2"}),d.jsx(fi,{}),d.jsxs(ee.div,{initial:{opacity:0},animate:t?{opacity:1}:{opacity:0},transition:{duration:1.2},style:{position:"relative",zIndex:5},children:[d.jsx(h,{variant:"h4",align:"center",gutterBottom:!0,sx:{fontWeight:"bold",mb:4},children:"My Achievements"}),d.jsx(V,{container:!0,spacing:3,justifyContent:"center",children:bi.map(((e,n)=>{const o=s,l=a,c=r,m=i;return d.jsx(V,{item:!0,xs:12,sm:6,md:3,children:d.jsx(ee.div,{className:"magnetic",style:{rotateX:c,rotateY:m,perspective:1e3},onMouseMove:e=>{const t=e.currentTarget.getBoundingClientRect();o.set(e.clientX-t.left-t.width/2),l.set(e.clientY-t.top-t.height/2)},onMouseLeave:()=>{o.set(0),l.set(0)},children:d.jsx(R,{className:"ripple-card",sx:{textAlign:"center",padding:"30px",borderRadius:"16px",backdropFilter:"blur(8px)",boxShadow:"0 10px 20px rgba(0,0,0,0.15)"},children:d.jsxs(ue,{children:[d.jsx("div",{style:{marginBottom:"10px"},className:"statsIcon",children:e.icon}),d.jsx(h,{variant:"h3",sx:{fontWeight:"bold",color:"#2563eb"},children:t&&d.jsx(xe,{end:e.value,duration:3,suffix:e.suffix},t+"-"+n)}),d.jsx(h,{variant:"subtitle1",sx:{mt:1,fontWeight:500},className:"statsLabel",children:e.label})]})})})},n)}))})]})]})},vi=[{name:"React",icon:d.jsx(fe,{size:40,color:"#61DBFB"})},{name:"Node.js",icon:d.jsx(be,{size:40,color:"#3C873A"})},{name:"JavaScript",icon:d.jsx(ye,{size:40,color:"#F7DF1E"})},{name:"MongoDB",icon:d.jsx(ve,{size:40,color:"#4DB33D"})},{name:"CSS3",icon:d.jsx(we,{size:40,color:"#264de4"})},{name:"Databases",icon:d.jsx(ke,{size:40,color:"#ff9900"})}],wi={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2}}},ki={hidden:{opacity:0,y:50},show:{opacity:1,y:0,transition:{duration:2,type:"spring"}}},Si=()=>d.jsxs(ee.div,{initial:"hidden",whileInView:"show",variants:wi,viewport:{once:!1},style:{padding:"60px 20px"},className:"skill-section-bg",children:[d.jsx(h,{variant:"h4",align:"center",gutterBottom:!0,sx:{fontWeight:"bold",mb:4},children:"My Expertise"}),d.jsx(V,{container:!0,spacing:3,justifyContent:"center",children:vi.map(((e,t)=>d.jsx(V,{item:!0,xs:12,sm:6,md:4,children:d.jsx(ee.div,{variants:ki,whileHover:{scale:1.1,rotate:2},children:d.jsx(R,{className:"skill-card",sx:{textAlign:"center",padding:"20px",borderRadius:"16px",boxShadow:"0 8px 16px rgba(0,0,0,0.05)","&:hover":{transform:"scale(1.05)",transition:"2s"}},children:d.jsxs(ue,{children:[d.jsx("div",{style:{marginBottom:"10px"},children:e.icon}),d.jsx(h,{variant:"h6",sx:{fontWeight:"bold"},children:e.name})]})})})},t)))})]}),Ci=()=>{const e="dark"===x().palette.mode,t=[{image:"Jules-admin.jpg",name:"Jules Trovor",role:"Product Manager",message:"Jeremiah is an exceptional developer! He delivered our project on time with top-notch quality."},{image:"",name:"Jeremy Halik",role:"UI/UX Designer",message:"Working with Jeremiah was an amazing experience. He understands design and functionality perfectly."},{image:"traveler9.jpeg",name:"Samuel Aidoo",role:"Co-ordinator",message:"Working with Jeremiah was an amazing experience. He understands design and functionality perfectly."},{image:"Bob2.jpg",name:"Roberta Kokroko",role:"Startup Founder",message:"Very professional and highly skilled. I recommend him for any modern web application project."},{image:"team4.jpg",name:"Mark Johnson",role:"Senior Engineer",message:"Highly reliable and always delivers excellent work beyond expectations."},{image:"team5.jpg",name:"Diana Q.",role:"Business Owner",message:"Amazing communication and quality code. I will definitely work with him again!"}],s=Se(),a=l.useRef(null);Ce.useEffect((()=>{s.start({x:["0%","-100%"],transition:{x:{repeat:1/0,repeatType:"loop",duration:20,ease:"linear"}}})}),[]);return d.jsxs("section",{className:"testimonials-wrapper",children:[d.jsxs("div",{className:"blur-bg-shapes",children:[d.jsx("div",{className:"shape purple"}),d.jsx("div",{className:"shape blue"}),d.jsx("div",{className:"shape pink"})]}),d.jsx("h2",{className:"testimonials-title",children:"What Clients Say"}),d.jsx("div",{className:"testimonials-marquee",onMouseEnter:()=>s.stop(),onMouseLeave:()=>s.start({x:["0%","-100%"],transition:{x:{repeat:1/0,repeatType:"loop",duration:20,ease:"linear"}}}),ref:a,children:d.jsx(ee.div,{className:"testimonials-track",animate:s,drag:"x",dragConstraints:a,dragElastic:.12,children:[...t,...t].map(((t,s)=>d.jsxs(ee.div,{className:"testimonial-card pro "+(e?"dark-glow":"light-glow"),initial:{opacity:0,y:40,filter:"blur(6px)"},whileInView:{opacity:1,y:0,filter:"blur(0px)",transition:{duration:.7,ease:"easeOut"}},whileHover:{rotateX:5,rotateY:-5,scale:1.05,boxShadow:"0 0 40px rgba(140, 90, 255, 0.35)",transition:{type:"spring",stiffness:150}},viewport:{once:!1},children:[d.jsx("div",{className:"light-bar"}),d.jsxs("p",{className:"testimonial-message",children:['"',t.message,'"']}),d.jsx("div",{className:"testimonial-avatar",children:d.jsx("img",{src:t.image,alt:t.name})}),d.jsx("h4",{children:t.name}),d.jsx("span",{children:t.role})]},s)))})})]})},Ri=()=>{const[e,t]=l.useState({name:"",email:"",message:""}),s=s=>{t({...e,[s.target.name]:s.target.value})};return d.jsxs("section",{className:"contact",children:[d.jsx("h2",{children:"Contact Me"}),d.jsxs("form",{onSubmit:e=>{e.preventDefault(),B.success("Message sent successfully!",{bodyStyle:{backgroundColor:"#144d8a",color:"#fff",padding:"10px 20px",borderRadius:"8px"},progressStyle:{backgroundColor:"gray"}}),t({name:"",email:"",message:""})},className:"contact-form",children:[d.jsx("input",{type:"text",name:"name",placeholder:"Your Name",value:e.name,onChange:s,required:!0}),d.jsx("input",{type:"email",name:"email",placeholder:"Your Email",value:e.email,onChange:s,required:!0}),d.jsx("textarea",{name:"message",placeholder:"Your Message",value:e.message,onChange:s,required:!0}),d.jsx(m,{type:"submit",style:{background:"linear-gradient(90deg, #1976d2, #42a5f5)"},children:"Send Message"})]})]})},Ii=[{id:1,img:"team/han.jpg"},{id:2,img:"team/Bob.jpg"},{id:3,img:"team/Jules-admin.jpg"}],Ai=ee(c),Ni=()=>{const e="dark"===Re().palette.mode;Ce.useRef(null);const t={hidden:{opacity:0,scale:.5,y:20},visible:{opacity:[0,1,1.2],scale:1,y:0,transition:{duration:.7,ease:"easeOut"}}};return d.jsxs(c,{sx:{position:"relative",textAlign:"center",py:10,overflow:"hidden"},children:[d.jsx(ee.div,{animate:{y:[0,30,0],rotate:[0,15,0]},transition:{repeat:1/0,duration:8,ease:"easeInOut"},initial:{y:-20,rotate:0},whileInView:{y:[0,30,0],rotate:[0,15,0]},style:{position:"absolute",top:"10%",left:"5%",width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #1976d2, #42a5f5)",opacity:.2,zIndex:-1}}),d.jsx(ee.div,{animate:{y:[0,30,0],rotate:[0,15,0]},transition:{repeat:1/0,duration:8,ease:"easeInOut"},style:{position:"absolute",top:"10%",right:"5%",width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #1976d2, #42a5f5)",opacity:.2,zIndex:-1}}),d.jsx(ee.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:1},visible:{opacity:1,transition:{staggerChildren:.3,delayChildren:.4}}},children:d.jsx(ee.div,{variants:{hidden:{opacity:0,y:60},visible:{opacity:1,y:0,transition:{duration:1.2,ease:[.25,.8,.25,1]}}},children:d.jsx(h,{align:"center",gutterBottom:!0,sx:{fontSize:{xs:36,sm:62},fontWeight:"bold",color:"#7b1fa2",mb:4},children:"Let’s Connect!"})})}),d.jsx(c,{sx:{display:"flex",justifyContent:"center",gap:4},children:[...Array(5)].map(((e,t)=>d.jsx(ee.div,{animate:{y:[0,-20,0]},transition:{repeat:1/0,duration:2.5+.2*t,ease:"easeInOut"},style:{width:"6px",height:"180px",borderRadius:"12px",background:t%2==0?"#1976d2":"#42a5f5"}},t)))}),d.jsx(ee.button,{whileHover:{scale:1.1,boxShadow:"0px 8px 20px rgba(25, 118, 210, 0.5)"},transition:{type:"spring",stiffness:300},style:{marginTop:"40px",padding:"16px 40px",fontSize:"18px",fontWeight:"600",color:"#fff",background:"linear-gradient(90deg, #1976d2, #42a5f5)",border:"none",borderRadius:"50px",cursor:"pointer"},children:"Get in Touch"}),d.jsxs(Ai,{initial:"hidden",whileInView:"visible",viewport:{amount:.3,once:!1},variants:{visible:{transition:{staggerChildren:.25,delayChildren:.4}}},sx:{position:"absolute",top:"50%",left:"30%",width:230,height:230,transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",backdropFilter:"blur(8px)",zIndex:-1},children:[d.jsx(Ai,{variants:t,sx:{position:"absolute",top:"18%",left:"18%",width:70,height:70,borderRadius:"50%",overflow:"hidden",border:e?"2px solid #ffffff30":"2px solid #00000020",boxShadow:e?"0 0 12px rgba(255,255,255,0.2)":"0 0 10px rgba(0,0,0,0.15)"},children:d.jsx("img",{src:Ii[0].img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),d.jsx(Ai,{variants:t,sx:{position:"absolute",top:"18%",right:"18%",width:70,height:70,borderRadius:"50%",overflow:"hidden",border:e?"2px solid #ffffff30":"2px solid #00000020",boxShadow:e?"0 0 12px rgba(255,255,255,0.2)":"0 0 10px rgba(0,0,0,0.15)"},children:d.jsx("img",{src:Ii[1].img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),d.jsx(Ai,{variants:t,sx:{position:"absolute",bottom:"14%",left:"50%",transform:"translateX(-50%)",width:70,height:70,borderRadius:"50%",overflow:"hidden",border:e?"2px solid #ffffff30":"2px solid #00000020",boxShadow:e?"0 0 12px rgba(255,255,255,0.2)":"0 0 10px rgba(0,0,0,0.15)"},children:d.jsx("img",{src:Ii[2].img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),d.jsx(Ai,{variants:t,sx:{position:"absolute",bottom:"24%",left:"30%",transform:"translateX(-50%)",width:70,height:70,borderRadius:"50%",overflow:"hidden"},children:d.jsx(h,{variant:"h4",children:"+"})})]})]})},Ti=ee(c),Di=ee.div,Pi=["React Developer","Frontend Engineer","Node.js Backend","Mobile Developer","UI/UX Designer"],Ei=[{id:1,img:"team/han.jpg"},{id:2,img:"team/Bob.jpg"},{id:3,img:"team/Jules-admin.jpg"}];function Fi(){const e="dark"===x().palette.mode,t=Ce.useRef(null),s=he(0),a=he(0),i={hidden:{opacity:0,scale:.5,y:20},visible:{opacity:[0,1,1.2],scale:1,y:0,transition:{duration:.7,ease:"easeOut"}}},r={hidden:{opacity:0,scale:.2},visible:e=>({opacity:[0,1,.6],scale:[.2,1,1.4],transition:{duration:2+.3*e,ease:"easeInOut"}})},n={hidden:{opacity:0,y:25,scale:.9},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:"easeOut"}}};return d.jsxs(c,{onMouseMove:e=>{const i=t.current.getBoundingClientRect();s.set(e.clientX-(i.left+i.width/2)),a.set(e.clientY-(i.top+i.height/2))},ref:t,component:Di,sx:{position:"relative",height:"600px",overflow:"hidden",py:12,textAlign:"center"},children:[d.jsx(Di,{animate:{y:[0,-25,0]},transition:{repeat:1/0,duration:6,ease:"easeInOut"},style:{position:"absolute",top:"15%",left:"8%",width:120,height:120,borderRadius:"50%",background:e?"rgba(124,58,237,0.25)":"rgba(103, 80, 164,0.25)",filter:"blur(14px)",zIndex:-1}}),d.jsx(Di,{animate:{y:[60,-60,60],x:[0,40,0]},transition:{repeat:1/0,duration:6,ease:"easeInOut"},style:{position:"absolute",top:"30%",left:"20%",width:120,height:120,borderRadius:"50%",background:e?"rgba(64, 137, 248, 0.25)":"rgba(195, 125, 204, 0.25)",filter:"blur(14px)",zIndex:-1}}),d.jsx(Di,{animate:{y:[0,30,0],x:[0,-20,0]},transition:{repeat:1/0,duration:7,ease:"easeInOut"},style:{position:"absolute",bottom:"10%",right:"5%",width:150,height:150,borderRadius:"50%",background:e?"rgba(59,130,246,0.25)":"rgba(66,165,245,0.25)",filter:"blur(18px)",zIndex:-1}}),[1,2,3].map((e=>d.jsx(Ti,{custom:e,variants:r,initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"profession-circle",sx:{position:"absolute",top:"50%",left:"50%",width:250*e,height:250*e,borderRadius:"50%",pointerEvents:"none",transform:"translate(-50%, -50%)",zIndex:-2}},e))),d.jsxs(Ti,{initial:"hidden",whileInView:"visible",viewport:{amount:.3,once:!1},variants:{visible:{opacity:[0,1,1.2],transition:{staggerChildren:.25,delayChildren:.4}}},sx:{position:"absolute",top:"70%",left:{xs:"30%",sm:"25%",md:"30%"},width:230,height:230,transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",backdropFilter:"blur(1px)",zIndex:3,border:"none"},children:[d.jsx(Ti,{variants:i,sx:{position:"absolute",top:"18%",left:"5%",width:70,height:70,borderRadius:"50%",overflow:"hidden",border:e?"2px solid #ffffff30":"2px solid #00000020",boxShadow:e?"0 0 12px rgba(255,255,255,0.2)":"0 0 10px rgba(0,0,0,0.15)"},children:d.jsx("img",{src:Ei[0].img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),d.jsx(Ti,{variants:i,sx:{position:"absolute",top:{sm:"18%",xs:"40%"},right:{xs:"20%",sm:"18%"},width:70,height:70,borderRadius:"50%",overflow:"hidden",border:e?"2px solid #ffffff30":"2px solid #00000020",boxShadow:e?"0 0 12px rgba(255,255,255,0.2)":"0 0 10px rgba(0,0,0,0.15)"},children:d.jsx("img",{src:Ei[1].img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),d.jsx(Ti,{variants:i,sx:{display:{xs:"none",md:"block"},position:"absolute",bottom:"5%",left:"50%",transform:"translateX(-50%)",width:70,height:70,borderRadius:"50%",overflow:"hidden",border:e?"2px solid #ffffff30":"2px solid #00000020",boxShadow:e?"0 0 12px rgba(255,255,255,0.2)":"0 0 10px rgba(0,0,0,0.15)"},children:d.jsx("img",{src:Ei[2].img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})})]}),d.jsx(Ti,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!1},transition:{duration:1},sx:{mb:6},children:d.jsx(h,{variant:"h4",fontWeight:"bold",sx:{color:e?"#90caf9":"#1976d2"},children:"What I Specialize In"})}),d.jsx(Ti,{initial:"hidden",whileInView:"visible",viewport:{once:!1},variants:{visible:{transition:{staggerChildren:.2}}},sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:2},children:Pi.map(((e,t)=>d.jsx(Ti,{variants:n,children:d.jsx(Ie,{label:e,className:"profession-chip",sx:{px:2,py:2,backdropFilter:"blur(10px)",fontWeight:600,"&:hover":{scale:"1.08",transition:"0.3s"}}})},t)))})]})}const zi=()=>{const e={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.8}}};return d.jsxs(ee.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:1},visible:{opacity:1,transition:{staggerChildren:.3}}},style:{scrollBehavior:"smooth"},children:[d.jsx(b,{children:d.jsx("title",{children:"Jeremiah Deku - Me"})}),d.jsx(ui,{}),d.jsxs(c,{children:[d.jsx(ee.div,{variants:e,children:d.jsx(gi,{})}),d.jsx(ee.div,{variants:e,children:d.jsx(Fi,{})}),d.jsx(ee.div,{variants:e,children:d.jsx(Si,{})}),d.jsx(ee.div,{variants:e,children:d.jsx(yi,{})}),d.jsx(c,{sx:{mx:{xs:0,md:5}},children:d.jsx(ee.div,{variants:e,children:d.jsx(xi,{})})}),d.jsx(ee.div,{variants:e,children:d.jsx(Ci,{})}),d.jsx(ee.div,{variants:e,children:d.jsx(Ni,{})}),d.jsx(ee.div,{variants:e,children:d.jsx(Ri,{})})]}),d.jsx(ee.div,{variants:e,children:d.jsx(pi,{})}),d.jsx(ee.div,{variants:e,children:d.jsx(ji,{})})]})};async function Wi(e){const t=e.map((e=>new Promise((t=>{if(/\.(mp3|mp4|wav|ogg|json|web|webp|png|jpeg|gif|ico||svg)$/i.test(e)){const s=new Audio;s.oncanplaythrough=t,s.onerror=t,s.src=e}else{const s=new Image;s.onload=t,s.onerror=t,s.src=e}}))));await Promise.all(t)}async function Li(){await async function(){let e=[];try{const t=await fetch("/manifest.json").then((e=>e.json()));e=Object.values(t).flatMap((e=>[e.file,...e.css||[],...e.assets||[]])).filter((e=>/\.(png|jpe?g|svg|webp|gif|ico|mp3|mp4|json|web|webp|wav)$/i.test(e))).map((e=>e.startsWith("/")?e:`/${e}`))}catch(t){console.warn("Failed to load manifest.json, falling back to glob eager",t)}if(!e.length){const t=Object.assign({});e=Object.values(t).map((e=>e.default))}await Wi(e),console.log("Assets asstes loaded")}(),await async function(){const e=Object.assign({}),t=Object.values(e).map((e=>e.default));sessionStorage.getItem("publicAssetsLoaded")||(console.log("Public asstes loaded"),await Wi(t),sessionStorage.setItem("publicAssetsLoaded","true"))}(),console.log("✅ All assets preloaded")}const Bi=()=>{const[e,t]=l.useState(localStorage.getItem("theme")||"light");l.useEffect((()=>{document.body.className=e,localStorage.setItem("theme",e)}),[e]);return d.jsx("div",{className:"toggleTheme",children:d.jsx("button",{className:"themeButton",onClick:()=>{t("light"===e?"dark":"light")},children:"light"===e?d.jsx(Ae,{}):d.jsx(Ne,{})})})},Oi=[{to:"/jerryDek/blog/projects",text:"Projects",icon:d.jsx(ze,{})}],Mi=[{to:"/jerryDek/blog/code",text:"Code Snippets",icon:d.jsx(We,{})},{to:"/jerryDek/blog/technologies",text:"Technologies",icon:d.jsx(Le,{})},{to:"/jerryDek/blog/tools",text:"Tools",icon:d.jsx(ie,{})},{to:"/jerryDek/blog/certificates",text:"Certificates",icon:d.jsx(Be,{})},{to:"/jerryDek/blog/reviews",text:"Reviews",icon:d.jsx(Oe,{})}],qi=[{to:"/jerryDek/blog/getJob",text:"GetJob Faster",icon:d.jsx(Me,{})},{to:"/jerryDek/blog/courses",text:"Courses",icon:d.jsx(qe,{})},{to:"/jerryDek/blog/project-assets",text:"Projects Assets",icon:d.jsx(Ue,{})}],Ui=[{to:"",text:"Change Theme",icon:d.jsx(Bi,{className:"themeButton"})}];function _i({onLinkClick:e}){const[t,s]=l.useState(!0);return l.useEffect((()=>{t&&(async()=>{localStorage.getItem("adminAssetsLoaded")||(await Li(),localStorage.setItem("adminAssetsLoaded","true")),sessionStorage.setItem("adminAssetsLoaded","true"),s(!1)})()}),[t]),t?d.jsxs(c,{children:[d.jsx(c,{sx:{p:2},children:Array.from({length:Oi.length}).map(((e,t)=>d.jsx("div",{sx:{display:"flex"},children:d.jsx(X,{variant:"rectangular",height:48,sx:{mb:1}},t)})))}),d.jsx(c,{sx:{p:2,mt:2},children:Array.from({length:Mi.length}).map(((e,t)=>d.jsx("div",{sx:{display:"flex"},children:d.jsx(X,{variant:"rectangular",height:48,sx:{mb:1}},t)})))}),d.jsx(c,{sx:{p:2,mt:5},children:Array.from({length:qi.length}).map(((e,t)=>d.jsx("div",{sx:{display:"flex"},children:d.jsx(X,{variant:"rectangular",height:48,sx:{mb:1}},t)})))}),d.jsx(c,{sx:{p:2,mt:5},children:Array.from({length:Ui.length}).map(((e,t)=>d.jsx("div",{sx:{display:"flex"},children:d.jsx(X,{variant:"rectangular",height:48,sx:{mb:1}},t)})))})]}):d.jsxs(c,{sx:{width:320,pt:2},className:"sidebar-bg",children:[d.jsx(Te,{children:Oi.map((({to:t,text:s,icon:a})=>d.jsx(d.Fragment,{children:d.jsx(R,{elevation:2,children:d.jsxs(De,{component:Pe,onClick:e,to:t,sx:{px:3,py:1.5},style:({isActive:e})=>({borderRadius:8,padding:"12px 24px",color:e?"#fff":"inherit",background:e?"linear-gradient(90deg, #1976d2, #094785ff)":"transparent"}),children:[d.jsx(Ee,{sx:{color:"inherit",minWidth:36},children:a}),d.jsx(Fe,{primary:s})]},t)})})))}),d.jsx(j,{sx:{fontSize:12}}),d.jsx(Te,{children:Mi.map((({to:e,text:t,icon:s})=>d.jsx(d.Fragment,{children:d.jsxs(De,{component:Pe,to:e,sx:{px:3,py:1.5},style:({isActive:e})=>({borderRadius:8,padding:"12px 24px",color:e?"#fff":"inherit",background:e?"linear-gradient(90deg, #1976d2, #094785ff)":"transparent"}),children:[d.jsx(Ee,{sx:{color:"inherit",minWidth:36},children:s}),d.jsx(Fe,{primary:t})]},e)})))}),d.jsx(j,{}),d.jsxs(Te,{children:[d.jsx(R,{children:d.jsx(R,{elevation:10,className:"sidebar-card-bg",children:d.jsx(I,{sx:{ml:5},title:"Learning",className:"sidebar-card-header"})})}),qi.map((({to:e,text:t,icon:s})=>d.jsx(d.Fragment,{children:d.jsxs(De,{component:Pe,to:e,sx:{px:3,py:1.5},style:({isActive:e})=>({borderRadius:8,padding:"12px 24px",color:e?"#fff":"inherit",background:e?"linear-gradient(90deg, ActiveCaption, #094785ff)":"transparent"}),children:[d.jsx(Ee,{sx:{color:"inherit",minWidth:36},children:s}),d.jsx(Fe,{primary:t})]},e)})))]}),d.jsx(j,{}),d.jsxs(Te,{children:[d.jsx(R,{children:d.jsx(R,{elevation:10,className:"sidebar-card-bg",children:d.jsx(I,{sx:{ml:5},title:"Settings",className:"sidebar-card-header"})})}),Ui.map((({to:e,text:t,icon:s})=>d.jsxs(d.Fragment,{children:[d.jsxs(De,{component:Pe,to:e,sx:{px:3,py:1.5},style:({isActive:e})=>({borderRadius:8,padding:"12px 24px",color:e?"#fff":"inherit",background:e?"linear-gradient(90deg, #1976d2, #094785ff)":"transparent"}),children:[d.jsx(Ee,{sx:{color:"inherit",minWidth:36},children:s}),d.jsx(Fe,{primary:t})]},e),d.jsx(j,{})]})))]})]})}function Hi(){const e=x(),t=_e(e.breakpoints.up("lg")),[s,a]=Ce.useState(!1),i=()=>{a(!s)},r=Q();return l.useEffect((()=>{t||a(!1)}),[r,t]),d.jsxs(d.Fragment,{children:[d.jsx(b,{children:d.jsx("title",{children:"Jeremiah Dek - Blog"})}),d.jsxs(c,{sx:{display:"flex"},children:[d.jsx(He,{}),!t&&d.jsxs(E,{color:"inherit","aria-label":"toggle drawer",className:"user-sidebar",edge:"start",onClick:i,sx:{position:"fixed",top:200,left:10,zIndex:2001,boxShadow:2,"&:hover":{bgcolor:"grey.100"}},children:[s?d.jsx(Je,{className:"user-sidebar-close"}):d.jsx($e,{className:"user-sidebar-open"})," "]}),d.jsx(Ve,{variant:"temporary",open:s,onClose:i,ModalProps:{keepMounted:!0},className:"mobile-sidebar",sx:{display:{xs:"block",lg:"none"},"& .MuiDrawer-paper":{width:"80%",maxWidth:320,borderRight:"1px solid",borderColor:"divider",top:"44px",height:"90%",display:"flex",flexDirection:"column"},"& .MuiBackdrop-root":{backgroundColor:"rgba(0,0,0,0.5)"}},children:d.jsx(_i,{onLinkClick:i})}),t&&d.jsx(Ve,{variant:"permanent",sx:{display:{xs:"none",lg:"block"},"& .MuiDrawer-paper":{width:260,top:"64px",height:"100vh",position:"sticky",overflowY:"auto",overflowX:"hidden"}},open:!0,children:d.jsx(_i,{})}),d.jsx(c,{component:"main",sx:{flexGrow:1,p:0,ml:{lg:"260px"}},children:d.jsxs(c,{sx:{marginX:3,alignItems:"center",ml:{xs:3,md:-25},mt:{xs:0,md:-5}},children:[d.jsx(Ge,{}),d.jsx(Ye,{})]})})]})]})}const Ji=[{id:1,title:"Transport Booking Platform",description:"A full-stack web app for booking transport with receipts and driver matching.",image:"/jerryDek/admin-page.png",date:"Aug 2025",tech:["React","Node.js","Express","MongoDB","Redis"],github:"https://github.com/j-deku/transBook",demo:"https://transport-booking-demo.vercel.app",caseStudy:{overview:"This platform allows users to book transport and drivers to manage ride requests until max capacity. It includes OTP verification, IP allowlisting, session handling, Redis-based rate limiting, and a role-based admin dashboard.",features:["Secure authentication with OTP & 2FA","Redis-powered rate limiting and CAPTCHA","Driver ride capacity handling with live updates","Admin panel with push notifications (FCM)"],challenges:["Building secure login flow with custom CAPTCHA","Synchronizing driver capacity across users in real-time","Offline-first authentication with Redux bootstrapping"],screenshots:["/jerryDek/dashboard.png","assets/blog/app1-2.png"]}},{id:2,title:"Building Scalable React Apps",description:"Learn best practices for scaling your React projects for production readiness.",image:"/jerryDek/firstProject.png",author:"Jeremiah Deku",date:"Sept 2, 2025",tech:["React","Node.js","Express","MongoDB","Redis"],github:"https://github.com/j-deku/TOLI-TOLI",demo:"https://j-deku.github.io/Khandid_website/",caseStudy:{overview:"This platform allows users to book transport and drivers to manage ride requests until max capacity. It includes OTP verification, IP allowlisting, session handling, Redis-based rate limiting, and a role-based admin dashboard.",features:["Secure authentication with OTP & 2FA","Redis-powered rate limiting and CAPTCHA","Driver ride capacity handling with live updates","Admin panel with push notifications (FCM)"],challenges:["Building secure login flow with custom CAPTCHA","Synchronizing driver capacity across users in real-time","Offline-first authentication with Redux bootstrapping"],screenshots:["/jerryDek/dashboard.png","assets/blog/app1-2.png"]}},{id:2,title:"Node.js Security for Modern Web Apps",description:"Discover advanced security practices with JWT, rate limiting, and Redis integration.",image:"/jerryDek/admin-page.png",author:"Jeremiah Deku",date:"Aug 28, 2025",tech:["React","Node.js","Express","MongoDB","Redis"],github:"https://github.com/j-deku/transBook",demo:"https://transport-booking-demo.vercel.app",caseStudy:{overview:"This platform allows users to book transport and drivers to manage ride requests until max capacity. It includes OTP verification, IP allowlisting, session handling, Redis-based rate limiting, and a role-based admin dashboard.",features:["Secure authentication with OTP & 2FA","Redis-powered rate limiting and CAPTCHA","Driver ride capacity handling with live updates","Admin panel with push notifications (FCM)"],challenges:["Building secure login flow with custom CAPTCHA","Synchronizing driver capacity across users in real-time","Offline-first authentication with Redux bootstrapping"],screenshots:["/jerryDek/dashboard.png","assets/blog/app1-2.png"]}},{id:3,title:"Framer Motion for Stunning Animations",description:"Step-by-step guide to add smooth, professional animations in React apps.",image:"/jerryDek/dashboard.png",author:"Jeremiah Deku",date:"Aug 20, 2025",tech:["React","Node.js","Express","MongoDB","Redis"],github:"https://github.com/j-deku/transBook",demo:"https://transport-booking-demo.vercel.app",caseStudy:{overview:"This platform allows users to book transport and drivers to manage ride requests until max capacity. It includes OTP verification, IP allowlisting, session handling, Redis-based rate limiting, and a role-based admin dashboard.",features:["Secure authentication with OTP & 2FA","Redis-powered rate limiting and CAPTCHA","Driver ride capacity handling with live updates","Admin panel with push notifications (FCM)"],challenges:["Building secure login flow with custom CAPTCHA","Synchronizing driver capacity across users in real-time","Offline-first authentication with Redux bootstrapping"],screenshots:["/jerryDek/dashboard.png","assets/blog/app1-2.png"]}},{id:3,title:"The modern and yet simple web app",description:"MERN stack development for E-Commerce platform optimized with add to cart features",image:"/jerryDek/cart.png",author:"Jeremiah Deku",date:"Aug 20, 2025",tech:["React","Node.js","Express","MongoDB","Redis"],github:"https://github.com/j-deku/transBook",demo:"https://transport-booking-demo.vercel.app",caseStudy:{overview:"This platform allows users to book transport and drivers to manage ride requests until max capacity. It includes OTP verification, IP allowlisting, session handling, Redis-based rate limiting, and a role-based admin dashboard.",features:["Secure authentication with OTP & 2FA","Redis-powered rate limiting and CAPTCHA","Driver ride capacity handling with live updates","Admin panel with push notifications (FCM)"],challenges:["Building secure login flow with custom CAPTCHA","Synchronizing driver capacity across users in real-time","Offline-first authentication with Redux bootstrapping"],screenshots:["/jerryDek/dashboard.png","assets/blog/app1-2.png"]}},{id:3,title:"Creating a modern PWA for mobile view",description:"Step-by-step guide to add smooth, professional animations in mobile apps with responsiveness",image:"/jerryDek/Mobile.png",author:"Jeremiah Deku",date:"Aug 20, 2025",tech:["React","NodeJS","Mongodb","MUIs","CSS3"],github:"https://github.com/j-deku/transBook",demo:"https://transport-booking-demo.vercel.app",caseStudy:{overview:"This platform allows users to book transport and drivers to manage ride requests until max capacity. It includes OTP verification, IP allowlisting, session handling, Redis-based rate limiting, and a role-based admin dashboard.",features:["Secure authentication with OTP & 2FA","Redis-powered rate limiting and CAPTCHA","Driver ride capacity handling with live updates","Admin panel with push notifications (FCM)"],challenges:["Building secure login flow with custom CAPTCHA","Synchronizing driver capacity across users in real-time","Offline-first authentication with Redux bootstrapping"],screenshots:["/jerryDek/dashboard.png","assets/blog/app1-2.png"]}},{id:3,title:"Modern and intuitive designs",description:"Creating design look with responsiveness using media queries and advance react MUIs",image:"/jerryDek/balloon.png",author:"Jeremiah Deku",date:"Aug 20, 2025",tech:["React","Node.js","Express","MongoDB","Redis"],github:"https://github.com/j-deku/transBook",demo:"https://transport-booking-demo.vercel.app",caseStudy:{overview:"This platform allows users to book transport and drivers to manage ride requests until max capacity. It includes OTP verification, IP allowlisting, session handling, Redis-based rate limiting, and a role-based admin dashboard.",features:["Secure authentication with OTP & 2FA","Redis-powered rate limiting and CAPTCHA","Driver ride capacity handling with live updates","Admin panel with push notifications (FCM)"],challenges:["Building secure login flow with custom CAPTCHA","Synchronizing driver capacity across users in real-time","Offline-first authentication with Redux bootstrapping"],screenshots:["/jerryDek/dashboard.png","assets/blog/app1-2.png"]}}],$i=({open:e,handleClose:t,project:s})=>s?d.jsxs(Ke,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,sx:{height:"100vh",mt:4},children:[d.jsxs(Xe,{sx:{bgcolor:"Highlight",color:"white"},children:[s.title," – Case Study"]}),d.jsxs(Qe,{dividers:!0,children:[d.jsx(h,{variant:"h6",gutterBottom:!0,children:"Overview"}),d.jsx(h,{variant:"body1",gutterBottom:!0,children:s.caseStudy.overview}),d.jsx(h,{variant:"h6",sx:{mt:2},children:"Features"}),d.jsx("ul",{children:s.caseStudy.features.map(((e,t)=>d.jsx("li",{children:e},t)))}),d.jsx(h,{variant:"h6",sx:{mt:2},children:"Challenges"}),d.jsx("ul",{children:s.caseStudy.challenges.map(((e,t)=>d.jsx("li",{children:e},t)))}),d.jsx(h,{variant:"h6",sx:{mt:2},children:"Tech Stack"}),d.jsx(N,{direction:"row",spacing:1,sx:{flexWrap:"wrap",mt:1},children:s.tech.map((e=>d.jsx(Ie,{label:e,color:"primary",size:"small"},e)))}),d.jsx(h,{variant:"h6",sx:{mt:2},children:"Screenshots"}),d.jsx(c,{sx:{display:"flex",gap:2,flexWrap:"wrap",mt:1},children:s.caseStudy.screenshots.map(((e,t)=>d.jsx("img",{src:e,alt:`${s.title} screenshot ${t+1}`,style:{width:"48%",borderRadius:8}},t)))})]})]}):null,Vi=()=>{const[e,t]=l.useState(!1),[s,a]=l.useState(null);return d.jsx("div",{style:{textAlign:"center",padding:"40px 0px",marginTop:-100},children:d.jsxs(c,{sx:{py:10,px:{xs:0,md:6}},className:"menuBlog-bg",children:[d.jsx(h,{variant:"h4",align:"center",fontWeight:"bold",gutterBottom:!0,component:ee.h4,initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:"Projects Showcase"}),d.jsx(V,{container:!0,spacing:4,justifyContent:"center",sx:{mt:4},children:Ji.map(((e,s)=>d.jsx(V,{item:!0,xs:12,sm:6,md:4,children:d.jsx(ee.div,{initial:{opacity:0,y:60,rotate:s%2==0?-2:2},whileInView:{opacity:1,y:0,rotate:0},viewport:{once:!1},transition:{duration:.6,delay:.2*s},whileHover:{scale:1.05},children:d.jsxs(R,{className:"stats-card",sx:{borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.08)",height:"100%",m:1,display:"flex",flexDirection:"column"},children:[d.jsx(Ze,{component:"img",height:"200",image:e.image,alt:e.title}),d.jsxs(ue,{sx:{flexGrow:1},children:[d.jsx(h,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:e.title}),d.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),d.jsxs(h,{variant:"caption",color:"text.secondary",children:["By ",e.author," • ",e.date]}),d.jsx(N,{direction:"row",spacing:1,sx:{flexWrap:"wrap",mb:2},children:e.tech.map((e=>d.jsx(Ie,{label:e,size:"small",color:"primary"},e)))}),d.jsxs(N,{direction:"row",spacing:2,children:[d.jsx(m,{size:"small",startIcon:d.jsx(et,{}),href:e.github,target:"_blank",sx:{fontSize:8,fontWeight:700},children:"GitHub"}),d.jsx(m,{size:"small",startIcon:d.jsx(tt,{}),href:e.demo,target:"_blank",sx:{fontSize:8,fontWeight:700},children:"Live Demo"}),d.jsx(m,{size:"small",onClick:()=>(a(e),void t(!0)),variant:"outlined",sx:{fontSize:8,fontWeight:700},children:"View Case Study"})]})]}),d.jsx(c,{sx:{p:1},children:d.jsx(m,{variant:"outlined",fullWidth:!0,sx:{borderRadius:"12px",textTransform:"none",fontWeight:"bold"},children:"Read More"})})]})})},e.id)))}),d.jsx($i,{open:e,handleClose:()=>{t(!1),a(null)},project:s})]})})},Gi=[{id:1,title:"Game Development with JavaScript",issuer:"Sololearn",date:"May 2024",credentialUrl:"https://coursera.org/verify/react-cert",badge:"/jerryDek/certifications/GameDev-cert.jpg"},{id:2,title:"Web Development Certification",issuer:"Sololearn",date:"Jan 2023",credentialUrl:"https://freecodecamp.org/certification/xyz",badge:"/jerryDek/certifications/Web-development.jpg"},{id:3,title:"Backend Development with Node.js",issuer:"Sololearn",date:"Mar 2023",credentialUrl:"https://udemy.com/certificate/abc",badge:"/jerryDek/certifications/JavaScript-Intermediate.jpg"}],Yi=()=>d.jsxs(c,{sx:{p:{xs:0,md:4}},className:"certificate-bg",children:[d.jsx(h,{variant:"h4",gutterBottom:!0,align:"center",fontWeight:"bold",sx:{mb:4},children:"🎓 Certifications"}),d.jsx(N,{direction:"row",spacing:3,flexWrap:"wrap",justifyContent:"center",children:Gi.map(((e,t)=>d.jsx(ee.div,{initial:{opacity:0,y:50,scale:.9},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0},transition:{duration:.6,delay:.2*t},children:d.jsxs(R,{sx:{width:300,borderRadius:3,boxShadow:5,mb:3,textAlign:"center"},children:[d.jsx(Ze,{component:"img",alt:e.title,height:"140",image:e.badge,sx:{objectFit:"contain",p:2}}),d.jsxs(ue,{children:[d.jsx(h,{variant:"h6",fontWeight:"bold",children:e.title}),d.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:1},children:e.issuer}),d.jsx(h,{variant:"caption",display:"block",gutterBottom:!0,children:e.date}),d.jsx(m,{size:"small",href:e.credentialUrl,target:"_blank",startIcon:d.jsx(tt,{}),children:"Verify Credential"})]})]})},e.id)))})]}),Ki=()=>d.jsxs("div",{style:{textAlign:"center",padding:"40px 10px"},children:[d.jsxs(b,{children:[d.jsx("title",{children:"Blog - Jeremiah Deku"}),d.jsx("meta",{name:"description",content:"Explore Jeremiah Deku's blog featuring projects, technologies, reviews, courses, and career insights."}),d.jsx("link",{rel:"canonical",href:"https://jerrydek.com/blog"})]}),d.jsxs(c,{sx:{py:10,px:{xs:0,md:6}},className:"menuBlog-bg",children:[d.jsx(h,{variant:"h4",align:"center",fontWeight:"bold",gutterBottom:!0,component:ee.h4,initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:"Latest Blog Posts"}),d.jsx(V,{container:!0,spacing:4,justifyContent:"center",sx:{mt:4},children:[{id:3,title:"Modern and intuitive designs",excerpt:"Creating design look with responsiveness using media queries and advance react MUIs",image:"balloon.png",author:"Jeremiah Deku",date:"Aug 20, 2025"},{id:2,title:"Node.js Security for Modern Web Apps",excerpt:"Discover advanced security practices with JWT, rate limiting, and Redis integration.",image:"admin-page.png",author:"Jeremiah Deku",date:"Aug 28, 2025"},{id:3,title:"Framer Motion for Stunning Animations",excerpt:"Step-by-step guide to add smooth, professional animations in React apps.",image:"dashboard.png",author:"Jeremiah Deku",date:"Aug 20, 2025"}].map(((e,t)=>d.jsx(V,{item:!0,xs:12,sm:6,md:4,children:d.jsx(ee.div,{initial:{opacity:0,y:60,rotate:t%2==0?-2:2},whileInView:{opacity:1,y:0,rotate:0},viewport:{once:!0},transition:{duration:.6,delay:.2*t},whileHover:{scale:1.05},children:d.jsxs(R,{className:"stats-card",sx:{borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.08)",height:"100%",display:"flex",flexDirection:"column"},children:[d.jsx(Ze,{component:"img",height:"200",image:e.image,alt:e.title}),d.jsxs(ue,{sx:{flexGrow:1},children:[d.jsx(h,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:e.title}),d.jsx(h,{variant:"body2",color:"lightgray !important",sx:{mb:2},children:e.excerpt}),d.jsxs(h,{variant:"caption",color:"text.secondary",children:["By ",e.author," • ",e.date]})]}),d.jsx(c,{sx:{p:2},children:d.jsx(m,{variant:"outlined",fullWidth:!0,sx:{borderRadius:"12px",textTransform:"none",fontWeight:"bold"},children:"Read More"})})]})})},e.id)))})]}),d.jsx(gi,{})]}),Xi=[{name:"React",icon:d.jsx(fe,{size:40,color:"#61DBFB"})},{name:"Node.js",icon:d.jsx(be,{size:40,color:"#3C873A"})},{name:"JavaScript",icon:d.jsx(ye,{size:40,color:"#F7DF1E"})},{name:"MongoDB",icon:d.jsx(ve,{size:40,color:"#4DB33D"})},{name:"MySQL",icon:d.jsx(st,{size:40,color:"#1179f0ff"})},{name:"CSS3",icon:d.jsx(we,{size:40,color:"#264de4"})},{name:"Databases",icon:d.jsx(ke,{size:40,color:"#ff9900"})},{name:"Express.js",icon:d.jsx(be,{size:40,color:"#000000"})},{name:"HTML5",icon:d.jsx(we,{size:40,color:"#e34c26"})},{name:"RESTful APIs",icon:d.jsx(ke,{size:40,color:"#ff6600"})},{name:"Git & GitHub",icon:d.jsx(at,{size:40,color:"#f34f29"})},{name:"GitHub",icon:d.jsx(et,{size:40,color:"#141414ff"})},{name:"TypeScript",icon:d.jsx(ye,{size:40,color:"#3178c6"})},{name:"Redux",icon:d.jsx(ye,{size:40,color:"#764abc"})},{name:"Tailwind CSS",icon:d.jsx(we,{size:40,color:"#38bdf8"})},{name:"Docker",icon:d.jsx(ke,{size:40,color:"#2496ed"})},{name:"AWS",icon:d.jsx(ke,{size:40,color:"#ff9900"})},{name:"Webpack",icon:d.jsx(ye,{size:40,color:"#8ed6fb"})},{name:"Babel",icon:d.jsx(ye,{size:40,color:"#f9dc3e"})},{name:"firebase",icon:d.jsx(it,{size:40,color:"#ff310dff"})},{name:"Redis",icon:d.jsx(rt,{size:40,color:"#17c507d0"})}],Qi=[{name:"Render",icon:d.jsx(nt,{size:40,color:"black"})},{name:"Google Cloud",icon:d.jsx(ot,{size:40,color:"#868685d0"})},{name:"Cloudinary",icon:d.jsx(lt,{size:40,color:"#2496ed"})},{name:"Cloudflare",icon:d.jsx(dt,{size:40,color:"#b85402ff"})},{name:"firebase hosting",icon:d.jsx(it,{size:40,color:"#ff310dff"})},{name:"GitHub",icon:d.jsx(et,{size:40,color:"#141414ff"})},{name:"AWS",icon:d.jsx(ke,{size:40,color:"#ff9900"})},{name:"OVHcloud",icon:d.jsx(ct,{size:40,color:"#2879b8ff"})}],Zi={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2}}},er={hidden:{opacity:0,y:50},show:{opacity:1,y:0,transition:{duration:2,type:"spring"}}},tr=()=>d.jsxs(ee.div,{initial:"hidden",whileInView:"show",variants:Zi,viewport:{once:!1},className:"menuBlog-bg",style:{padding:"60px 10px"},children:[d.jsx(h,{variant:"h4",align:"center",gutterBottom:!0,sx:{fontWeight:"bold",mb:4},children:"Technologies I Used"}),d.jsx(V,{container:!0,spacing:3,justifyContent:"center",children:Xi.map(((e,t)=>d.jsx(V,{item:!0,xs:12,sm:6,md:4,children:d.jsx(ee.div,{variants:er,whileHover:{scale:1.05,rotate:2},children:d.jsx(R,{className:"stats-card",sx:{textAlign:"center",padding:"20px",borderRadius:"16px",boxShadow:"0 8px 16px rgba(0,0,0,0.05)","&:hover":{transform:"scale(1.05)",transition:"2s"}},children:d.jsxs(ue,{children:[d.jsx("div",{style:{marginBottom:"10px"},children:e.icon}),d.jsx(h,{variant:"h6",sx:{fontWeight:"bold"},children:e.name})]})})})},t)))}),d.jsx("hr",{style:{marginTop:30}}),d.jsx(h,{variant:"h7",align:"center",gutterBottom:!0,sx:{fontWeight:"bold",mb:4},children:d.jsx("h1",{style:{marginTop:50},children:"Hostings Servers I Used"})}),d.jsx(V,{container:!0,spacing:3,justifyContent:"center",children:Qi.map(((e,t)=>d.jsx(V,{item:!0,xs:12,sm:6,md:4,children:d.jsx(ee.div,{variants:er,whileHover:{scale:1.1,rotate:2},children:d.jsx(R,{sx:{textAlign:"center",padding:"20px",borderRadius:"16px",boxShadow:"0 8px 16px rgba(0,0,0,0.05)","&:hover":{transform:"scale(1.05)",transition:"2s"}},children:d.jsxs(ue,{children:[d.jsx("div",{style:{marginBottom:"10px"},children:e.icon}),d.jsx(h,{variant:"h6",sx:{fontWeight:"bold"},children:e.name})]})})})},t)))})]}),sr=[{id:1,name:"Sarah Johnson",role:"Product Manager at TechCorp",feedback:"Jeremiah is a fantastic developer! He delivered our web app ahead of schedule with clean, scalable code.",rating:5,avatar:"assets/reviews/sarah.jpg"},{id:2,name:"Michael Kwame",role:"Senior Engineer at DevWorks",feedback:"His problem-solving skills are excellent. I’d happily work with him again on any project.",rating:4,avatar:"assets/reviews/michael.jpg"},{id:3,name:"Emily Carter",role:"Freelance Designer",feedback:"Jeremiah collaborates very well with designers and makes sure the UX feels intuitive.",rating:5,avatar:"assets/reviews/emily.jpg"},{id:4,name:"Manuel",role:"GCTU Student",feedback:"Jeremiah collaborates incredibly well with designers and makes sure the UX feels intuitive.",rating:5,avatar:"assets/reviews/emily.jpg"}],ar=()=>d.jsxs(c,{sx:{p:{xs:0,sm:4}},className:"menuBlog-bg",children:[d.jsx(h,{variant:"h4",gutterBottom:!0,align:"center",fontWeight:"bold",sx:{mb:4},children:"💬 Reviews"}),d.jsx(N,{direction:"row",spacing:1,flexWrap:"wrap",justifyContent:"center",children:sr.map(((e,t)=>d.jsx(ee.div,{initial:{opacity:0,y:50,scale:.9},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0},transition:{duration:.6,delay:.2*t},children:d.jsxs(R,{className:"stats-card",sx:{width:315,borderRadius:3,boxShadow:5,mb:3,textAlign:"center",p:2},children:[d.jsx(ht,{src:e.avatar,alt:e.name,sx:{width:70,height:70,mx:"auto",mb:2,border:"2px solid #1976d2"}}),d.jsxs(ue,{children:[d.jsx(h,{variant:"h6",fontWeight:"bold",children:e.name}),d.jsx(h,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:e.role}),d.jsx(mt,{value:e.rating,readOnly:!0,precision:.5,sx:{mb:1}}),d.jsxs(h,{variant:"body1",sx:{fontStyle:"italic",color:"lightgray !important"},children:['"',e.feedback,'"']})]})]})},e.id)))})]}),ir=[{name:"VS Code",icon:d.jsx(ut,{size:40,color:"#007ACC"}),category:"Development"},{name:"GitHub",icon:d.jsx(xt,{size:40}),category:"Collaboration"},{name:"Postman",icon:d.jsx(pt,{size:40,color:"#FF6C37"}),category:"Development"},{name:"Figma",icon:d.jsx(gt,{size:40,color:"#F24E1E"}),category:"Design"},{name:"Docker",icon:d.jsx(jt,{size:40,color:"#2496ED"}),category:"Deployment"},{name:"Render",icon:d.jsx(nt,{size:40,color:"black"}),category:"Deployment"},{name:"Photopea",icon:d.jsx(ft,{size:40,color:"#c83aecff"}),category:"Development"},{name:"Photoshop",icon:d.jsx(bt,{size:40,color:"#0569acff"}),category:"Development"},{name:"Lightroom",icon:d.jsx(yt,{size:40,color:"#31a8ff"}),category:"Development"},{name:"Firebase",icon:d.jsx(vt,{size:40,color:"#FFCA28"}),category:"Deployment"},{name:"Redis",icon:d.jsx(wt,{size:40,color:"#D82C20"}),category:"Deployment"},{name:"Google Cloud",icon:d.jsx(kt,{size:40,color:"#f36817ff"}),category:"Deployment"},{name:"Mongodb",icon:d.jsx(ve,{size:40,color:"#10d61aff"}),category:"Deployment"}],rr=()=>d.jsxs(c,{sx:{p:{xs:0,sm:4}},children:[d.jsx(h,{variant:"h4",align:"center",fontWeight:"bold",gutterBottom:!0,sx:{mb:5},children:"🛠 Tools I Work With"}),d.jsx(V,{container:!0,spacing:3,justifyContent:"center",children:ir.map(((e,t)=>d.jsx(V,{item:!0,xs:12,sm:6,md:4,lg:3,children:d.jsx(ee.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1*t},whileHover:{scale:1.05,rotate:2},children:d.jsx(R,{sx:{textAlign:"center",p:2,borderRadius:3,boxShadow:4},className:"stats-card",children:d.jsxs(ue,{children:[d.jsx(c,{sx:{mb:2},children:e.icon}),d.jsx(h,{variant:"h6",children:e.name}),d.jsx(h,{variant:"body2",color:"text.secondary",children:e.category})]})})})},e.name)))})]}),nr=[{title:"React - The Complete Guide",platform:"React.dev",instructor:"Maximilian Schwarzmüller",image:"https://img.icons8.com/?size=100&id=wPohyHO_qO1a&format=png&color=000000",tags:["React","Hooks","Redux"],year:2024},{title:"Node.js and Express Bootcamp",platform:"Youtube",instructor:"CS Dojo",image:"https://img.icons8.com/?size=100&id=108784&format=png&color=000000",tags:["Node.js","Express","MongoDB"],year:2023},{title:"Modern Web Development with MUI",platform:"StackFlow",instructor:"Cory House",image:"https://img.icons8.com/?size=100&id=9vlfB9hjA1lX&format=png&color=000000",tags:["MUI","UI/UX","Responsive Design"],year:2025},{title:"Modern Javascript from the Beginning",platform:"Sololearn",instructor:"Steve Griffith",image:"https://img.icons8.com/?size=100&id=PXTY4q2Sq2lG&format=png&color=000000",tags:["JavaScript","ES6+","DOM"],year:2025},{title:"Modern Web Development with CSS",platform:"Sololearn",instructor:"Steve Griffith",image:"https://img.icons8.com/?size=100&id=7gdY5qNXaKC0&format=png&color=000000",tags:["UI/UX","Responsive Design"],year:2025},{title:"Modern Web Development with MUI",platform:"Pluralsight",instructor:"Cory House",image:"https://img.icons8.com/?size=100&id=9vlfB9hjA1lX&format=png&color=000000",tags:["MUI","UI/UX","Responsive Design"],year:2025}],or=()=>d.jsxs(c,{sx:{p:{xs:0,sm:4}},children:[d.jsx(h,{variant:"h3",align:"center",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main",mb:4},children:"Courses"}),d.jsx(V,{container:!0,spacing:4,children:nr.map(((e,t)=>d.jsx(V,{item:!0,xs:12,sm:6,md:4,children:d.jsx(ee.div,{whileHover:{scale:1.05},transition:{duration:.3},children:d.jsxs(R,{elevation:4,sx:{borderRadius:3,overflow:"hidden",height:"100%"},children:[d.jsx(Ze,{component:"img",height:"160",image:e.image,alt:e.title}),d.jsxs(ue,{children:[d.jsx(h,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:e.title}),d.jsxs(h,{variant:"body2",color:"text.secondary",children:[e.platform," · ",e.year]}),d.jsxs(h,{variant:"subtitle2",sx:{mt:1},children:["Instructor: ",e.instructor]}),d.jsx(j,{sx:{my:2}}),d.jsx(c,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:e.tags.map(((e,t)=>d.jsx(Ie,{label:e,size:"small"},t)))})]})]})})},t)))})]}),lr=[{title:"Ace Your Web Developer Interview",channel:"Code with Bubb",videoUrl:"https://www.youtube.com/embed/cTatCDnvGBY?si=rV3auCFlUJtpF9G3",tags:["Interviews","Career Growth"]},{title:"How to Build a Strong Developer Portfolio",channel:"Fireship",videoUrl:"https://www.youtube.com/embed/playlist?list=PLroLjS4HDi0C-v2AwTHT7bd-3QaIhM_xZ&si=zSxJuwVnqjua6-cP",tags:["Portfolio","Projects"]},{title:"Top 5 Resume Mistakes to Avoid",channel:"CS Dojo",videoUrl:"https://www.youtube.com/embed/HVsySz-h9r4",tags:["Resume","Job Hunt"]},{title:"Landing Your First Dev Job with No Experience",channel:"Clever Programmer",videoUrl:"https://www.youtube.com/embed/y1fB7ztc1dQ?si=9TgS_ht9-nLVrBvq",tags:["Entry-Level","Advice"]}],dr=[...new Set(lr.flatMap((e=>e.tags)))],cr=()=>{const[e,t]=l.useState(""),[s,a]=l.useState(""),i=lr.filter((t=>{const a=t.title.toLowerCase().includes(e.toLowerCase())||t.channel.toLowerCase().includes(e.toLowerCase()),i=!s||t.tags.includes(s);return a&&i}));return d.jsxs(c,{sx:{p:{xs:0,sm:4}},children:[d.jsx(h,{variant:"h3",align:"center",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main",mb:3},children:"Get Job Faster"}),d.jsx(h,{className:"getjob-subtitle",align:"center",variant:"subtitle1",color:"text.secondary",sx:{mb:4},children:"Curated resources to help you land your next developer role — interview prep, portfolio tips, resume hacks, and more."}),d.jsxs(N,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:5,justifyContent:"center",alignItems:"center"},children:[d.jsx(T,{className:"getjob-subtitle",label:"Search by title or channel",variant:"outlined",value:e,onChange:e=>t(e.target.value),sx:{width:{xs:"100%",sm:"350px"}}}),d.jsx(N,{direction:"row",spacing:1,flexWrap:"wrap",children:dr.map((e=>d.jsx(Ie,{className:"getjob-subtitle",label:e,clickable:!0,color:s===e?"primary":"default",onClick:()=>a(s===e?"":e)},e)))})]}),d.jsx(V,{container:!0,spacing:4,children:i.length>0?i.map(((e,t)=>d.jsx(V,{item:!0,xs:12,md:6,children:d.jsx(ee.div,{whileHover:{scale:1.03},children:d.jsxs(R,{elevation:4,sx:{borderRadius:3,overflow:"hidden"},children:[d.jsx(Ze,{component:"iframe",src:e.videoUrl,title:e.title,height:"250",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),d.jsxs(ue,{children:[d.jsx(h,{variant:"h6",sx:{fontWeight:"bold"},children:e.title}),d.jsx(h,{variant:"body2",color:"text.secondary",children:e.channel}),d.jsx(j,{sx:{my:2}}),d.jsx(c,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:e.tags.map(((e,t)=>d.jsx(Ie,{label:e,size:"small"},t)))})]})]})})},t))):d.jsx(h,{variant:"h6",align:"center",color:"text.secondary",sx:{width:"100%",mt:5},children:"No resources found. Try a different search or tag."})})]})},hr=[{name:"E-commerce UI Kit",type:"Design",preview:"/jerryDek/cart.png",description:"Figma design assets for the E-commerce store project.",downloadUrl:"downloads/ui-kit.fig",tags:["UI/UX","Design"]},{name:"Booking Logo Pack",type:"Branding",preview:"/jerryDek/push_notification_icon.png",description:"Logo pack (PNG, SVG, AI) for Transport Booking app.",downloadUrl:"downloads/pharmacy-logo.zip",tags:["Branding","Logos"]},{name:"Booking API Docs",type:"Documentation",preview:"/jerryDek/api-doc.png",description:"API documentation for the transport booking backend.",downloadUrl:"downloads/api-docs.pdf",tags:["Docs","Backend"]}],mr=[...new Set(hr.flatMap((e=>e.tags)))],ur=()=>{const[e,t]=l.useState(""),[s,a]=l.useState(""),i=hr.filter((t=>{const a=t.name.toLowerCase().includes(e.toLowerCase()),i=!s||t.tags.includes(s);return a&&i}));return d.jsxs(c,{sx:{p:{xs:0,sm:4}},className:"menuBlog-bg",children:[d.jsx(h,{variant:"h3",align:"center",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main",mb:3},children:"Project Assets 📦"}),d.jsx(h,{align:"center",variant:"subtitle1",color:"gray",sx:{mb:4},children:"Browse and download assets linked to my projects — designs, docs, logos, and more."}),d.jsxs(N,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:5,justifyContent:"center",alignItems:"center"},children:[d.jsx(T,{className:"project-assets-input",label:"Search assets",variant:"outlined",value:e,onChange:e=>t(e.target.value),sx:{width:{xs:"90%",sm:"300px"}},inputProps:{style:{borderRadius:30,outlineColor:"gray"}}}),d.jsx(N,{direction:"row",spacing:1,flexWrap:"wrap",children:mr.map((e=>d.jsx(Ie,{className:"project-assets-chip",label:e,clickable:!0,color:s===e?"primary":"default",onClick:()=>a(s===e?"":e)},e)))})]}),d.jsx(V,{container:!0,spacing:4,children:i.length>0?i.map(((e,t)=>d.jsx(V,{item:!0,xs:12,md:4,children:d.jsx(ee.div,{whileHover:{scale:1.03},children:d.jsxs(R,{className:"stats-card",elevation:4,sx:{borderRadius:3,overflow:"hidden",height:"100%"},children:[d.jsx(Ze,{component:"img",src:e.preview,alt:e.name,height:"180",sx:{objectFit:"cover"}}),d.jsxs(ue,{children:[d.jsx(h,{variant:"h6",sx:{fontWeight:"bold"},children:e.name}),d.jsx(h,{variant:"caption",color:"text.secondary",children:e.type}),d.jsx(j,{sx:{my:2}}),d.jsx(h,{variant:"caption",color:"text.secondary",sx:{mb:2},children:e.description}),d.jsxs(c,{sx:{display:"flex",gap:1},children:[d.jsx(m,{variant:"contained",startIcon:d.jsx(St,{}),href:e.downloadUrl,children:"Download"}),d.jsx(m,{variant:"outlined",startIcon:d.jsx(Ct,{}),href:e.downloadUrl,target:"_blank",children:"Preview"})]})]})]})})},t))):d.jsx(h,{variant:"h6",align:"center",color:"text.secondary",sx:{width:"100%",mt:5},children:"No assets found. Try a different search or tag."})})]})},xr=()=>d.jsx(Rt,{children:d.jsxs(It,{element:d.jsx(Hi,{}),children:[d.jsx(It,{index:!0,element:d.jsx(Ki,{})}),d.jsx(It,{path:"projects",element:d.jsx(Vi,{})}),d.jsx(It,{path:"certificates",element:d.jsx(Yi,{})}),d.jsx(It,{path:"code",element:d.jsx("h2",{children:"Code Snippets Coming Soon..."})}),d.jsx(It,{path:"technologies",element:d.jsx(tr,{})}),d.jsx(It,{path:"tools",element:d.jsx(rr,{})}),d.jsx(It,{path:"tutorials",element:d.jsx("h2",{children:"Tutorials Coming Soon..."})}),d.jsx(It,{path:"reviews",element:d.jsx(ar,{})}),d.jsx(It,{path:"courses",element:d.jsx(or,{})}),d.jsx(It,{path:"getJob",element:d.jsx(cr,{})}),d.jsx(It,{path:"project-assets",element:d.jsx(ur,{})})]})}),pr=()=>d.jsxs("div",{children:[d.jsxs(b,{children:[d.jsx("title",{children:"Contact Us - Jeremiah Deku"}),d.jsx("meta",{name:"description",content:"Get in touch with Jeremiah Deku for inquiries, collaborations, or support. Reach out via email, phone, or social media."}),d.jsx("link",{rel:"canonical",href:"https://jerrydek.com/contact"})]}),d.jsx(Ri,{})]}),gr=["/api/user/logout","/api/user/refresh-token","/api/user/login"],jr=e=>"INVALID_SESSION"===e||"JWT_INVALID"===e||"REFRESH_INVALID"===e,fr=i.create({baseURL:"http://localhost:3000",withCredentials:!0,headers:{"Content-Type":"application/json"}});let br=!1,yr=[];function vr(e){yr.forEach((t=>t(e))),yr=[]}let wr=navigator.onLine,kr=!1;window.addEventListener("online",(()=>{wr=!0,kr=!1})),window.addEventListener("offline",(()=>{wr=!1})),fr.interceptors.request.use((e=>(e.metadata={startTime:Date.now()},wr||e.skipOfflineCheck?e:Promise.reject(new Error("No internet connection")))),(e=>Promise.reject(e))),fr.interceptors.response.use((e=>{const t=Date.now(),s=t-(e.config.metadata?.startTime||t);return s>3e3&&console.warn(`Slow API response: ${e.config.url} took ${s}ms`),e}),(async e=>{const t=e.config||{},s=e.response,a=s?.status,i=s?.data?.code,r=t?.url||"";if(!s){const s=t._networkRetries||0;if(s<3&&!t.skipRetry){t._networkRetries=s+1;const e=Math.min(1e3*Math.pow(2,s),5e3);return await(n=e,new Promise((e=>setTimeout(e,n)))),fr(t)}return kr||(kr=!0,setTimeout((()=>{kr=!1}),5e3)),Promise.reject(e)}var n;if(((e="")=>gr.some((t=>e.endsWith(t))))(r))return Promise.reject(e);if(((e,t)=>401===e&&(!t||"ACCESS_TOKEN_EXPIRED"===t||"ACCESS_TOKEN_INVALID"===t||"UNAUTHENTICATED"===t))(a,i)&&!t._retry){if(t._retry=!0,br)return new Promise(((s,a)=>{var i;i=i=>{i?s(fr(t)):a({...e,refreshFailed:!0})},yr.push(i)}));br=!0;try{return await fr.post("/api/user/refresh-token",{},{withCredentials:!0}),vr(!0),br=!1,fr(t)}catch(o){vr(!1),br=!1;const t=o?.response?.status,s=o?.response?.data?.code,a=(401===t||403===t)&&jr(s);return Promise.reject({...e,refreshFailed:a})}}return jr(i)?Promise.reject({...e,refreshFailed:!0}):Promise.reject(e)}));const Sr="unknown",Cr="authenticated",Rr="unauthenticated",Ir={user:null,lastGoodUser:null,userId:localStorage.getItem("userId")||null,userRoles:[],status:"idle",error:null,isAuthenticated:!!localStorage.getItem("userId"),authStatus:localStorage.getItem("userId")?Cr:Sr,needsReauth:!1,lastFetchTime:null,isOnline:navigator.onLine},Ar=n("user/fetchUserInfo",(async(e,t)=>{try{const{data:e}=await fr.get("/api/user/me",{withCredentials:!0});return e}catch(s){const e=s?.response?.status;return s.response?401===e||403===e?t.rejectWithValue({message:"Authentication failed",type:"AUTH_ERROR",maintainAuth:!1,refreshFailed:!0===s.refreshFailed}):t.rejectWithValue({message:s.response?.data?.message||s.message,type:"SERVER_ERROR",maintainAuth:!0}):t.rejectWithValue({message:s.message||"Network error",type:"NETWORK_ERROR",maintainAuth:!0})}})),Nr=n("user/logoutUser",(async(e,t)=>{try{await fr.post("/api/user/logout",{},{withCredentials:!0})}catch(s){console.warn("Logout request failed, but clearing local state anyway:",s?.message)}finally{localStorage.removeItem("userId")}return!0})),Tr=n("user/recoverSession",(async(e,t)=>{if(!localStorage.getItem("userId"))return t.rejectWithValue({message:"No stored session"});try{const{data:e}=await fr.get("/api/user/me",{withCredentials:!0});return e}catch(s){const e=s?.response?.status;return 401===e||403===e?t.rejectWithValue({message:"Unauthorized",code:e,refreshFailed:!0===s.refreshFailed}):t.rejectWithValue({message:s.response?.data?.message||s.message,code:e,refreshFailed:!1})}})),Dr=o({name:"user",initialState:Ir,reducers:{hardLogout:e=>{e.user=null,e.lastGoodUser=null,e.userId=null,e.userRoles=[],e.status="idle",e.error=null,e.isAuthenticated=!1,e.authStatus=Rr,e.needsReauth=!1,e.lastFetchTime=null,localStorage.removeItem("userId")},clearUser:e=>{e.user=null,e.userId=null,e.userRoles=[],e.isAuthenticated=!1,e.authStatus=Rr,e.needsReauth=!1,localStorage.removeItem("userId")},softAuthError:(e,t)=>{e.needsReauth=!0,e.error=t.payload?.message||"Authentication error",e.authStatus=Cr},setOnlineStatus:(e,t)=>{e.isOnline=t.payload},restoreUserState:e=>{const t=localStorage.getItem("userId");if(t){e.userId=t,e.isAuthenticated=!0,e.authStatus=Cr;try{const t=JSON.parse(localStorage.getItem("persist:root"));if(t?.user){const s=JSON.parse(t.user);Array.isArray(s.roles)&&(e.userRoles=s.roles.map((e=>e.toLowerCase())))}}catch(s){console.warn("Failed to hydrate user roles from storage:",s)}0===e.userRoles.length&&e.lastGoodUser?.roles&&(e.userRoles=e.lastGoodUser.roles.map((e=>e.toLowerCase())))}},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Ar.pending,(e=>{e.status="loading",e.error=null})).addCase(Ar.fulfilled,((e,{payload:t})=>{const s=t.user??t;e.user=s,e.lastGoodUser=s,e.userId=s.id||s._id||null,e.userRoles=s.roles||[],e.status="succeeded",e.isAuthenticated=Boolean(e.userId),e.authStatus=e.isAuthenticated?Cr:Sr,e.needsReauth=!1,e.lastFetchTime=Date.now(),e.userId&&localStorage.setItem("userId",e.userId)})).addCase(Ar.rejected,((e,t)=>{const s=t.payload||{};e.status="failed",e.error=s.message||"Failed to fetch user info",e.lastFetchTime=Date.now();const{type:a,maintainAuth:i,refreshFailed:r}=s;"AUTH_ERROR"===a&&r?(e.user=null,e.lastGoodUser=null,e.userId=null,e.userRoles=[],e.isAuthenticated=!1,e.authStatus=Rr,e.needsReauth=!0,localStorage.removeItem("userId")):(e.needsReauth=!1,e.authStatus=e.isAuthenticated?Cr:e.authStatus)})).addCase(Tr.pending,(e=>{e.authStatus=e.isAuthenticated?Cr:Sr,e.status="loading"})).addCase(Tr.fulfilled,((e,{payload:t})=>{const s=t.user??t;e.user=s,e.lastGoodUser=s,e.userId=s.id||s._id||null,e.userRoles=s.roles||[],e.status="succeeded",e.error=null,e.isAuthenticated=Boolean(e.userId),e.authStatus=e.isAuthenticated?Cr:Sr,e.needsReauth=!1,e.lastFetchTime=Date.now()})).addCase(Tr.rejected,((e,t)=>{const{type:s,refreshFailed:a,code:i}=t.payload||{};e.status="failed",e.error=t.payload?.message,"AUTH_ERROR"===s&&a?(e.user=null,e.lastGoodUser=null,e.userId=null,e.userRoles=[],e.isAuthenticated=!1,e.authStatus=Rr,e.needsReauth=!0,localStorage.removeItem("userId")):(e.authStatus=e.isAuthenticated?Cr:e.authStatus,e.needsReauth=!1)})).addCase(Nr.fulfilled,(e=>{e.user=null,e.lastGoodUser=null,e.userId=null,e.userRoles=[],e.status="idle",e.error=null,e.isAuthenticated=!1,e.authStatus=Rr,e.lastFetchTime=null,e.needsReauth=!1}))}}),{hardLogout:Pr,clearUser:Er,softAuthError:Fr,setOnlineStatus:zr,restoreUserState:Wr,clearError:Lr}=Dr.actions,Br=e=>e.user.user||e.user.lastGoodUser,Or=e=>e.user.userId,Mr=e=>e.user.userRoles,qr=e=>e.user.status,Ur=e=>e.user.error,_r=e=>e.user.isAuthenticated,Hr=e=>e.user.isOnline,Jr=e=>e.user.authStatus,$r=e=>{const t=e.user.lastFetchTime,s=Date.now();return!t||s-t>9e5},Vr=Dr.reducer,Gr=o({name:"cart",initialState:{cartItems:[]},reducers:{setCartItems:(e,t)=>{e.cartItems=t.payload},addToCart:(e,t)=>{e.cartItems.push({...t.payload,requestedSeats:1})},updateRequestedSeats:(e,t)=>{const{rideId:s,seats:a}=t.payload,i=e.cartItems.find((e=>e._id===s));i&&(i.requestedSeats=a)},removeFromCart:(e,t)=>{e.cartItems=e.cartItems.filter((e=>e._id!==t.payload))},clearCart:e=>{e.cartItems=[]}}}),{setCartItems:Yr,addToCart:Kr,updateRequestedSeats:Xr,removeFromCart:Qr,clearCart:Zr}=Gr.actions,en=e=>e.cart.cartItems,tn=Gr.reducer,sn=()=>{const e=w(_r),t=w(en),[s,a]=l.useState([]),[i,r]=l.useState(!1),[n,o]=l.useState({firstName:"",lastName:"",email:"",street:"",city:"",state:"",zipCode:"",country:"",phone:""});l.useEffect((()=>{t.length?a(t):a(JSON.parse(localStorage.getItem("selectedRides"))||[])}),[t]);const c=e=>{const{name:t,value:s}=e.target;o((e=>({...e,[t]:s})))},u=s.reduce(((e,t)=>e+Number(t.price)*Number(t.requestedSeats||1)),0),x=u?2:0,p=u+x,g=s[0]?.currency||"USD";return d.jsxs(d.Fragment,{children:[d.jsx(b,{children:d.jsx("title",{children:"Place Booking - TOLI‑TOLI"})}),d.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!e)return void B.error("You must be logged in to place your booking");if(!s.length)return void B.error("Your cart is empty");const a=s.map((e=>({_id:e._id,passengers:e.requestedSeats||1})));try{r(!0);const e=await fr.post("/api/booking/place",{address:n,rides:a,amount:p,currency:g,email:n.email},{withCredentials:!0});e.data.success&&e.data.authorization_url?window.location.replace(e.data.authorization_url):B.error(e.data.message||"Error placing booking")}catch(i){console.error(i.response?.data||i),B.error(i.response?.data?.message||"Booking failed")}finally{r(!1)}},className:"placeOrder",children:[d.jsxs("div",{className:"placeOrder-left",children:[d.jsx("p",{className:"title",children:"Booking Information"}),d.jsxs("div",{className:"multi-fields",children:[d.jsx("input",{type:"text",name:"firstName",onChange:c,value:n.firstName,placeholder:"First Name",required:!0}),d.jsx("input",{type:"text",name:"lastName",onChange:c,value:n.lastName,placeholder:"Last Name",required:!0})]}),d.jsx("input",{type:"email",name:"email",onChange:c,value:n.email,placeholder:"Email Address",required:!0}),d.jsx("input",{type:"text",name:"street",onChange:c,value:n.street,placeholder:"Street Name",required:!0}),d.jsxs("div",{className:"multi-fields",children:[d.jsx("input",{type:"text",name:"city",onChange:c,value:n.city,placeholder:"City",required:!0}),d.jsx("input",{type:"text",name:"state",onChange:c,value:n.state,placeholder:"State",required:!0})]}),d.jsxs("div",{className:"multi-fields",children:[d.jsx("input",{type:"text",name:"zipCode",onChange:c,value:n.zipCode,placeholder:"Zip Code",required:!0}),d.jsx("input",{type:"text",name:"country",onChange:c,value:n.country,placeholder:"Country",required:!0})]}),d.jsx("input",{type:"tel",name:"phone",onChange:c,value:n.phone,placeholder:"Phone +233...",required:!0})]}),d.jsx("div",{className:"placeOrder-right",children:d.jsxs("div",{className:"cart-total",children:[d.jsx("h2",{children:"Cart Totals"}),d.jsxs("div",{className:"cart-total-details",children:[d.jsx("p",{children:"SubTotal"}),d.jsxs("p",{children:[g," ",u.toFixed(2)]})]}),d.jsx("hr",{}),d.jsxs("div",{className:"cart-total-details",children:[d.jsx("p",{children:"Service Fee"}),d.jsxs("p",{children:[g," ",x.toFixed(2)]})]}),d.jsx("hr",{}),d.jsxs("div",{className:"cart-total-details",children:[d.jsx("p",{children:"Total"}),d.jsxs("p",{children:[g," ",p.toFixed(2)]})]}),d.jsx(m,{type:"submit",disabled:0===s.length||i,variant:"contained",color:"primary",fullWidth:!0,children:i?d.jsxs(h,{children:["Placing Booking...",d.jsx(C,{size:20,title:"Placing Booking..."})]}):"PROCEED TO PAYMENT"})]})})]})]})},an=()=>{const[e]=G(),t=e.get("success"),s=e.get("bookingId"),a=v();return l.useEffect((()=>{(async()=>{try{(await fr.post("/api/booking/verify",{success:t,bookingId:s},{withCredentials:!0})).data.success?a("/myBookings"):a("/")}catch(e){a("/"),console.error("Payment verification failed:",e)}})()}),[]),d.jsxs(d.Fragment,{children:[d.jsx(b,{children:d.jsx("title",{children:"Verifying ..."})}),d.jsx("div",{className:"verify",children:d.jsx("div",{className:"spinner"})})]})},rn=()=>d.jsxs("div",{className:"newsFeed",children:[d.jsx("h1",{children:"Our News Feed"}),d.jsxs("p",{children:["Brightening your celebrations with stunning balloon and floral designs. Explore our creations and make every moment special.",d.jsx("div",{className:"image-container",children:d.jsx("img",{src:"setting.png",title:"Our current update news \r\nwill be uploaded here 👈.\r\nStay tune for more upcoming\r\n           UPDATE  ⚠",alt:""})})]})]});function nn({dotColor:e="#007bff",dotSize:t=12,dotSpacing:s=8,animationDuration:a=1,ariaLabel:i="Loading"}){const r={backgroundColor:e,width:`${t}px`,height:`${t}px`,margin:`0 ${s/2}px`};return d.jsxs("div",{className:"loading-dots",role:"status","aria-label":i,children:[d.jsx("span",{className:"dot",style:r}),d.jsx("span",{className:"dot",style:r}),d.jsx("span",{className:"dot",style:r}),d.jsx("style",{children:`\n          /* Override animation duration via inline CSS variable */\n          .loading-dots .dot {\n            animation-duration: ${a}s;\n          }\n        `})]})}const on=()=>d.jsxs("div",{className:"loadingPage",children:[d.jsx("img",{src:"JD-logo.png",alt:"Logo"}),d.jsx("div",{className:"loading-text",children:d.jsx(nn,{dotColor:"#1d4ed8",dotSize:14,dotSpacing:10,animationDuration:1.2,ariaLabel:"Content is loading"})}),d.jsx("div",{className:"footer-details",children:d.jsxs("p",{children:[" © Inc. J-Deku ",d.jsx("br",{}),d.jsxs(te,{to:"https://github.com/j-deku/jerryDek.github.io",target:"_blank",children:[d.jsx("img",{src:"to_do_icon2.png",alt:""})," "]})]})})]}),ln=()=>{const e=w(Br);return d.jsx("div",{className:"profile-details",children:d.jsxs("table",{cellPadding:5,cellSpacing:10,border:1,children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Name"}),d.jsx("th",{children:"Email"}),d.jsx("th",{children:"Avatar"}),d.jsx("th",{children:"Role(s)"})]})}),d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{children:e?.name}),d.jsx("td",{children:e?.email}),e?.avatar?d.jsx("td",{children:d.jsx("img",{src:e.avatar,alt:"avatar",style:{width:50,borderRadius:"50%"}})}):d.jsx("td",{children:"No Avatar"})]}),d.jsx("tr",{children:e.roles})]})]})})},dn=()=>d.jsxs("div",{className:"policy-container",children:[d.jsx("h1",{className:"policy-title",children:"Privacy Policy & Cookie Notice"}),d.jsxs("section",{className:"policy-section",children:[d.jsx("h2",{children:"Introduction"}),d.jsx("p",{children:"Welcome! Your privacy matters to me. This portfolio collects minimal information to provide you with a smooth and personalized browsing experience. I respect your trust and take your privacy seriously."})]}),d.jsxs("section",{className:"policy-section",children:[d.jsx("h2",{children:"Cookies & Data"}),d.jsx("p",{children:"This site may use cookies to remember your preferences and improve your experience. Cookies help me understand how visitors interact with the portfolio so I can enhance the design, performance, and functionality."})]}),d.jsxs("section",{className:"policy-section",children:[d.jsx("h2",{children:"Your Consent"}),d.jsx("p",{children:"By continuing to browse this site, you consent to the use of cookies and agree to this privacy policy. Any information collected is used solely to improve your experience and ensure the website works properly."})]}),d.jsxs("section",{className:"policy-section",children:[d.jsx("h2",{children:"Learn More"}),d.jsxs("p",{children:["For more details, you can check my ",d.jsx(te,{to:"/jerryDek/contactUs",className:"policy-link",children:"Contact Page"}),"or reach out anytime. ",d.jsx(L,{color:"deepskyblue",cursor:"pointer",title:"Privacy Policy Info",style:{marginLeft:"5px"}})]})]})]}),cn=()=>d.jsxs("div",{className:"faq",children:[d.jsx(b,{children:d.jsx("title",{children:"FAQ - Jeremiah Deku"})}),d.jsx("h1",{id:"first",children:"Frequently Asked Question (FAQ)"}),d.jsxs("div",{className:"inform",children:[d.jsx("div",{className:"question active",children:"What are project you've built so far?"}),d.jsx("div",{className:"answer",children:"I have worked on so many projects. If you want more details, kindly check on the blog section "}),d.jsx("div",{className:"question",children:"Which technologies do you specialize in?"}),d.jsx("div",{className:"answer",children:"I specialize in React, Node.js, and MongoDB for building full-stack web applications."}),d.jsx("div",{className:"question",children:"Can you help me with my project?"}),d.jsx("div",{className:"answer",children:"Yes, I offer freelance services and can assist with your project. Please contact me for more details."}),d.jsx("div",{className:"question",children:"How can I contact you for collaboration or inquiries?"}),d.jsxs("div",{className:"answer",children:["You can reach me via email at ",d.jsx("a",{href:"mailto:jdeku573@gmail.com",style:{color:"blue",textDecoration:"underline"},children:"jdeku573@gmail.com"})]}),d.jsxs("p",{children:[d.jsx("div",{className:"text",children:d.jsxs("form",{action:"mailto:jdeku573@gamil.com",method:"post",children:[d.jsx("b",{children:d.jsx("p",{children:"Tell us your reason or feedback"})}),d.jsx("textarea",{name:"text",id:"text",cols:"50",rows:"10",placeholder:"Write your reason or feedback here..."}),d.jsx("br",{}),d.jsx("br",{}),d.jsx("input",{type:"submit",value:"Submit"}),d.jsx("input",{type:"reset",value:"Clear"})]})}),"For more information, kindly reach us on social media plaforms or contact Me on ",d.jsx("a",{href:"tel:+233246062758",style:{color:"orange"},children:"Call Jeremiah"})]})]}),d.jsx("a",{href:"#first",className:"back-to-top",children:d.jsx(At,{})})]}),hn=()=>d.jsxs("div",{className:"deliveryInfo",children:[d.jsx("h1",{children:"Delivery Information"}),d.jsxs("div",{className:"info",children:["At ",d.jsx("b",{children:"Balloon & Floral Decoration"}),", we strive to provide exceptional service, ensuring timely and delicate delivery of our beautiful balloons and flowers. Delivery Options Standard Delivery: Orders placed by 4:30pm are delivered within 8am - 4:30pm on business days. Express Delivery: Urgent orders are delivered within 1-3 hours for an additional fee. Scheduled Delivery: Choose a specific delivery time for special occasions. Delivery Areas We proudly serve ",d.jsx("br",{})," ",d.jsxs("i",{children:["Accra, Greater Region",d.jsx("br",{}),"Anloga, Volta Region ",d.jsx("br",{}),"Sekondi, Western Region ",d.jsx("br",{}),"etc."]}),", with plans to expand our delivery areas. Order Tracking Receive timely updates via email, SMS or our mobile app. Track your order from preparation to delivery. Packaging and Handling Balloons: Securely tied and transported in specialized vehicles. Flowers: Carefully arranged, wrapped and hydrated for optimal freshness. Delivery Fees ",d.jsx("br",{}),"Standard: [$2] ",d.jsx("br",{}),"Express: [$10] ",d.jsx("br",{}),"Scheduled: [$15] ",d.jsx("br",{}),"Special Instructions Provide clear instructions for delivery to apartments, offices or gated communities. Specify dedicated delivery recipients. Contact Us For delivery concerns, call ",d.jsx("i",{children:"0246062758"}),", email ",d.jsx("i",{children:"jdeku573@gmail.com"})," or chat with our support team. Business Hours",d.jsx("b",{children:" 9:00 AM - 5:00 PM ET, Monday - Friday "}),"Refund and Cancellation Policy View our refund and cancellation policy  ",d.jsx("a",{href:"",children:d.jsx(te,{to:"jerryDek/privacy-policy",children:"Privacy Policy"})}),". Your satisfaction is our priority."]})]}),mn=()=>d.jsxs(d.Fragment,{children:[d.jsxs(b,{children:[d.jsx("title",{children:"About Me - Jeremiah Deku"}),d.jsx("meta",{name:"description",content:"Learn more about Jeremiah Deku, a passionate Full-Stack Developer specializing in React, Node.js, and MongoDB. Discover his skills, experience, and career journey."}),d.jsx("link",{rel:"canonical",href:"https://jerrydek.com/about"})]}),d.jsxs(q,{maxWidth:"lg",sx:{py:{xs:8,md:12},display:"flex",flexDirection:"column",alignItems:"center"},children:[d.jsx(h,{variant:"h3",fontWeight:"bold",textAlign:"center",gutterBottom:!0,sx:{color:"#172441ff"},children:"About Me"}),d.jsx(h,{variant:"subtitle1",textAlign:"center",sx:{color:"#64748b",mb:6,maxWidth:"700px"},children:"I’m a passionate Full-Stack Developer who loves building modern web apps with React, Node.js, MySQL and MongoDB. I create seamless UI/UX experiences and optimize performance for real-world applications."}),d.jsxs(V,{container:!0,spacing:6,alignItems:"center",children:[d.jsx(V,{item:!0,xs:12,md:5,children:d.jsx(ee.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},whileHover:{scale:1.05,rotate:2},style:{width:"100%",display:"flex",justifyContent:"center"},children:d.jsx(ee.img,{src:"profile-pic.png",alt:"Profile",style:{width:"280px",height:"280px",borderRadius:"50%",objectFit:"cover",boxShadow:"0 10px 30px rgba(0,0,0,0.15)",border:"6px solid #0ea5e9"},animate:{y:[0,-15,0]},transition:{duration:4,repeat:1/0,repeatType:"loop"}})})}),d.jsx(V,{item:!0,xs:12,md:7,children:d.jsxs(ee.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.8},children:[d.jsx(h,{variant:"h4",fontWeight:"bold",sx:{mb:2,color:"#1a2746ff"},children:"Hi, I’m Jeremiah 👋"}),d.jsx(h,{variant:"body1",sx:{color:"#475569",lineHeight:1.8,mb:4},children:"With over 4 years of experience building robust web applications, I specialize in React, Node.js, MySQL, MongoDB, and modern UI frameworks like Material-UI. My focus is creating fast, secure, and scalable applications that provide excellent user experiences."}),d.jsx(ee.div,{whileHover:{scale:1.05},children:d.jsx(m,{variant:"contained",color:"primary",size:"large",sx:{borderRadius:"50px",textTransform:"none",px:4,py:1.5,fontWeight:"bold",fontSize:"1rem",background:"linear-gradient(90deg, #0ea5e9, #3b82f6)"},children:"Download CV"})})]})})]})]})]}),un=()=>{const[e,t]=l.useState(!1),s=new f.Howl({src:["/apple-toast.mp3"],autoPlay:!1,volume:1,loop:!1}),a=k().shape({otp:S().required("OTP is required").length(6,"OTP must be 6 digits")}),i=async()=>{try{const e=await fr.post("/api/user/resend-otp",{},{withCredentials:!0});e.data.success?B.success("OTP resent successfully"):B.error(e.data.message)}catch(e){B.error(e.response?.data?.message||"Failed to resend OTP.")}};return d.jsxs(c,{children:[d.jsx("div",{className:"whitePaper"}),d.jsxs("div",{className:"verify-otp",children:[d.jsx("em",{children:d.jsx("p",{className:"text",style:{padding:"40px",color:"gray",fontSize:"16px",marginLeft:"50px",fontFamily:" serif",display:"inline"},children:d.jsxs("p",{children:[d.jsx("i",{children:"One-Time Password"})," ",d.jsx("br",{})," has been sent to your email.",d.jsx(Nt,{style:{color:"deepskyblue",display:"inline"}})]})})}),d.jsx("hr",{}),d.jsx("br",{}),d.jsx("br",{}),d.jsx(h,{variant:"h5",sx:{mb:3,textAlign:"center",color:"gray",fontWeight:"bold"},children:"Email Verification"}),d.jsx(A,{initialValues:{otp:""},validationSchema:a,onSubmit:async e=>{t(!0);try{const t=await fr.post("/api/user/verify-otp",{otp:e.otp},{withCredentials:!0});t.data.success?(s.play(),window.location.href=t.data.redirect,B.success("OTP verified successfully!"),window.opener&&window.opener.postMessage({verified:!0},"*"),window.close()):B.warning(t.data.message)}catch(a){B.error(a.response?.data?.message||"Failed to verify OTP.")}finally{t(!1)}},children:({values:t,errors:s,touched:a,handleChange:r,handleBlur:n,handleSubmit:o})=>d.jsxs("form",{onSubmit:o,children:[d.jsx(c,{sx:{mb:3},children:d.jsx(T,{name:"otp",label:"OTP",required:!0,autoFocus:!0,placeholder:"000111",type:"tel",pattern:"[0-9]{6}",inputMode:"numeric",autoComplete:"off",fullWidth:!0,value:t.otp,onChange:r,onBlur:n,error:a.otp&&Boolean(s.otp),helperText:a.otp&&s.otp,InputProps:{startAdornment:d.jsx(D,{position:"start",children:d.jsx(K,{style:{color:"gray"}})})}})}),d.jsxs(c,{sx:{textAlign:"center"},children:[d.jsx(m,{type:"submit",variant:"contained",fullWidth:!0,disabled:e,sx:{padding:"10px",marginBottom:"20px"},children:e?d.jsx(C,{size:24}):"Verify OTP"}),d.jsx(m,{onClick:i,variant:"contained",fullWidth:!0,disabled:e,children:e?d.jsx(C,{size:24}):"Resend OTP"})]})]})})]})]})},xn=()=>{const[e,t]=l.useState(""),[s,a]=l.useState(""),[i,r]=l.useState(!1),n=v();return d.jsxs("div",{className:"overlay",children:[d.jsx(O,{style:{width:40,height:40,float:"left",margin:40,cursor:"pointer"},onClick:()=>n("/")}),d.jsxs("div",{className:"container",children:[d.jsx("h2",{children:"Forgot Password"}),d.jsx("p",{children:"Enter your email to receive a password reset link."}),d.jsxs("form",{onSubmit:async t=>{t.preventDefault(),r(!0);try{const t=await fr.post("/api/user/forgot-password",{email:e});a(t.data.message)}catch(s){a("Error: "+(s.response?.data.message||"Something went wrong"))}r(!1)},children:[d.jsx("input",{type:"email",className:"input-field",placeholder:"Enter your admin email",value:e,onChange:e=>t(e.target.value),required:!0}),d.jsx("button",{type:"submit",className:"btn",disabled:i,children:i?"Sending...":"Send Reset Link"})]}),s&&d.jsx("p",{className:"message",style:{fontWeight:"bold",color:"green"},children:s})]})]})},pn=()=>{const{token:e}=M(),t=v(),[s,a]=l.useState(""),[i,r]=l.useState(""),[n,o]=l.useState(!1);return d.jsxs("div",{className:"overlay",children:[d.jsx(O,{style:{width:40,height:40,float:"left",margin:40,cursor:"pointer"},onClick:()=>t("/")}),d.jsxs("div",{className:"container",children:[d.jsx("h2",{children:"Reset Password"}),d.jsx("p",{children:"Enter a new password for your account."}),d.jsxs("form",{onSubmit:async a=>{a.preventDefault(),o(!0);try{const a=await fr.post(`/api/user/reset-password/${e}`,{newPassword:s});r(a.data.message||"Password reset successful."),setTimeout((()=>t("/")),3e3)}catch(i){r("Error: "+(i.response?.data?.message||"Something went wrong"))}o(!1)},children:[d.jsx("input",{type:"password",className:"input-field",placeholder:"New Password",value:s,onChange:e=>a(e.target.value),required:!0,minLength:8,autoComplete:"new-password"}),d.jsx("button",{type:"submit",className:"btn",disabled:n,children:n?"Resetting...":"Reset Password"})]}),i&&d.jsx("p",{className:"message",children:i})]})]})};function gn(){const[e,t]=l.useState(""),s=v(),a=["/jerryDek/","/aboutUs","/newsFeed","/deliveryInfo","/privacy-policy","/fleets","/searchInput","/searchRides","/cart","/profile","/checkout","/myBookings","/track-ride","/admin/dashboard","/admin/users"];return d.jsxs(d.Fragment,{children:[d.jsxs(b,{children:[d.jsx("link",{rel:"icon",type:"image/png",href:"icons/globe.png"}),d.jsx("title",{children:"Error 404(Not Found)!!"})]}),d.jsxs("div",{className:"nf-container",children:[d.jsx("img",{src:"error.png",alt:"robot crash",className:"robot"}),d.jsxs("div",{className:"nf-box",children:[d.jsx(te,{to:"/jerryDek/",className:"nf-logo-link",children:d.jsx("h2",{className:"logo",children:d.jsx("em",{children:"Jeremiah Dek"})})}),d.jsx("h1",{className:"nf-code",children:"404"}),d.jsxs("p",{className:"nf-text",children:["Sorry, we can’t find that page. ",d.jsx("strong",{children:location.pathname})," does not exist or has been moved."]}),d.jsxs("form",{className:"nf-search",onSubmit:t=>{t.preventDefault();const i=e.trim().toLowerCase();if(!i)return;const r=a.find((e=>e.toLowerCase().endsWith(i)));if(r)return s(r);s(`/search?q=${encodeURIComponent(e)}`)},children:[d.jsx(Tt,{size:20,className:"nf-icon"}),d.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search for what you need","aria-label":"Search site"})]}),d.jsxs("div",{className:"nf-links",children:[d.jsx(te,{to:"/jerryDek/",className:"nf-link",children:"Home"}),d.jsx(te,{to:"/jerryDek/blog",className:"nf-link",children:"Dashboard"})]})]})]})]})}const jn=[{code:"en",label:"English",countryCode:"GB"},{code:"es",label:"Español",countryCode:"ES"},{code:"fr",label:"Français",countryCode:"FR"},{code:"de",label:"Deutsch",countryCode:"DE"},{code:"it",label:"Italiano",countryCode:"IT"},{code:"pt",label:"Português",countryCode:"PT"},{code:"zh",label:"中文",countryCode:"CN"},{code:"ja",label:"日本語",countryCode:"JP"},{code:"ru",label:"Русский",countryCode:"RU"},{code:"ar",label:"العربية",countryCode:"SA"},{code:"hi",label:"हिन्दी",countryCode:"IN"},{code:"ko",label:"한국어",countryCode:"KR"},{code:"nl",label:"Nederlands",countryCode:"NL"},{code:"sv",label:"Svenska",countryCode:"SE"},{code:"tr",label:"Türkçe",countryCode:"TR"}],fn=({open:e,onClose:t})=>{const{i18n:s}=Dt();return d.jsxs(Ke,{open:e,onClose:t,children:[d.jsxs(Xe,{sx:{m:10,p:1,width:200},children:["Select Language",d.jsx(E,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:d.jsx(Je,{})})]}),d.jsx(Te,{sx:{pt:0,display:"grid",gridTemplateColumns:"0.1fr 0.1fr"},children:jn.map((e=>d.jsxs(Pt,{button:!0,onClick:()=>{return a=e.code,s.changeLanguage(a),localStorage.setItem("language",a),void t();var a},sx:{m:1},children:[d.jsx(Et,{children:d.jsx(ht,{children:d.jsx(Ft,{countryCode:e.countryCode,svg:!0,style:{width:"1.5em",height:"1.5em"},title:e.label})})}),d.jsx(Fe,{primary:e.label})]},e.code)))})]})};zt.element.isRequired,zt.func;const bn=()=>{const e=v(),{t:t,i18n:s}=Dt(),[a,i]=l.useState(!1),[r,n]=l.useState(!1),[o,u]=l.useState();l.useEffect((()=>{const e=()=>u(window.scrollY>20);return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]);const x=()=>{n(!r)},p=()=>{e("/jerryDek/blog/getJob"),r&&n(!1)},g={en:"US",es:"ES",fr:"FR",de:"DE",it:"IT",pt:"PT",zh:"CN",ja:"JP",ru:"RU",ar:"SA",hi:"IN",ko:"KR",nl:"NL",sv:"SE",tr:"TR"}[s.language]||"US",f=[{label:t("navbar.home"),path:"/"},{label:t("navbar.blog"),path:"/jerryDek/blog"},{label:t("navbar.about"),path:"/jerryDek/aboutUs"},{label:t("navbar.contactUs"),path:"/jerryDek/contactUs"}],b=d.jsxs(c,{onClick:x,sx:{textAlign:"center",width:"100%"},children:[d.jsx(E,{onClick:x,sx:{p:2,float:"right"},children:d.jsx(Je,{})}),d.jsx(te,{to:"/jerryDek/",style:{textDecoration:"none",color:"inherit"},children:d.jsx(h,{variant:"h5",component:"div",className:"logo",sx:{fontWeight:"bold",fontStyle:"italic",fontSize:{xs:16,sm:28}},children:"Jeremiah Deku"})}),d.jsx(j,{}),d.jsxs(Te,{children:[f.map((e=>d.jsx(Pt,{disablePadding:!0,sx:{pr:5},children:d.jsx(De,{component:e.path?te:"a",to:e.path,href:e.href,sx:{textAlign:"start"},className:"navlinks",children:d.jsx(Fe,{primary:e.label.toUpperCase()})})},e.label))),d.jsx(j,{}),d.jsx(Pt,{disablePadding:!0,children:d.jsxs(De,{onClick:p,children:[d.jsx(Ee,{children:d.jsx(Wt,{})}),d.jsx(Fe,{primary:t("navbar.search")||"Search"})]})}),d.jsx(Pt,{disablePadding:!0,children:d.jsxs(De,{onClick:()=>i(!0),children:[d.jsx(Ee,{children:d.jsx(Ft,{countryCode:g,svg:!0,style:{width:"1em",height:"1em",borderRadius:"50%"},title:s.language.toUpperCase()})}),d.jsx(Fe,{primary:t("navbar.language")||"Language"})]})}),d.jsxs(Pt,{sx:{justifyContent:"center"},children:[d.jsx(h,{variant:"body2",sx:{mr:1},children:"Change Theme:"}),d.jsx(Bi,{})]}),d.jsx(j,{})]})]});return d.jsxs(d.Fragment,{children:[d.jsx(Lt,{className:"navbar "+(o?"scroll-active":"scroll-inactive"),id:"navbar",position:"sticky",sx:{bgcolor:"whitesmoke",boxShadow:0,zIndex:10010},children:d.jsxs(Ge,{sx:{justifyContent:"space-between",py:0},children:[d.jsx(c,{sx:{display:"flex",alignItems:"center"},children:d.jsx(te,{to:"/jerryDek/",style:{textDecoration:"none",color:"inherit"},children:d.jsx(h,{variant:"h5",component:"div",className:"logo",sx:{fontWeight:"bold",fontStyle:"italic",mr:{xs:2,sm:8},fontSize:{xs:20,sm:24}},children:"Jeremiah Deku"})})}),d.jsxs(c,{sx:{display:{xs:"none",md:"flex"},ml:-70,alignItems:"center"},children:[d.jsx("div",{style:{height:28,width:1.8,backgroundColor:"#777"}}),f.map((e=>d.jsx(m,{color:"inherit",component:e.path?te:"a",to:e.path,href:e.href,className:"navlinks",sx:{mx:1,textTransform:"none",placeSelf:"start",fontSize:"1rem"},children:e.label},e.label)))]}),d.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:{xs:.5,sm:1}},children:[" ",d.jsx(E,{onClick:p,sx:{display:{xs:"none",md:"block"}},children:d.jsx(Wt,{sx:{fontSize:"1.7rem",mb:-1},className:"navbar-search-icon"})}),d.jsx(c,{sx:{display:{xs:"none",md:"block"}},children:d.jsx(Bi,{})}),d.jsx(E,{onClick:()=>i(!0),color:"inherit",sx:{p:0,mb:-.5,display:{xs:"none",md:"block"}},children:d.jsx(Bt,{code:g,size:32,className:"navbar-globe-icon",title:s.language.toUpperCase()})}),d.jsx(fn,{open:a,onClose:()=>i(!1)}),d.jsx(E,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:x,sx:{ml:{xs:0,sm:1},display:{md:"none"}},children:d.jsx(Ot,{className:"hamburger",sx:{fontSize:"1.7rem"}})})]})]})}),d.jsx("nav",{children:d.jsx(Ve,{variant:"temporary",open:r,onClose:x,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:300}},className:"navbar-sidebar",children:b})})]})};bn.propTypes={setLogin:zt.func.isRequired};const yn=()=>{function e({allowedRoles:e=[],children:t}){const s=w(_r),a=w(Mr);return w(Jr)&&s?e.length>0&&!a.some((t=>e.includes(t)))?"":d.jsx(d.Fragment,{children:t}):""}return d.jsxs("div",{className:"footer",id:"footer",children:[d.jsxs("div",{className:"footer-content",children:[d.jsxs("div",{className:"footer-content-left",children:[d.jsx(te,{to:"/",children:d.jsx("div",{className:"logo",children:d.jsx("em",{children:"JeremiahDek"})})}),d.jsxs("p",{children:[d.jsx("b",{children:"JeremiahDek – All related projects codeByJeremiah."}),d.jsx("br",{}),"Build a hands on projects with JeremiahDeku. Learn and start building professional web app."]}),d.jsxs("div",{className:"footer-social-icons",children:[d.jsx(te,{to:"https://facebook.com",target:"_blank",children:d.jsx(Mt,{icon:qt,color:"whitesmoke",width:"30"})}),d.jsx(te,{to:"https://facebook.com",target:"_blank",children:d.jsx(Mt,{icon:Ut,color:"whitesmoke",width:"30"})}),d.jsx(te,{to:"https://wa.me/+233544684595/",target:"_blank",children:d.jsx(Mt,{icon:_t,color:"whitesmoke",width:"30"})}),d.jsx(te,{to:"https://linkedin/jdeku-jdek",target:"_blank",children:d.jsx(Mt,{icon:Ht,color:"whitesmoke",width:"30"})}),d.jsx(te,{to:"https://twitter.com/jdeku-jdek",target:"_blank",children:d.jsx(Mt,{icon:Jt,color:"whitesmoke",width:"30"})})]})]}),d.jsx("hr",{className:"stroke"}),d.jsxs("div",{className:"footer-content-center",children:[d.jsx("h2",{children:"COMPANY"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(te,{to:"/",children:"Home"})}),d.jsx("li",{children:d.jsx(te,{to:"/jerryDek/aboutUs",children:"About Me"})}),d.jsx("li",{children:d.jsx(te,{to:"/jerryDek/privacy-policy",children:"Privacy"})}),d.jsx("li",{children:d.jsx(te,{to:"/jerryDek/message-us",children:"Frequently Asked Questions"})}),d.jsx("li",{children:d.jsx(te,{to:"/jerryDek/partners",children:"Partners or Affiliations"})})]})]}),d.jsx("hr",{className:"stroke"}),d.jsxs("div",{className:"footer-content-right",children:[d.jsx("h2",{children:"GET IN TOUCH"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx("a",{href:"tel:+233-246-062-758",children:"🔗 +233-246-062-758"})}),d.jsx("li",{children:d.jsx("a",{href:"mailto:jdeku573@gmail.com",children:"🔗 jdeku573@gmail.com"})}),d.jsx("li",{children:d.jsx("a",{href:"sms:+233246062758",children:"🔗Chat via SMS"})}),d.jsx("li",{children:d.jsx(e,{allowedRoles:"admin",children:d.jsx(te,{to:"/Oauth2/v1/admin/login",children:"🔗 Admin Panel"})})})]})]})]}),d.jsx("hr",{}),d.jsxs("p",{className:"footer-copyright",children:["© Inc. ",(new Date).getFullYear()," JeremiahDek. All Rights Reserved"]})]})},vn=Vt($t({apiKey:"AIzaSyDOMY_PtpH7l8U3c40Zr-eqd0Ev2jVOml0",authDomain:"toli-toli-bbea0.firebaseapp.com",projectId:"toli-toli-bbea0",storageBucket:"toli-toli-bbea0.firebasestorage.app",messagingSenderId:"622608058161",appId:"1:622608058161:web:0e33e56df6a92289e81210",measurementId:"G-WGM5X7HCC2"}));async function wn(){const e=await navigator.serviceWorker.ready,t=await Gt(vn,{serviceWorkerRegistration:e,vapidKey:"BDSl_SrpS6IuLO3zl1_lLF5f6jZ2lrUdmHdt3u6LG3iut5NtMyMSREms0xUd5oPctD-GxOt9Lm8d52hF-zbXCqY"});if(!t)throw new Error("No FCM token available");return t!==localStorage.getItem("fcmToken")&&(localStorage.setItem("fcmToken",t),await fr.post("/api/user/update-token",{fcmToken:t},{withCredentials:!0}),console.log("🔄 FCM token synced:",t)),t}const kn=({setLogin:e})=>{const t=v(),s=y(),a=l.useRef(!0),[i,r]=l.useState(!1),[n,o]=l.useState(null),u=l.useRef(new f.Howl({src:["sounds/apple-sms.mp3"],volume:1})).current;l.useEffect((()=>(s(Lr()),o(null),()=>{a.current=!1})),[s]);const x=k({email:S().email("Invalid email").required("Required"),password:S().min(8,"Min 8 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])/,"Weak password").required("Required")});return d.jsxs(c,{sx:{maxWidth:400,mx:"auto",p:2},children:[d.jsx(h,{variant:"h5",align:"center",color:"gray",mb:3,children:"User Login"}),n&&d.jsx(_,{severity:"error",sx:{mb:2},onClose:()=>o(null),children:n}),!navigator.onLine&&d.jsx(_,{severity:"warning",sx:{mb:2},children:"You are currently offline. Please check your internet connection."}),d.jsx(A,{initialValues:{email:"",password:""},validationSchema:x,onSubmit:async(i,{setSubmitting:r,setFieldError:n})=>{o(null),s(Lr());try{const{data:a}=await fr.post("/api/user/login",i,{withCredentials:!0});a.userId&&localStorage.setItem("userId",a.userId),u.play(),B.success(a.message||"Login successful!"),e(!1),t("/"),setTimeout((()=>{s(Ar()).unwrap().catch((e=>{console.warn("User info fetch failed:",e)}))}),100),setTimeout((()=>{wn().catch((e=>{console.warn("FCM token sync failed:",e)}))}),2e3)}catch(l){if(console.error("Login error:",l),400===l.response?.status&&l.response?.data?.field){const{field:e,message:t}=l.response.data;return void n(e,t)}(e=>{let t="Something went wrong. Please try again.";if(!e.response)return t=navigator.onLine?"Network error. Please check your connection and try again.":"You are offline. Please check your internet connection.",o(t),void B.warn(t);const{status:s,data:a}=e.response,i=a?.message||a?.error||"An error occurred";switch(s){case 400:case 401:case 423:case 404:default:t=i;break;case 429:t="Too many login attempts. Please wait and try again.";break;case 500:case 502:case 503:t="Server is temporarily unavailable. Please try again later."}o(t),B.error(t)})(l)}finally{a.current&&r(!1)}},children:({isSubmitting:e,errors:t,touched:s})=>d.jsxs(Yt,{noValidate:!0,children:[d.jsx(Kt,{as:T,name:"email",label:"Email",fullWidth:!0,required:!0,margin:"normal",error:s.email&&!!t.email,InputProps:{startAdornment:d.jsx(D,{position:"start",children:d.jsx(P,{})})}}),d.jsx(Xt,{name:"email",component:"div",style:{color:"red",fontSize:"0.875rem"}}),d.jsx(Kt,{as:T,name:"password",label:"Password",type:i?"text":"password",fullWidth:!0,required:!0,margin:"normal",error:s.password&&!!t.password,InputProps:{startAdornment:d.jsx(D,{position:"start",children:d.jsx(W,{})}),endAdornment:d.jsx(D,{position:"end",children:d.jsx(E,{onClick:()=>r((e=>!e)),edge:"end","aria-label":"toggle password visibility",children:i?d.jsx(z,{}):d.jsx(F,{})})})}}),d.jsx(Xt,{name:"password",component:"div",style:{color:"red",fontSize:"0.875rem"}}),d.jsx(c,{textAlign:"center",my:2,children:d.jsx(m,{type:"submit",variant:"contained",disabled:e||!navigator.onLine,fullWidth:!0,startIcon:e?d.jsx(C,{size:20}):null,children:e?"Logging in...":"Login"})}),d.jsx(h,{align:"center",variant:"body2",children:"OR"}),d.jsx(c,{textAlign:"center",mt:2,children:d.jsx(m,{variant:"outlined",fullWidth:!0,disabled:!navigator.onLine,onClick:()=>window.location.href="http://localhost:3000/api/auth/google",children:"Continue with Google"})}),!navigator.onLine&&d.jsx(h,{variant:"caption",color:"text.secondary",align:"center",display:"block",mt:1,children:"Login is disabled while offline"})]})})]})};kn.propTypes={setLogin:zt.func.isRequired};const Sn=({setLogin:e})=>{const[t,s]=l.useState(!1),[a,i]=l.useState(!1),r=()=>{i((e=>!e))},n=k().shape({name:S().min(5,"Enter your full name").required("Name is required"),email:S().email("Invalid email address").required("Email is required"),password:S().min(8,"Password must be at least 8 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,"Password must contain uppercase, lowercase, number, and special character.").required("Password is required")});return d.jsxs("div",{children:[d.jsx(h,{variant:"h5",sx:{mb:3,textAlign:"center",color:"gray"},children:"Register"}),d.jsx(A,{initialValues:{name:"",email:"",password:""},validationSchema:n,onSubmit:async t=>{s(!0);try{const s=await fr.post("/api/user/register",t,{withCredentials:!0});s.data.success?(window.open("/verify-otp","_blank"),e(!1)):B.warn(s.data.message)}catch(a){a.response&&400===a.response.status?B.error(a.response.data?.message||"User already exists"):a.response&&401===a.response.status?B.error(a.response.data?.message||"Invalid email format"):a.response&&403===a.response.status?B.warn(a.response.data?.message||"Password must be at least 8 characters long and include uppercase, lowercase, and a special character."):a.response&&500===a.response.status?B.error(a.response.data?.message||"Server down. Please try again later."):"ERR_NETWORK"===a.code?B.warn("Network unstable. Check your internet connection"):B.error(a.message||"An unexpected error occurred.")}finally{s(!1)}},children:({values:e,errors:s,touched:i,handleChange:n,handleBlur:o,handleSubmit:l})=>d.jsxs("form",{onSubmit:l,children:[d.jsx(c,{sx:{mb:3},children:d.jsx(T,{name:"name",label:"Full Name",required:!0,autoFocus:!0,fullWidth:!0,autoComplete:"name",value:e.name,onChange:e=>{const t=e.target.value.replace(/\b\w/g,(e=>e.toUpperCase()));n({target:{name:e.target.name,value:t}})},onBlur:o,placeholder:"Enter your full name",error:i.name&&Boolean(s.name),helperText:i.name&&s.name,inputMode:"text",InputProps:{startAdornment:d.jsx(D,{position:"start",children:d.jsx(Y,{style:{marginRight:"8px"}})})}})}),d.jsx(c,{sx:{mb:3},children:d.jsx(T,{name:"email",label:"Email",type:"email",required:!0,fullWidth:!0,value:e.email,onChange:n,onBlur:o,placeholder:"Enter your email",autoComplete:"email",error:i.email&&Boolean(s.email),helperText:i.email&&s.email,inputMode:"email",InputProps:{startAdornment:d.jsx(D,{position:"start",children:d.jsx(P,{style:{marginRight:"8px"}})})}})}),d.jsx(c,{sx:{mb:3},children:d.jsx(T,{name:"password",label:"Password",type:a?"text":"password",required:!0,fullWidth:!0,value:e.password,onChange:n,onBlur:o,placeholder:"Create a password",autoComplete:"new-password",error:i.password&&Boolean(s.password),inputMode:"password",helperText:i.password&&s.password,InputProps:{startAdornment:d.jsx(D,{position:"start",children:d.jsx(W,{style:{marginRight:"8px"}})}),endAdornment:d.jsx(D,{position:"end",children:d.jsx(E,{onClick:r,tabIndex:-1,children:a?d.jsx(F,{}):d.jsx(z,{})})})}})}),d.jsx(c,{sx:{textAlign:"center"},children:d.jsx(m,{type:"submit",variant:"contained",fullWidth:!0,disabled:t,children:t?d.jsx(C,{size:24}):"Register"})})]})}),d.jsx(c,{sx:{textAlign:"center"},children:d.jsx(h,{variant:"h6",sx:{my:2},children:"OR"})})]})};Sn.propTypes={setLogin:zt.func.isRequired};const Cn=({setLogin:e})=>{const[t,s]=l.useState(!0),a={color:"#0e2cf2",cursor:"pointer",fontWeight:"bold"};return localStorage.getItem("userId")&&e(!0),d.jsx("div",{className:"login-container",children:d.jsxs(c,{sx:{maxWidth:400,margin:"auto",mt:5,p:6,boxShadow:3,borderRadius:2,color:"gray",background:t?"aliceblue":"white",transition:"all 0.5s",position:"relative"},children:[d.jsx(Qt,{onClick:()=>e(!1),className:"closeButton",style:{position:"absolute",top:16,right:16,cursor:"pointer",fontSize:24,color:"gray",zIndex:1},"aria-label":"Close Login Form"}),t?d.jsx(kn,{setLogin:e}):d.jsx(Sn,{setLogin:e}),d.jsx("p",{children:t?d.jsxs(d.Fragment,{children:["Don’t have an account?"," ",d.jsx("span",{onClick:()=>s(!1),style:a,children:"Register"})]}):d.jsxs(d.Fragment,{children:["Already have an account?"," ",d.jsx("span",{onClick:()=>s(!0),style:a,children:"Login"})]})})]})})};function Rn({login:e,setLogin:t}){return d.jsxs(d.Fragment,{children:[d.jsx(b,{children:d.jsx("title",{children:"Jeremiah Deku"})}),e&&d.jsx(Cn,{setLogin:t}),d.jsx(bn,{setLogin:t}),d.jsx("div",{className:"app",children:d.jsx(Ye,{})}),d.jsx(yn,{})]})}function In(){const e=x(),t=w(Or),[s,a]=l.useState(!1),[i,r]=l.useState(""),[n,o]=l.useState(null),c=new f.Howl({src:["/sounds/bubble-pop.mp3"]}),h=l.useCallback((async()=>{if(!t)return;if("granted"!==Notification.permission){if("granted"!==await Notification.requestPermission())return r("Please enable notifications in your browser settings."),void a(!0)}const e=await navigator.serviceWorker.ready;await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:An("BDSl_SrpS6IuLO3zl1_lLF5f6jZ2lrUdmHdt3u6LG3iut5NtMyMSREms0xUd5oPctD-GxOt9Lm8d52hF-zbXCqY")});const s=await wn();o(s)}),[t]);var u;return u=n,l.useEffect((()=>{u&&fr.post("/api/user/subscribe-global",{fcmToken:u},{withCredentials:!0}).then((()=>console.log("✅ Subscribed to global‑updates"))).catch((e=>console.error("Global topic subscribe error:",e)))}),[u]),l.useEffect((()=>{h();const e=Zt(vn,(e=>{c.play(),B.info(d.jsxs(d.Fragment,{children:[d.jsx("strong",{children:e.notification?.title}),d.jsx("br",{}),e.notification?.body]}))}));return window.addEventListener("focus",wn),()=>{e(),window.removeEventListener("focus",wn)}}),[h]),l.useEffect((()=>{t||(async()=>{try{const e=localStorage.getItem("fcmToken");e&&(await es(vn),await fr.post("/api/user/remove-token",{fcmToken:e},{withCredentials:!0}),localStorage.removeItem("fcmToken"),console.log("🔕 Unsubscribed FCM on logout"))}catch(e){}})()}),[t]),d.jsxs(Ke,{open:s,onClose:()=>a(!1),children:[d.jsx(Xe,{sx:{bgcolor:e.palette.primary.main,color:"#fff"},children:"Notifications"}),d.jsx(Qe,{children:d.jsx(ts,{children:i})}),d.jsxs(ss,{children:[d.jsx(m,{onClick:()=>window.open("https://support.google.com/chrome/answer/3220216","_blank"),sx:{color:e.palette.primary.main},children:"Learn How"}),d.jsx(m,{onClick:()=>a(!1),sx:{color:e.palette.primary.main},children:"Close"})]})]})}function An(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),s=window.atob(t);return new Uint8Array([...s].map((e=>e.charCodeAt(0))))}Cn.propTypes={setLogin:zt.func.isRequired};const Nn=()=>{const e=y(),t=v(),s=w(en),a=s.reduce(((e,t)=>e+Number(t.price)*Number(t.requestedSeats||1)),0),i=a?2:0,r=a+i,n=s[0]?.currency||"USD";return d.jsxs(d.Fragment,{children:[d.jsx(b,{children:d.jsx("title",{children:"Cart – TOLI‑TOLI"})}),d.jsxs("div",{className:"cart",children:[d.jsxs("div",{className:"cart-item",children:[d.jsxs("div",{className:"cart-title",children:[d.jsx("p",{children:"Route"}),d.jsx("p",{children:"Date"}),d.jsx("p",{children:"Qty"}),d.jsx("p",{children:"Price"}),d.jsx("p",{children:"Remove"}),d.jsx("p",{children:d.jsx("img",{onClick:()=>window.print(),src:"/printer (2).png",alt:"print",style:{cursor:"pointer"}})})]}),d.jsx("hr",{}),s.length>0?s.map((t=>d.jsxs(Ce.Fragment,{children:[d.jsxs("div",{className:"cart-title cart-items-item",children:[d.jsxs("p",{children:[t.pickup," → ",t.destination]}),d.jsx("p",{children:t.selectedDate?new Date(t.selectedDate).toLocaleDateString():"--"}),d.jsx("p",{children:t.requestedSeats||1}),d.jsxs("p",{children:[n," ",(Number(t.price)*Number(t.requestedSeats||1)).toFixed(2)]}),d.jsx("p",{children:d.jsx("img",{onClick:()=>{return s=t._id,void e(Qr(s));var s},className:"delete",src:"/trash.png",alt:"remove",style:{cursor:"pointer"}})})]}),d.jsx("hr",{})]},t._id))):d.jsx("p",{children:"No rides selected."})]}),d.jsx("div",{className:"cart-bottom",children:d.jsxs("div",{className:"cart-total",children:[d.jsx("h2",{children:"Cart Totals"}),d.jsxs("div",{className:"cart-total-details",children:[d.jsx("p",{children:"Subtotal"}),d.jsxs("p",{children:[n," ",a.toFixed(2)]})]}),d.jsx("hr",{}),d.jsxs("div",{className:"cart-total-details",children:[d.jsx("p",{children:"Service Fee"}),d.jsxs("p",{children:[n," ",i.toFixed(2)]})]}),d.jsx("hr",{}),d.jsxs("div",{className:"cart-total-details",children:[d.jsx("p",{children:"Total"}),d.jsxs("p",{children:[n," ",r.toFixed(2)]})]}),d.jsx("button",{onClick:()=>t("/checkout"),disabled:0===s.length,children:"PROCEED TO CHECKOUT"})]})})]})]})},Tn=({children:e})=>{const t=y(),s=w(_r),a=w(qr),i=w($r),r=w(Hr),n=w(Ur),o=l.useRef(!1),d=l.useRef(null),c=l.useRef(0),h=l.useCallback(((e=0)=>{if(d.current&&clearTimeout(d.current),e>=3)return void console.log("Max retries reached for session recovery");const s=3e4*Math.pow(2,e);d.current=setTimeout((()=>{navigator.onLine&&localStorage.getItem("userId")&&(console.log(`Retrying session recovery (attempt ${e+1}/3)...`),t(Tr()).unwrap().then((()=>{console.log("✅ Session recovered on retry"),c.current=0})).catch((t=>{console.log("❌ Retry failed:",t),c.current=e+1,(!navigator.onLine||t.includes("Network")||t.includes("fetch"))&&h(c.current)})))}),s)}),[t]);return l.useEffect((()=>{const e=()=>{console.log("📶 Connection restored"),t(zr(!0)),t(Lr()),c.current=0;localStorage.getItem("userId")&&(i||n)&&(console.log("🔄 Refreshing user info after reconnection"),t(Ar()).unwrap().catch((e=>{console.warn("Post-reconnection refresh failed:",e)})))},s=()=>{console.log("📴 Connection lost"),t(zr(!1)),d.current&&(clearTimeout(d.current),d.current=null)};return t(zr(navigator.onLine)),window.addEventListener("online",e),window.addEventListener("offline",s),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}}),[t,i,n]),l.useEffect((()=>{t(Wr());const e=localStorage.getItem("userId");if(e&&!o.current&&navigator.onLine){o.current=!0,console.log("🔐 Attempting session recovery...");const e=t(Tr()),s=setTimeout((()=>{console.warn("⏱️ Session recovery timeout - treating as network issue")}),15e3);e.unwrap().then((()=>{clearTimeout(s),console.log("✅ Session recovered successfully"),c.current=0})).catch((e=>{clearTimeout(s),console.log("❌ Session recovery failed:",e);!navigator.onLine||e.includes("Network")||e.includes("fetch")||e.includes("timeout")||"object"==typeof e&&"NETWORK_ERROR"===e.type?(console.log("🔄 Scheduling retry for network-related error"),h(0)):console.log("🚫 Not retrying - likely auth error:",e)}))}else e&&!navigator.onLine&&console.log("📴 Offline - will retry session recovery when online")}),[t,h]),l.useEffect((()=>{if(!s||!r||"loading"===a)return;const e=setInterval((()=>{i&&(console.log("🔄 Refreshing user info (periodic check)"),t(Ar()).unwrap().then((()=>{console.log("✅ Periodic refresh successful")})).catch((e=>{console.warn("⚠️ Periodic refresh failed:",e)})))}),3e5);return()=>clearInterval(e)}),[t,s,r,i,a]),l.useEffect((()=>{const e=()=>{!document.hidden&&s&&r&&i&&(console.log("👁️ Page visible - checking if refresh needed"),t(Ar()).unwrap().catch((e=>{console.warn("Visibility-triggered refresh failed:",e)})))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[t,s,r,i]),l.useEffect((()=>()=>{d.current&&(clearTimeout(d.current),d.current=null)}),[]),l.useEffect((()=>{console.log("🔍 Auth State:",{isAuthenticated:s,userStatus:a,shouldRefresh:i,isOnline:r,hasError:!!n,hasUserId:!!localStorage.getItem("userId")})}),[s,a,i,r,n]),e},Dn=is({reducer:rs({key:"root",storage:ns,whitelist:["user","cart","driverNotifications"]},as({user:Vr,cart:tn,admin:Za})),middleware:e=>e({serializableCheck:!1})}),Pn=()=>d.jsxs("div",{style:{padding:"20px",marginTop:10,textAlign:"center"},children:[d.jsx("h1",{style:{color:"violet"},children:"Partner Network & Affiliate"}),d.jsx(Ci,{})]});function En(){const e=w(Br),[t,s]=l.useState(!1),a=w(Hr),i=y(),[r,n]=l.useState((()=>!sessionStorage.getItem("assetsLoaded")));return l.useEffect((()=>{r&&(async()=>{try{localStorage.getItem("assetsLoaded")||(console.log("🎨 Loading application assets..."),await Li(),localStorage.setItem("assetsLoaded","true"),console.log("✅ Assets loaded successfully")),sessionStorage.setItem("assetsLoaded","true")}catch(e){console.warn("⚠️ Asset loading failed:",e)}finally{n(!1)}})()}),[r]),l.useEffect((()=>{const e=setInterval((()=>{$r(Dn.getState())&&i(Tr())}),6e5);return()=>clearInterval(e)}),[i]),l.useEffect((()=>{i(Wr())}),[i]),r?d.jsx(on,{}):d.jsx(os,{dateAdapter:ls,children:d.jsxs(Tn,{children:[e&&d.jsx(In,{}),!a&&d.jsx("div",{style:{position:"relative",top:"0",left:"0",backgroundColor:"orange",width:"100%",padding:5},children:d.jsx(ds,{children:"Not online. Please check your internet connection"})}),d.jsx("div",{className:"app",children:d.jsxs(Rt,{children:[d.jsxs(It,{element:d.jsx(Rn,{login:t,setLogin:s}),children:[d.jsx(It,{path:"/",element:d.jsx(zi,{})}),d.jsx(It,{path:"blog/*",element:d.jsx(xr,{})}),d.jsx(It,{path:"contactUs",element:d.jsx(pr,{})}),d.jsx(It,{path:"newsFeed",element:d.jsx(rn,{})}),d.jsx(It,{path:"privacy-policy",element:d.jsx(dn,{})}),d.jsx(It,{path:"deliveryInfo",element:d.jsx(hn,{})}),d.jsx(It,{path:"partners",element:d.jsx(Pn,{})}),d.jsx(It,{path:"aboutUs",element:d.jsx(mn,{})}),d.jsx(It,{path:"message-us",element:d.jsx(cn,{})}),d.jsx(It,{path:"cart",element:d.jsx(Nn,{})}),d.jsx(It,{path:"verify",element:d.jsx(an,{})}),d.jsx(It,{path:"profile",element:d.jsx(ln,{})}),d.jsx(It,{path:"checkout",element:d.jsx(sn,{})}),d.jsx(It,{path:"verify-otp",element:d.jsx(un,{setLogin:s})}),d.jsx(It,{path:"forgot-password",element:d.jsx(xn,{})}),d.jsx(It,{path:"reset-password",element:d.jsx(pn,{})})]}),d.jsx(It,{path:"*",element:d.jsx(gn,{})})]})})]})})}function Fn({allowedRoles:e=[],children:t}){const s=w(Xa),a=w(Ka),i=w(Qa),r=Q(),n="/Oauth2/v1/admin";return i?s?e.length>0&&!a.some((t=>e.includes(t)))?d.jsx(Z,{to:`${n}/unauthorized`,replace:!0}):d.jsx(d.Fragment,{children:t}):d.jsx(Z,{to:`${n}/login?redirect=${encodeURIComponent(r.pathname)}`,replace:!0}):d.jsx(c,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:d.jsx(C,{size:60})})}const zn=()=>{const[e,t]=l.useState({pickup:"",destination:"",price:"",description:"",selectedDate:"",selectedTime:"",passengers:1,image:null,type:""}),s=e=>{const{name:s,value:a}=e.target;t((e=>({...e,[s]:a})))};return d.jsxs(c,{sx:{maxWidth:700,mx:"auto",mt:4,p:3,bgcolor:"#fff",borderRadius:2,boxShadow:2},children:[d.jsx(h,{variant:"h5",gutterBottom:!0,fontWeight:600,children:"Add New Ride"}),d.jsx("form",{onSubmit:async s=>{if(s.preventDefault(),!(()=>{const{pickup:t,destination:s,price:a,description:i,selectedDate:r,selectedTime:n,type:o,image:l,passengers:d}=e;return t&&s&&a&&i&&r&&n&&o&&l?!(a<=0||d<=0)||(B.error("Price and passengers must be greater than zero"),!1):(B.error("All fields are required"),!1)})())return;const a=new FormData;Object.keys(e).forEach((t=>a.append(t,e[t])));try{const e=await i.post("/api/admin/add",a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});e.data.success?(B.success("Ride added successfully"),t({pickup:"",destination:"",price:"",description:"",selectedDate:"",selectedTime:"",passengers:1,image:null,type:""})):B.error(e.data.message)}catch(r){B.error("Failed to add ride"),console.error("Error adding ride:",r.response?.data||r.message)}},encType:"multipart/form-data",children:d.jsxs(V,{container:!0,spacing:2,children:[d.jsx(V,{item:!0,xs:12,sm:6,children:d.jsx(T,{label:"Pickup Location",name:"pickup",value:e.pickup,onChange:s,fullWidth:!0,required:!0})}),d.jsx(V,{item:!0,xs:12,sm:6,children:d.jsx(T,{label:"Destination",name:"destination",value:e.destination,onChange:s,fullWidth:!0,required:!0})}),d.jsx(V,{item:!0,xs:12,sm:6,children:d.jsx(T,{label:"Price",type:"number",name:"price",value:e.price,onChange:s,inputProps:{min:1},fullWidth:!0,required:!0})}),d.jsx(V,{item:!0,xs:12,sm:6,children:d.jsx(T,{label:"Passengers",type:"number",name:"passengers",value:e.passengers,onChange:s,inputProps:{min:1,max:60},fullWidth:!0,required:!0})}),d.jsx(V,{item:!0,xs:12,children:d.jsx(T,{label:"Ride Description",name:"description",value:e.description,onChange:s,multiline:!0,rows:4,fullWidth:!0,required:!0})}),d.jsx(V,{item:!0,xs:12,sm:6,children:d.jsxs(cs,{fullWidth:!0,required:!0,children:[d.jsx(hs,{id:"ride-type-label",children:"Ride Type"}),d.jsxs(ms,{labelId:"ride-type-label",name:"type",value:e.type,label:"Ride Type",onChange:s,children:[d.jsx(us,{value:"",children:"Select Ride Type"}),d.jsx(us,{value:"bus",children:"Bus"}),d.jsx(us,{value:"car",children:"Van"}),d.jsx(us,{value:"motorcycle",children:"Motor"})]})]})}),d.jsx(V,{item:!0,xs:6,sm:3,children:d.jsx(T,{label:"Date",name:"selectedDate",type:"date",value:e.selectedDate,onChange:s,fullWidth:!0,InputLabelProps:{shrink:!0},required:!0})}),d.jsx(V,{item:!0,xs:6,sm:3,children:d.jsx(T,{label:"Time",name:"selectedTime",type:"time",value:e.selectedTime,onChange:s,fullWidth:!0,InputLabelProps:{shrink:!0},required:!0})}),d.jsxs(V,{item:!0,xs:12,children:[d.jsxs(m,{variant:"outlined",component:"label",fullWidth:!0,children:["Upload Ride Image",d.jsx("input",{type:"file",name:"image",accept:"image/*",hidden:!0,onChange:e=>{t((t=>({...t,image:e.target.files[0]})))}})]}),e.image&&d.jsxs(h,{mt:1,children:["Selected: ",e.image.name]})]}),d.jsx(V,{item:!0,xs:12,children:d.jsx(m,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,sx:{mt:2},children:"Add Ride"})})]})})]})},Wn=()=>{const[e,t]=l.useState([]),s=async()=>{try{const e=await Ea.get("/api/admin/list",{withCredentials:!0});e.data.success?t(e.data.data):B.error(e.data.message)}catch(e){return null}};return l.useEffect((()=>{s()}),[]),d.jsxs("div",{className:"list add flex-col",children:[d.jsx("h1",{children:"All Ride Lists"}),0===e.length?d.jsx("div",{style:{width:"100%",marginTop:"50px"},children:d.jsx(_,{severity:"info",className:"no-rides-alert",children:"No rides found. Please add some rides."})}):d.jsxs("div",{className:"list-table",children:[d.jsxs("div",{className:"list-table-format title",children:[d.jsx("b",{children:"Driver"}),d.jsx("b",{children:"Ride"}),d.jsx("b",{children:"Pickup"}),d.jsx("b",{children:"Destination"}),d.jsx("b",{children:"Time"}),d.jsx("b",{children:"Price ($)"}),d.jsx("b",{children:"Date"}),d.jsx("b",{children:"Passengers"}),d.jsx("b",{children:"Action"})]}),e.map(((e,t)=>d.jsxs("div",{className:"list-table-format",children:[d.jsx("img",{src:e.imageUrl||"https://www.pngall.com/wp-content/uploads/5/Profile-PNG-File.png",alt:"Ride",className:"ride-image"}),d.jsx("p",{children:e.type}),d.jsx("p",{children:e.pickup}),d.jsx("p",{children:e.destination}),d.jsx("p",{children:e.selectedTime}),d.jsx("p",{children:e.price}),d.jsx("p",{children:new Date(e.selectedDate).toLocaleDateString()}),d.jsx("p",{children:e.passengers}),d.jsx("p",{onClick:()=>(async e=>{try{const t=await Ea.post("/api/admin/remove",{id:e},{withCredentials:!0});t.data.success?(B.success(t.data.message),s()):B.error("Failed to remove ride")}catch(t){B.error("Error removing ride",t)}})(e._id),className:"cursor",children:d.jsx("img",{src:"trash.png",alt:"delete"})})]},t)))]})]})},Ln=()=>{const[e,t]=l.useState([]),[s,a]=l.useState(!1),[i,r]=l.useState(""),[n,o]=l.useState(!1),c=e=>{switch(e){case"approved":return"status-approved";case"partially approved":return"status-partially";case"completed":return"status-completed";case"pending approval":return"status-pending";case"declined":return"status-cancelled";case"refunds":return"status-refunds";case"re-schedule":return"status-reschedule";default:return""}};return l.useEffect((()=>{(async()=>{o(!0);try{const e=await Ea.get("/api/booking/list",{withCredentials:!0});e.data.success?t(e.data.data):r(e.data.message)}catch(e){return r("Error fetching bookings",e),e}finally{o(!1)}})()}),[]),d.jsxs("div",{className:"order add",children:[d.jsx("h3",{children:"Booking Page"}),n?d.jsxs(N,{children:[d.jsx(X,{variant:"rectangular",width:"100%",height:150,sx:{mt:5}}),d.jsx(X,{variant:"rectangular",width:"100%",height:150,sx:{mt:5}}),d.jsx(X,{variant:"rectangular",width:"100%",height:150,sx:{mt:5}}),d.jsx(X,{variant:"rectangular",width:"100%",height:150,sx:{mt:5}})]}):d.jsx("div",{className:"order-list",children:i||0===e.length?d.jsx(_,{severity:"info",sx:{m:5,width:500,p:2,fontSize:16},children:i}):d.jsx(d.Fragment,{children:e.map(((e,i)=>d.jsxs("div",{className:"order-item",children:[d.jsx("img",{src:"parcel.png",alt:"Order Icon"}),d.jsxs("div",{children:[d.jsx("p",{className:"order-item-design",children:e.rides.map(((t,s)=>s===e.rides.length-1?t.pickup+" > "+t.destination:t.pickup+" > "+t.destination+", "))}),d.jsx("p",{className:"order-item-name",children:e.address.firstName+" "+e.address.lastName}),d.jsxs("div",{className:"order-item-address",children:[d.jsx("p",{children:e.address.street+","}),d.jsx("p",{children:e.address.city+", "+e.address.state+", "+e.address.country+", "+e.address.zipCode})]}),d.jsx("p",{className:"order-item-phone",children:e.address.phone})]}),d.jsxs("p",{children:["Rides: ",e.rides.length]}),d.jsxs("p",{children:[e.currency," ",e.amount,".00"]}),d.jsxs("div",{children:[d.jsx("p",{className:`status-badge ${c(e.status)}`,children:e.status}),d.jsxs("select",{onChange:s=>(async(e,s)=>{const i=e.target.value;a(!0);try{const e=await Ea.post("/api/booking/status",{bookingId:s,status:i,withCredentials:!0});e.data.success?(t((e=>e.map((e=>e._id===s?{...e,status:i}:e)))),B.success("Status updated successfully")):r(e.data.message)}catch(n){return B.error("Failed to update order status"),n}finally{a(!1)}})(s,e._id),value:e.status,disabled:s,children:[d.jsx("option",{value:"approved",children:"Approved"}),d.jsx("option",{value:"pending approval",children:"pending approval"}),d.jsx("option",{value:"partially approved",children:"partially approved"}),d.jsx("option",{value:"completed",children:"Completed"}),d.jsx("option",{value:"declined",children:"Declined"}),d.jsx("option",{value:"refunds",children:"Refunds"}),d.jsx("option",{value:"re-schedule",children:"Re-schedule"})]})]})]},i)))})})]})},Bn=["Car","Van","Bus","Motorbike","Truck"],On=k({name:S().required("Required"),email:S().email("Invalid email").required("Required"),password:S().min(8,"Min 8 characters").required("Required"),phone:S().required("Required"),licenseNumber:S().required("Required"),vehicleType:S().required("Required"),model:S().required("Required"),registrationNumber:S().required("Required"),capacity:xs().min(1,"Min 1").required("Required")}),Mn=()=>{const[e,t]=l.useState(null),[s,a]=l.useState(!1);return d.jsxs(c,{p:3,maxWidth:700,mx:"auto",children:[d.jsx(h,{variant:"h4",mb:2,children:"Add New Driver"}),d.jsx(A,{initialValues:{name:"",email:"",password:"",phone:"",licenseNumber:"",vehicleType:"",model:"",registrationNumber:"",capacity:"",avatar:null},validationSchema:On,onSubmit:async(e,{resetForm:s})=>{const a=new FormData;Object.entries(e).forEach((([e,t])=>{"avatar"!==e&&a.append(e,t)})),e.avatar&&a.append("avatar",e.avatar);try{const e=await Ea.post("/api/admin/add-driver",a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});B.success(e.data.message||"Driver added"),s(),t(null)}catch(i){B.error(i.response?.data?.message||"Add failed"),console.error(i)}},children:({values:i,errors:r,touched:n,setFieldValue:o,isSubmitting:l})=>d.jsx(Yt,{children:d.jsxs(V,{container:!0,spacing:2,children:[[{name:"name",label:"Name"},{name:"email",label:"Email",type:"email"},{name:"phone",label:"Phone"},{name:"licenseNumber",label:"License Number"}].map((({name:e,label:t,type:s})=>d.jsx(V,{item:!0,xs:12,sm:6,children:d.jsx(Kt,{name:e,as:T,type:s||"text",label:t,fullWidth:!0,error:n[e]&&Boolean(r[e]),helperText:n[e]&&r[e]})},e))),d.jsx(V,{item:!0,xs:12,sm:6,children:d.jsx(Kt,{name:"password",as:T,type:s?"text":"password",label:"Password",fullWidth:!0,error:n.password&&Boolean(r.password),helperText:n.password&&r.password,InputProps:{endAdornment:d.jsx(D,{position:"end",children:d.jsx(E,{onClick:()=>a(!s),edge:"end",children:s?d.jsx(ps,{}):d.jsx(gs,{})})})}})}),d.jsx(V,{item:!0,xs:12,sm:6,children:d.jsx(Kt,{name:"vehicleType",as:T,select:!0,label:"Vehicle Type",fullWidth:!0,error:n.vehicleType&&Boolean(r.vehicleType),helperText:n.vehicleType&&r.vehicleType,children:Bn.map((e=>d.jsx(us,{value:e,children:e},e)))})}),[{name:"model",label:"Model"},{name:"registrationNumber",label:"Reg. Number"},{name:"capacity",label:"Capacity",type:"number"}].map((({name:e,label:t,type:s})=>d.jsx(V,{item:!0,xs:12,sm:6,children:d.jsx(Kt,{name:e,as:T,type:s||"text",label:t,fullWidth:!0,error:n[e]&&Boolean(r[e]),helperText:n[e]&&r[e]})},e))),d.jsx(V,{item:!0,xs:12,children:d.jsxs(m,{variant:"outlined",component:"label",startIcon:i.avatar?d.jsx(ht,{src:e}):null,children:[i.avatar?"Change Avatar":"Upload Avatar",d.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{const s=e.currentTarget.files[0];o("avatar",s),t(URL.createObjectURL(s))}})]})}),d.jsx(V,{item:!0,xs:12,children:d.jsx(m,{type:"submit",variant:"contained",fullWidth:!0,disabled:l,startIcon:l&&d.jsx(C,{size:20}),children:l?"Adding...":"Add Driver"})})]})})})]})},qn=()=>{const[e,t]=l.useState([]),[s,a]=l.useState(!0),i=async()=>{a(!0);try{const e=await Ea.get("/api/admin/drivers",{withCredentials:!0});Array.isArray(e.data.drivers)?t(e.data.drivers):(t([]),B.error(e.data.message||"Unexpected response format"))}catch(e){t([]),console.error("Error fetching drivers:",e.response?.data||e.message)}finally{a(!1)}};l.useEffect((()=>{i()}),[]);return d.jsxs("div",{className:"list-drivers",children:[d.jsx("h2",{children:"Drivers List"}),s?d.jsx(c,{children:d.jsx(js,{style:{width:600},active:!0})}):0===e.length?d.jsx(_,{severity:"info",children:"No drivers found."}):d.jsxs("table",{className:"drivers-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"#"}),d.jsx("th",{children:"Avatar"}),d.jsx("th",{children:"Name"}),d.jsx("th",{children:"Email"}),d.jsx("th",{children:"Phone"}),d.jsx("th",{children:"License"}),d.jsx("th",{children:"Vehicle Type"}),d.jsx("th",{children:"Model"}),d.jsx("th",{children:"Reg. No."}),d.jsx("th",{children:"Capacity"}),d.jsx("th",{children:"Action"})]})}),d.jsx("tbody",{children:e.map(((e,t)=>{const s=e.profile||{};return d.jsxs("tr",{children:[d.jsx("td",{children:t+1}),d.jsx("td",{children:e.avatar?d.jsx("img",{src:e.avatar,alt:`${e.name}'s Avatar`,className:"driver-avatar"}):"N/A"}),d.jsx("td",{children:e.name||"N/A"}),d.jsx("td",{children:e.email||"N/A"}),d.jsx("td",{children:s.phone||"N/A"}),d.jsx("td",{children:s.licenseNumber||"N/A"}),d.jsx("td",{children:s.vehicle?.vehicleType||"N/A"}),d.jsx("td",{children:s.vehicle?.model||"N/A"}),d.jsx("td",{children:s.vehicle?.registrationNumber||"N/A"}),d.jsx("td",{children:s.vehicle?.capacity??"N/A"}),d.jsxs("td",{children:[d.jsx(te,{to:`/admin/update-driver/${e._id}`,className:"edit-btn",children:"Edit"}),s.approved||"active"===s.status?d.jsx("span",{className:"approved-label",children:"Approved"}):d.jsx(m,{variant:"contained",color:"success",onClick:()=>(async e=>{try{const t=await Ea.put(`/api/admin/drivers/approve/${e}`,{},{withCredentials:!0});B.success(t.data.message||"Driver approved successfully"),i()}catch(t){console.error("Error approving driver:",t.response?.data||t.message),B.error(t.response?.data?.message||"Failed to approve driver")}})(e._id),size:"small",sx:{mt:1},children:"Approve"})]})]},e._id||t)}))})]})]})},Un=()=>{const[e,t]=l.useState([]),[s,a]=l.useState([]),[i,r]=l.useState({}),n=async()=>{try{const e=await Ea.get("/api/admin/rides",{withCredentials:!0});if(!e.data.rides)return null;t(e.data.rides)}catch(e){return null}};l.useEffect((()=>{n(),(async()=>{try{const e=await Ea.get("/api/admin/drivers",{withCredentials:!0});if(!e.data.drivers)return null;a(e.data.drivers)}catch(e){return null}})()}),[]);return d.jsx("div",{className:"assign-ride-container",children:0===e.length?d.jsx("div",{style:{width:"100%",marginTop:"50px"},children:d.jsx(_,{severity:"info",className:"no-rides-alert",children:"No rides or drivers found. Please add some rides and drivers."})}):d.jsxs("div",{children:[d.jsx("h2",{children:"Assign Rides to Drivers"}),d.jsxs("table",{className:"assign-ride-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Ride ID"}),d.jsx("th",{children:"Pickup"}),d.jsx("th",{children:"Destination"}),d.jsx("th",{children:"Status"}),d.jsx("th",{children:"Driver"}),d.jsx("th",{children:"Action"})]})}),d.jsx("tbody",{children:e.map((e=>d.jsxs("tr",{children:[d.jsx("td",{children:e._id}),d.jsx("td",{children:e.pickup}),d.jsx("td",{children:e.destination}),d.jsx("td",{children:e.status}),d.jsx("td",{children:e.driver?d.jsx("span",{children:e.driver.name||"Assigned"}):d.jsxs("select",{value:i[e._id]||"",onChange:t=>((e,t)=>{const s=t.target.value;r((t=>({...t,[e]:s})))})(e._id,t),children:[d.jsx("option",{value:"",children:"Select driver"}),s.map((e=>d.jsxs("option",{value:e._id,children:[e.name," (",e.email,")"]},e._id)))]})}),d.jsxs("td",{children:[!e.driver&&d.jsx("button",{onClick:()=>(async e=>{const t=i[e];if(t)try{const s=await Ea.post("/api/admin/assign-ride",{rideId:e,driverId:t},{withCredentials:!0});s.data.success?(B.success("Ride assigned successfully"),n()):B.error(s.data.message||"Failed to assign ride")}catch(s){return null}else B.error("Please select a driver for this ride")})(e._id),children:"Assign"}),e.driver&&d.jsx("span",{children:"Assigned"})]})]},e._id)))})]})]})})},_n=()=>{const{id:e}=M(),t=v(),[s,a]=l.useState({pickup:"",destination:"",price:"",description:"",selectedDate:"",selectedTime:"",passengers:"",type:"",driver:""}),[i,r]=l.useState(null),[n,o]=l.useState(!0);l.useEffect((()=>{(async()=>{try{const t=await Ea.get(`/api/admin/rides/${e}`,{withCredentials:!0});if(t.data.ride){const e=t.data.ride;a({pickup:e.pickup,destination:e.destination,price:e.price,description:e.description,selectedDate:e.selectedDate?e.selectedDate.split("T")[0]:"",selectedTime:e.selectedTime,passengers:e.passengers,type:e.type,driver:e.driver?e.driver._id:""})}else B.error("Ride not found")}catch(t){B.error("Failed to fetch ride details"),console.error(t)}finally{o(!1)}})()}),[e]);const c=e=>{const{name:t,value:s}=e.target;a((e=>({...e,[t]:s})))};return n?d.jsx("p",{children:"Loading ride details..."}):d.jsxs("div",{className:"update-ride",children:[d.jsx("h2",{children:"Update Ride Details"}),d.jsxs("form",{onSubmit:async a=>{a.preventDefault();const r=new FormData;Object.keys(s).forEach((e=>{r.append(e,s[e])})),i&&r.append("image",i);try{const s=await Ea.put(`/api/admin/rides/${e}`,r,{withCredentials:!0});s.data.success?(B.success(s.data.message),t("/admin/list")):B.error(s.data.message)}catch(n){B.error("Failed to update ride"),console.error(n.response?.data||n.message)}},className:"update-ride-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Pickup Location"}),d.jsx("input",{type:"text",name:"pickup",value:s.pickup,onChange:c,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Destination"}),d.jsx("input",{type:"text",name:"destination",value:s.destination,onChange:c,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Price"}),d.jsx("input",{type:"number",name:"price",value:s.price,onChange:c,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Description"}),d.jsx("textarea",{name:"description",value:s.description,onChange:c,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Selected Date"}),d.jsx("input",{type:"date",name:"selectedDate",value:s.selectedDate,onChange:c,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Selected Time"}),d.jsx("input",{type:"time",name:"selectedTime",value:s.selectedTime,onChange:c,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Passengers"}),d.jsx("input",{type:"number",name:"passengers",value:s.passengers,onChange:c,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Ride Type"}),d.jsx("input",{type:"text",name:"type",value:s.type,onChange:c,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Upload New Image (optional)"}),d.jsx("input",{type:"file",name:"image",onChange:e=>{r(e.target.files[0])},accept:"image/*"})]}),d.jsx("button",{type:"submit",children:"Update Ride"})]})]})},Hn=["Car","Van","Bus","Motorbike","Truck"],Jn=()=>{const{id:e}=M(),t=v(),[s,a]=l.useState({name:"",email:"",phone:"",licenseNumber:"",vehicleType:"",model:"",registrationNumber:"",capacity:""}),[i,r]=l.useState(null),[n,o]=l.useState(!0),[u,x]=l.useState(!1);l.useEffect((()=>{(async()=>{try{const t=await Ea.get(`/api/admin/drivers/${e}`,{withCredentials:!0}),{driver:s}=t.data,i=s.profile||{};a({name:s.name||"",email:s.email||"",phone:i.phone||"",licenseNumber:i.licenseNumber||"",vehicleType:i.vehicle?.vehicleType||"",model:i.vehicle?.model||"",registrationNumber:i.vehicle?.registrationNumber||"",capacity:i.vehicle?.capacity?.toString()||""})}catch(t){B.error("Failed to fetch driver details"),console.error(t)}finally{o(!1)}})()}),[e]);const p=e=>{const{name:t,value:s}=e.target;a((e=>({...e,[t]:s})))};return n?d.jsx(C,{size:48}):d.jsxs(c,{className:"update-driver",component:"form",onSubmit:async a=>{a.preventDefault(),x(!0);const r=new FormData;Object.entries(s).forEach((([e,t])=>{r.append(e,t)})),i&&r.append("avatar",i);try{const s=await Ea.put(`/api/admin/drivers/${e}`,r,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});s.data.success?(B.success(s.data.message),t("/admin/list-drivers")):B.error(s.data.message)}catch(n){B.error("Failed to update driver"),console.error(n.response?.data||n.message)}finally{x(!1)}},sx:{maxWidth:"max-content",mx:"auto",p:2},children:[d.jsx(h,{variant:"h5",gutterBottom:!0,children:"Update Driver Details"}),d.jsx(T,{fullWidth:!0,margin:"normal",label:"Name",name:"name",value:s.name,onChange:p,required:!0}),d.jsx(T,{fullWidth:!0,margin:"normal",label:"Email",name:"email",type:"email",value:s.email,onChange:p,required:!0}),d.jsx(T,{fullWidth:!0,margin:"normal",label:"Phone",name:"phone",value:s.phone,onChange:p,required:!0}),d.jsx(T,{fullWidth:!0,margin:"normal",label:"License Number",name:"licenseNumber",value:s.licenseNumber,onChange:p,required:!0}),d.jsx(T,{fullWidth:!0,select:!0,margin:"normal",label:"Vehicle Type",name:"vehicleType",value:s.vehicleType,onChange:p,required:!0,children:Hn.map((e=>d.jsx(us,{value:e,children:e},e)))}),d.jsx(T,{fullWidth:!0,margin:"normal",label:"Model",name:"model",value:s.model,onChange:p,required:!0}),d.jsx(T,{fullWidth:!0,margin:"normal",label:"Registration Number",name:"registrationNumber",value:s.registrationNumber,onChange:p,required:!0}),d.jsx(T,{fullWidth:!0,margin:"normal",label:"Capacity",name:"capacity",type:"number",value:s.capacity,onChange:p,required:!0}),d.jsxs(m,{variant:"outlined",component:"label",sx:{mt:2},children:["Upload Avatar",d.jsx("input",{type:"file",hidden:!0,onChange:e=>{r(e.target.files[0])},accept:"image/*"})]}),d.jsx(c,{sx:{mt:4},children:d.jsx(m,{type:"submit",variant:"contained",disabled:u,startIcon:u&&d.jsx(C,{size:20}),children:u?"Updating...":"Update Driver"})})]})};function $n(){const[e,t]=l.useState(""),[s,a]=l.useState(!0),[i,r]=l.useState(!1),[n,o]=l.useState("");l.useEffect((()=>{Ea.get("/api/admin/commission").then((({data:e})=>{t((100*e.rate).toFixed(1))})).catch((()=>{o("Failed to load commission rate.")})).finally((()=>a(!1)))}),[]);return s?d.jsx(C,{size:50,style:{textAlign:"center",marginTop:150,marginLeft:180,justifyContent:"center"}}):d.jsxs(c,{height:350,sx:{maxWidth:400,placeSelf:"center",mx:"auto",mt:5,p:3,boxShadow:2,borderRadius:2},children:[d.jsx(h,{variant:"h6",gutterBottom:!0,children:"Platform Commission Rate"}),n&&d.jsx(_,{severity:"error",children:n}),d.jsx(T,{label:"Commission (%)",type:"number",inputProps:{min:0,max:100,step:.1},value:e,onChange:e=>t(e.target.value),fullWidth:!0,sx:{my:2}}),d.jsx(m,{variant:"contained",onClick:()=>{const t=parseFloat(e)/100;isNaN(t)||t<0||t>1?o("Enter a valid percentage between 0 and 100."):(r(!0),o(""),Ea.post("/api/admin/commission",{rate:t}).then((()=>{alert("Commission rate updated")})).catch((()=>{o("Update failed.")})).finally((()=>r(!1))))},disabled:i,fullWidth:!0,children:i?d.jsx(C,{size:20}):"Update Rate"})]})}const Vn={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:300,damping:25,staggerChildren:.06}},exit:{opacity:0,scale:.95}};function Gn({anchorEl:e,open:t,onClose:s,children:a}){return d.jsx(fs,{open:t,anchorEl:e,placement:"bottom-end",transition:!0,disablePortal:!0,style:{zIndex:1300,position:"absolute",right:0},children:({TransitionProps:e})=>d.jsx(bs,{children:t&&d.jsx(ee.div,{variants:Vn,initial:"hidden",animate:"visible",exit:"exit",...e,children:d.jsx(ys,{onClickAway:s,children:d.jsx(H,{elevation:6,sx:{borderRadius:2,overflow:"hidden",minWidth:180,mt:1},children:d.jsx(vs,{component:ee.ul,sx:{p:0},children:a})})})},"menu")})})}const Yn=ee(us,{forwardMotionProps:!0});function Kn({onMenuClick:e,isMenuOpen:t}){const[s,a]=l.useState(null),[i,r]=l.useState(null),n=w(Xa),o=y(),m=v(),u="/auth0/admin";l.useEffect((()=>{Ea.get("/api/admin/me",{withCredentials:!0}).then((e=>r(e.data.avatar))).catch(console.error)}),[]);const x=()=>a(null);l.useEffect((()=>{n||m("/login")}),[n,m]);return d.jsx(Lt,{position:"fixed",sx:{zIndex:e=>e.zIndex.drawer+1,bgcolor:"rgb(9, 51, 65)"},children:d.jsxs(Ge,{children:[d.jsx(E,{color:"inherit",edge:"start",onClick:e,sx:{mr:1,display:{lg:"none"}},"aria-label":"open drawer",children:d.jsxs(ee.div,{initial:!1,animate:t?"open":"closed",variants:{open:{rotate:45},closed:{rotate:0}},transition:{duration:.3},style:{width:24,height:24,position:"relative"},children:[d.jsx(ee.span,{style:{position:"absolute",top:6,left:0,width:"100%",height:2,background:"#fff",borderRadius:2},variants:{open:{rotate:90,top:11},closed:{rotate:0,top:6}},transition:{duration:.3}}),d.jsx(ee.span,{style:{position:"absolute",top:11,left:0,width:"100%",height:2,background:"#fff",borderRadius:2},variants:{open:{opacity:0},closed:{opacity:1}},transition:{duration:.3}}),d.jsx(ee.span,{style:{position:"absolute",top:16,left:0,width:"100%",height:2,background:"#fff",borderRadius:2},variants:{open:{rotate:-90,top:11},closed:{rotate:0,top:16}},transition:{duration:.3}})]})}),d.jsx(c,{sx:{display:"flex",alignItems:"center",mr:2},children:d.jsx(te,{to:`${u}/dashboard`,children:d.jsx("img",{src:"JD-logo.png",alt:"Logo",height:50})})}),d.jsx(c,{sx:{flexGrow:1}}),d.jsxs(h,{variant:"h6",sx:{mr:3,display:{xs:"none",sm:"block"}},children:["Welcome, ",localStorage.getItem("adminEmail")]}),d.jsx(E,{onClick:e=>a(e.currentTarget),size:"large",edge:"end",color:"inherit",children:i?d.jsx(ht,{src:i}):d.jsx(ht,{})}),d.jsxs(Gn,{anchorEl:s,open:Boolean(s),onClose:x,children:[d.jsxs(Yn,{onClick:x,component:te,to:`${u}/settings`,children:[d.jsx(Ee,{children:d.jsx(ws,{})}),"Settings"]}),d.jsxs(Yn,{component:te,to:"mailto:jdeku573@gmail.com",children:[d.jsx(Ee,{children:d.jsx(ks,{})}),"Email: ",localStorage.getItem("adminEmail")]}),d.jsx(j,{}),d.jsxs(Yn,{onClick:async()=>{await o(_a())},children:[d.jsx(Ee,{children:d.jsx(Ss,{})}),"Logout"]})]})]})})}async function Xn(e){const t=e.map((e=>new Promise((t=>{if(/\.(mp3|mp4|wav|ogg)$/i.test(e)){const s=new Audio;s.oncanplaythrough=t,s.onerror=t,s.src=e}else{const s=new Image;s.onload=t,s.onerror=t,s.src=e}}))));await Promise.all(t)}async function Qn(){await async function(){let e=[];try{const t=await fetch("manifest.json").then((e=>e.json()));e=Object.values(t).flatMap((e=>[e.file,...e.css||[],...e.assets||[]])).filter((e=>/\.(png|jpe?g|svg|webp|gif|ico|mp3|mp4)$/i.test(e))).map((e=>e.startsWith("/jerryDek/")?e:`/${e}`))}catch(t){console.warn("Failed to load manifest.json, falling back to glob eager",t)}if(!e.length){const t=Object.assign({});e=Object.values(t).map((e=>e.default))}await Xn(e),console.log("Assets loaded")}(),await async function(){const e=Object.assign({}),t=Object.values(e).map((e=>e.default));sessionStorage.getItem("AdminPublicAssetsLoaded")||(console.log("Public asstes loaded"),await Xn(t),sessionStorage.setItem("AdminPublicAssetsLoaded","true"))}(),console.log("✅ All assets preloaded")}Yn.defaultProps={variants:{hidden:{opacity:0,y:-6},visible:{opacity:1,y:0},exit:{opacity:0,y:-6}}};const Zn="/auth0/admin",eo=[{to:`${Zn}/dashboard`,text:"Dashboard",icon:d.jsx(ze,{})}],to=[{to:`${Zn}/add`,text:"Add Ride",icon:d.jsx(Cs,{})},{to:`${Zn}/list`,text:"List Rides",icon:d.jsx(Rs,{})},{to:`${Zn}/book`,text:"Booked Rides",icon:d.jsx(Is,{})},{to:`${Zn}/add-driver`,text:"Add Drivers",icon:d.jsx(Be,{})},{to:`${Zn}/list-drivers`,text:"List Drivers",icon:d.jsx(Rs,{})},{to:`${Zn}/assign-rides`,text:"Assign Rides",icon:d.jsx(As,{})},{to:`${Zn}/finance`,text:"Finance",icon:d.jsx(Ns,{})}],so=[{to:`${Zn}/push-test`,text:"Test Push",icon:d.jsx(Ts,{})},{to:`${Zn}/push-global`,text:"Global Push",icon:d.jsx(Ds,{})},{to:`${Zn}/push-history`,text:"Push History",icon:d.jsx(Ps,{})},{to:`${Zn}/bull`,text:"Job History",icon:d.jsx(Es,{})}],ao=[{to:`${Zn}/settings`,text:"Profile Settings",icon:d.jsx(Fs,{})},{to:"",text:"Change Theme",icon:d.jsx(Bi,{className:"themeButton"})}];function io(){const[e,t]=l.useState(!0);return l.useEffect((()=>{e&&(async()=>{localStorage.getItem("adminAssetsLoaded")||(await Qn(),localStorage.setItem("adminAssetsLoaded","true")),sessionStorage.setItem("adminAssetsLoaded","true"),t(!1)})()}),[e]),e?d.jsxs(c,{children:[d.jsx(c,{sx:{p:2},children:Array.from({length:eo.length}).map(((e,t)=>d.jsxs("div",{sx:{display:"flex"},children:[d.jsx(X,{variant:"circular",height:45,width:30,sx:{mb:1,mr:1}},t),d.jsx(X,{variant:"rectangular",height:48,sx:{mb:1}},t)]})))}),d.jsx(c,{sx:{p:2,mt:2},children:Array.from({length:to.length}).map(((e,t)=>d.jsxs("div",{sx:{display:"flex"},children:[d.jsx(X,{variant:"circular",height:45,width:30,sx:{mb:1,mr:1}},t),d.jsx(X,{variant:"rectangular",height:48,sx:{mb:1}},t)]})))}),d.jsx(c,{sx:{p:2,mt:5},children:Array.from({length:so.length}).map(((e,t)=>d.jsxs("div",{sx:{display:"flex"},children:[d.jsx(X,{variant:"circular",height:45,width:30,sx:{mb:1,mr:1}},t),d.jsx(X,{variant:"rectangular",height:48,sx:{mb:1}},t)]})))}),d.jsx(c,{sx:{p:2,mt:5},children:Array.from({length:ao.length}).map(((e,t)=>d.jsxs("div",{sx:{display:"flex"},children:[d.jsx(X,{variant:"circular",height:45,width:30,sx:{mb:1,mr:1}},t),d.jsx(X,{variant:"rectangular",height:48,sx:{mb:1}},t)]})))})]}):d.jsxs(c,{sx:{width:260,bgcolor:"background.paper",pt:2},children:[d.jsx(Te,{children:eo.map((({to:e,text:t,icon:s})=>d.jsx(d.Fragment,{children:d.jsx(R,{elevation:3,children:d.jsxs(De,{component:Pe,to:e,sx:{px:3,py:1.5},activeClassName:"Mui-selected",children:[d.jsx(Ee,{children:s}),d.jsx(Fe,{primary:t})]},e)})})))}),d.jsx(j,{sx:{fontSize:12}}),d.jsx(Te,{children:to.map((({to:e,text:t,icon:s})=>d.jsx(d.Fragment,{children:d.jsxs(De,{component:Pe,to:e,sx:{px:3,py:1.5},activeClassName:"Mui-selected",children:[d.jsx(Ee,{children:s}),d.jsx(Fe,{primary:t})]},e)})))}),d.jsx(j,{}),d.jsxs(Te,{children:[d.jsx(R,{children:d.jsx(R,{elevation:10,children:d.jsx(I,{sx:{ml:5},title:"Notifications"})})}),so.map((({to:e,text:t,icon:s})=>d.jsx(d.Fragment,{children:d.jsxs(De,{component:Pe,to:e,sx:{px:3,py:1.5},activeClassName:"Mui-selected",children:[d.jsx(Ee,{children:s}),d.jsx(Fe,{primary:t})]},e)})))]}),d.jsx(j,{}),d.jsxs(Te,{children:[d.jsx(R,{children:d.jsx(R,{elevation:10,children:d.jsx(I,{sx:{ml:5},title:"Settings"})})}),ao.map((({to:e,text:t,icon:s})=>d.jsxs(d.Fragment,{children:[d.jsxs(De,{component:Pe,to:e,sx:{px:3,py:1.5},activeClassName:"Mui-selected",children:[d.jsx(Ee,{children:s}),d.jsx(Fe,{primary:t})]},e),d.jsx(j,{})]})))]})]})}function ro({open:e,onClose:t}){const s=x();return d.jsx(bs,{children:e&&d.jsxs(d.Fragment,{children:[d.jsx(ee.div,{onClick:t,style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",zIndex:s.zIndex.drawer+1},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),d.jsxs(ee.aside,{role:"dialog",style:{position:"fixed",top:0,left:0,height:"100vh",width:260,zIndex:s.zIndex.drawer+2,background:s.palette.background.paper,boxShadow:s.shadows[6],overflowY:"auto"},initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:260,damping:30},children:[d.jsx(Ge,{}),d.jsx(io,{})]})]})})}function no({children:e}){const t=x(),s=_e(t.breakpoints.up("lg")),[a,i]=Ce.useState((()=>"true"===localStorage.getItem("drawerOpen"))),r=()=>{const e=!a;i(e),localStorage.setItem("drawerOpen",e)},n=Q();return l.useEffect((()=>{s||(i(!1),localStorage.setItem("drawerOpen","false"))}),[n,s]),d.jsxs(d.Fragment,{children:[d.jsx(b,{children:d.jsx("title",{children:"Jeremiah K. Deku"})}),d.jsxs(c,{sx:{display:"flex"},children:[d.jsx(He,{}),d.jsx(Kn,{onMenuClick:r,isMenuOpen:a}),!s&&d.jsx(ro,{open:a,onClose:()=>r()}),s&&d.jsxs(Ve,{variant:"permanent",sx:{display:{xs:"none",lg:"block"},"& .MuiDrawer-paper":{width:260}},open:!0,children:[d.jsx(Ge,{}),d.jsx(io,{})]}),d.jsxs(c,{component:"main",sx:{flexGrow:1,p:3,ml:{lg:"260px"}},children:[d.jsx(Ge,{}),e]})]})]})}zt.node.isRequired;const oo=()=>{const e=x(),[t,s]=l.useState({totalRides:0,totalBookings:0,totalUsers:0,totalRevenue:0,totalDrivers:0}),[a,i]=l.useState([]),[r,n]=l.useState([]),[o,m]=l.useState([]);l.useEffect((()=>{Ea.get("/api/admin/stats",{withCredentials:!0}).then((e=>{e.data.success&&e.data.stats?s(e.data.stats):console.error("API did not return success:",e.data)})).catch((e=>console.error("Error fetching stats:",e)))}),[]),l.useEffect((()=>{Ea.get("/api/admin/monthly-revenue",{withCredentials:!0}).then((e=>{if(e.data.success&&e.data.data){const t=e.data.data.map((e=>({month:new Date(0,e.month-1).toLocaleString("default",{month:"short"}),revenue:e.revenue})));i(t)}else console.error("API did not return success for monthly revenue:",e.data)})).catch((e=>console.error("Error fetching monthly revenue:",e)))}),[]),l.useEffect((()=>{Ea.get("/api/admin/booking-status",{withCredentials:!0}).then((e=>{e.data.success&&e.data.data?n(e.data.data):console.error("API did not return success for booking status:",e.data)})).catch((e=>console.error("Error fetching booking status:",e)))}),[]),l.useEffect((()=>{Ea.get("/api/admin/monthly-bookings",{withCredentials:!0}).then((e=>{if(e.data.success&&e.data.data){const t=e.data.data.map((e=>({month:new Date(0,e.month-1).toLocaleString("default",{month:"short"}),bookings:e.bookings})));m(t)}else console.error("API did not return success for monthly bookings:",e.data)})).catch((e=>console.error("Error fetching monthly bookings:",e)))}),[]);const u=[e.palette.primary.main,e.palette.success.main,e.palette.error.main,e.palette.warning.main];return d.jsxs(c,{sx:{p:3},children:[d.jsx(h,{variant:"h4",sx:{mb:3},children:"Dashboard"}),d.jsxs(V,{container:!0,spacing:3,children:[d.jsx(V,{item:!0,xs:12,sm:6,md:3,children:d.jsx(R,{sx:{backgroundColor:e.palette.primary.light,color:e.palette.primary.contrastText},children:d.jsxs(ue,{children:[d.jsxs(h,{variant:"h6",gutterBottom:!0,children:[d.jsx(zs,{size:30,style:{marginRight:5,marginBottom:-10}}),"Total Rides"]}),d.jsx(h,{variant:"h4",children:t.totalRides})]})})}),d.jsx(V,{item:!0,xs:12,sm:6,md:3,children:d.jsx(R,{sx:{backgroundColor:e.palette.primary.dark,color:e.palette.primary.contrastText},children:d.jsxs(ue,{children:[d.jsxs(h,{variant:"h6",gutterBottom:!0,children:[d.jsx(Ws,{size:30,style:{marginRight:5,marginBottom:-10}}),"Total Drivers"]}),d.jsx(h,{variant:"h4",children:t.totalDrivers||0})]})})}),d.jsx(V,{item:!0,xs:12,sm:6,md:3,children:d.jsx(R,{sx:{backgroundColor:e.palette.secondary.light,color:e.palette.secondary.contrastText},children:d.jsxs(ue,{children:[d.jsxs(h,{variant:"h6",gutterBottom:!0,children:[d.jsx(se,{size:30,style:{marginRight:5,marginBottom:-10}}),"Total Bookings"]}),d.jsx(h,{variant:"h4",children:t.totalBookings})]})})}),d.jsx(V,{item:!0,xs:12,sm:6,md:3,children:d.jsx(R,{sx:{backgroundColor:e.palette.info.light,color:e.palette.info.contrastText},children:d.jsxs(ue,{children:[d.jsxs(h,{variant:"h6",gutterBottom:!0,children:[d.jsx(je,{size:30,style:{marginRight:5,marginBottom:-10}}),"Total Users"]}),d.jsx(h,{variant:"h4",children:t.totalUsers})]})})}),d.jsx(V,{item:!0,xs:12,sm:6,md:3,children:d.jsx(R,{sx:{backgroundColor:e.palette.success.light,color:e.palette.success.contrastText},children:d.jsxs(ue,{children:[d.jsxs(h,{variant:"h6",gutterBottom:!0,children:[d.jsx(Ls,{size:30,style:{marginRight:5,marginBottom:-10}}),"Revenue"]}),d.jsxs(h,{variant:"h4",children:["$","number"==typeof t.totalRevenue?t.totalRevenue.toFixed(2):"0.00"]})]})})})]}),d.jsxs(c,{sx:{mt:4},children:[d.jsx(h,{variant:"h5",sx:{mb:2},children:"Monthly Revenue (Line Chart)"}),d.jsx(Bs,{width:"100%",height:300,children:d.jsxs(Os,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[d.jsx(Ms,{strokeDasharray:"3 3"}),d.jsx(qs,{dataKey:"month"}),d.jsx(Us,{}),d.jsx(_s,{}),d.jsx(Hs,{}),d.jsx(Js,{type:"monotone",dataKey:"revenue",stroke:e.palette.success.main,activeDot:{r:8}})]})})]}),d.jsxs(c,{sx:{mt:4},children:[d.jsx(h,{variant:"h5",sx:{mb:2},children:"Booking Status Distribution (Pie Chart)"}),d.jsx(Bs,{width:"100%",height:300,children:d.jsxs($s,{children:[d.jsx(Vs,{data:r,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:e.palette.primary.main,label:!0,children:r.map(((e,t)=>d.jsx(Gs,{fill:u[t%u.length]},`cell-${t}`)))}),d.jsx(_s,{}),d.jsx(Hs,{})]})})]}),d.jsxs(c,{sx:{mt:4},children:[d.jsx(h,{variant:"h5",sx:{mb:2},children:"Monthly Bookings (Bar Chart)"}),d.jsx(Bs,{width:"100%",height:300,children:d.jsxs(Ys,{data:o,margin:{top:5,right:30,left:20,bottom:5},children:[d.jsx(Ms,{strokeDasharray:"3 3"}),d.jsx(qs,{dataKey:"month"}),d.jsx(Us,{}),d.jsx(_s,{}),d.jsx(Hs,{}),d.jsx(Ks,{dataKey:"bookings",fill:e.palette.secondary.main})]})})]}),d.jsxs(c,{sx:{mt:4},children:[d.jsx(h,{variant:"h5",sx:{mb:2},children:"Recent Activity"}),d.jsx(h,{variant:"body1",color:"text.secondary",children:"(Recent activity logs and system updates will be displayed here.)"})]})]})},lo=[{value:"admin",label:"Admin"},{value:"super-admin",label:"Super Admin"},{value:"admin-manager",label:"Admin Manager"}];function co({afterInvite:e}){const[t,s]=l.useState(!1),[a,i]=l.useState(""),[r,n]=l.useState("admin"),[o,c]=l.useState(!1),[u,x]=l.useState(""),[p,g]=l.useState(""),j=()=>s(!1);return d.jsxs(d.Fragment,{children:[d.jsx(J,{title:"Invite New Admin",children:d.jsx(m,{variant:"contained",color:"primary",startIcon:d.jsx(Xs,{}),onClick:()=>{s(!0),i(""),n("admin"),x(""),g("")},children:"Invite Admin"})}),d.jsxs(Ke,{open:t,onClose:j,maxWidth:"xs",fullWidth:!0,children:[d.jsx(Xe,{children:"Invite New Admin"}),d.jsxs("form",{onSubmit:async t=>{t.preventDefault(),x(""),g(""),c(!0);try{const t=await Ea.post("/api/admin/invite",{email:a,roles:[r]});t.data.success?(g("Invitation sent! The user will receive an email with setup instructions."),e&&e()):x(t.data.message||"Failed to send invite.")}catch(s){x(s.response?.data?.message||"Network/server error.")}finally{c(!1)}},children:[d.jsxs(Qe,{children:[d.jsx(h,{sx:{mb:2},children:"Enter the email address and role for the new admin. They will receive a secure invite link."}),u&&d.jsx(_,{severity:"error",sx:{mb:2},children:u}),p&&d.jsx(_,{severity:"success",sx:{mb:2},children:p}),d.jsx(T,{label:"Email",type:"email",value:a,onChange:e=>i(e.target.value),required:!0,fullWidth:!0,sx:{mb:2}}),d.jsx(T,{label:"Role",select:!0,value:r,onChange:e=>n(e.target.value),required:!0,fullWidth:!0,sx:{mb:2},children:lo.map((e=>d.jsx(us,{value:e.value,children:e.label},e.value)))})]}),d.jsxs(ss,{children:[d.jsx(m,{onClick:j,color:"inherit",disabled:o,children:"Cancel"}),d.jsx(m,{type:"submit",variant:"contained",color:"primary",disabled:o||!a,startIcon:o?d.jsx(C,{size:20}):d.jsx(Xs,{}),children:o?"Sending...":"Send Invite"})]})]})]})]})}const ho=k().shape({current:S().required("Current password is required"),newPassword:S().min(8,"Password must be at least 8 characters").matches(/(?=.*[0-9])/,"Must contain a number").matches(/(?=.*[A-Z])/,"Must contain an uppercase letter").matches(/(?=.*[!@#$%^&*])/,"Must contain a special character").required("New password is required"),confirmPassword:S().oneOf([Qs("newPassword"),null],"Passwords must match").required("Please confirm your new password")}),mo=()=>{const[e,t]=l.useState([]),[s,a]=l.useState(!1),[i,r]=l.useState(!1),[n,o]=l.useState(null),u=y(),[x,p]=l.useState({name:"",email:"",avatar:""}),[g,f]=l.useState(null),[v,w]=l.useState(!1),[k,S]=l.useState({current:!1,newPassword:!1,confirmPassword:!1}),[N,D]=l.useState(!1),[P,F]=l.useState({open:!1,message:"",severity:"success"});l.useEffect((()=>{W(),L()}),[]);const z=(e,t="success")=>F({open:!0,message:e,severity:t}),W=async()=>{a(!0);try{const{data:e}=await Ea.get("/api/admin/pending-invites",{withCredentials:!0});e.success&&t(e.invites)}catch{z("Failed to load invites","error")}finally{a(!1)}},L=async()=>{try{const{data:e}=await Ea.get("/api/admin/me",{withCredentials:!0});p(e)}catch{z("Failed to load profile","error")}},B=()=>{o(null),r(!1)};return d.jsxs(d.Fragment,{children:[d.jsx(b,{children:d.jsx("title",{children:"Settings - Jerry-Admin"})}),d.jsxs(c,{p:4,className:"settings-root",children:[d.jsxs(h,{variant:"h4",gutterBottom:!0,sx:{bgcolor:"rgb(9, 51, 65)",color:"white",p:2,borderRadius:2},children:[d.jsxs(E,{sx:{cursor:"pointer",fontSize:16,color:"#ccc"},onClick:()=>window.history.back(),children:[d.jsx(Zs,{style:{marginRight:8}}),"Back"]}),"|",d.jsx(ea,{style:{marginRight:8,marginLeft:8}})," Settings"]}),d.jsxs(V,{container:!0,spacing:4,children:[d.jsx(V,{item:!0,xs:12,md:6,children:d.jsxs(R,{elevation:3,children:[d.jsx(I,{avatar:d.jsx(je,{}),title:"Team Management"}),d.jsx(j,{}),d.jsxs(ue,{children:[d.jsx(co,{afterInvite:()=>W()}),d.jsx(c,{mt:2,children:s?d.jsx(C,{}):e.length?d.jsx(Te,{dense:!0,children:e.map((e=>d.jsxs(Pt,{secondaryAction:d.jsx(E,{onClick:()=>(o(e),void r(!0)),children:d.jsx(Qt,{})}),children:[d.jsx(Et,{children:d.jsx(ht,{children:e.email[0]})}),d.jsx(Fe,{primary:e.email,secondary:e.role}),d.jsx(Ie,{label:"Pending",color:"warning"})]},e.id)))}):d.jsx(_,{severity:"info",children:"No pending invites"})})]})]})}),d.jsx(V,{item:!0,xs:12,md:6,children:d.jsxs(R,{elevation:3,children:[d.jsx(I,{avatar:d.jsx(Y,{}),title:"Profile Photo"}),d.jsx(j,{}),d.jsxs(ue,{sx:{textAlign:"center"},children:[d.jsx(ht,{src:x.avatar,sx:{width:80,height:80,mx:"auto"}}),d.jsxs(c,{mt:1,children:[d.jsxs(m,{component:"label",children:["Choose Photo",d.jsx("input",{type:"file",hidden:!0,onChange:e=>{const t=e.target.files?.[0];t&&(f(t),p((e=>({...e,avatar:URL.createObjectURL(t)}))))},accept:"image/*"})]}),g&&d.jsx(m,{sx:{ml:1},disabled:v,onClick:async()=>{if(!g)return;w(!0);const e=new FormData;e.append("avatar",g);try{const{data:t}=await Ea.post("/api/admin/profile/avatar",e,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});t.success&&(p((e=>({...e,avatar:t.user.avatar}))),f(null),z("Avatar updated ✅"))}catch{z("Avatar upload failed ❌","error")}finally{w(!1)}},children:v?"Uploading...":"Upload"})]})]})]})}),d.jsx(V,{item:!0,xs:12,md:6,children:d.jsxs(R,{elevation:3,children:[d.jsx(I,{avatar:d.jsx(K,{}),title:"Change Password"}),d.jsx(j,{}),d.jsx(ue,{sx:{display:"flex",flexDirection:"column",gap:2},children:d.jsx(A,{initialValues:{current:"",newPassword:"",confirmPassword:""},validationSchema:ho,onSubmit:async(e,{resetForm:t})=>{D(!0);try{const{data:s}=await Ea.post("/api/admin/profile/password",{current:e.current,newPassword:e.newPassword,confirmPassword:e.confirmPassword},{withCredentials:!0});s.success&&(z("Password changed"),t(),await u(_a()),u(Va()),na(Dn).purge(),window.location.href="/Oauth2/v1/admin/login")}catch(s){z(s.response?.data?.message||"Password change failed","error")}finally{D(!1)}},children:({values:e,errors:t,touched:s,handleChange:a,handleBlur:i,isValid:r,dirty:n})=>d.jsxs(Yt,{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[["current","newPassword","confirmPassword"].map((r=>d.jsxs(c,{sx:{position:"relative"},children:[d.jsx(T,{fullWidth:!0,name:r,label:"current"===r?"Current Password":"newPassword"===r?"New Password":"confirmPassword"===r?"Confirm Password":"",type:k[r]?"text":"password",value:e[r],onChange:a,onBlur:i,error:s[r]&&Boolean(t[r]),helperText:s[r]&&t[r],autoComplete:"current"===r?"current-password":"newPassword"===r||"confirmPassword"===r?"new-password":void 0}),d.jsx(E,{onClick:()=>(e=>{S((t=>({...t,[e]:!t[e]})))})(r),sx:{position:"absolute",top:"50%",right:8,transform:"translateY(-50%)"},edge:"end",tabIndex:-1,children:k[r]?d.jsx(ps,{}):d.jsx(gs,{})})]},r))),d.jsx(m,{type:"submit",variant:"contained",disabled:N||!r||!n,children:N?d.jsx(C,{size:24}):"Update Password"})]})})})]})}),d.jsx(V,{item:!0,xs:12,md:6,children:d.jsxs(R,{elevation:3,children:[d.jsx(I,{avatar:d.jsx(ta,{}),title:"Notifications"}),d.jsx(j,{}),d.jsxs(ue,{children:[d.jsx(sa,{children:["Email","SMS","Push","Sounds"].map((e=>d.jsx(aa,{control:d.jsx(ia,{defaultChecked:!0}),label:e},e)))}),d.jsx(j,{sx:{my:2}}),d.jsx(h,{variant:"subtitle2",children:"Do Not Disturb"}),d.jsxs(c,{sx:{display:"flex",gap:2,alignItems:"center",mt:1},children:[d.jsx(T,{label:"Start",type:"time"}),d.jsx(T,{label:"End",type:"time"})]})]})]})})]}),d.jsxs(Ke,{open:i,onClose:B,children:[d.jsx(Xe,{children:"Cancel Invite"}),d.jsx(Qe,{children:d.jsxs(h,{children:["Cancel invite for ",d.jsx("strong",{children:n?.email}),"?"]})}),d.jsxs(ss,{children:[d.jsx(m,{onClick:B,children:"No"}),d.jsx(m,{color:"error",variant:"contained",onClick:async()=>{try{await Ea.delete(`/api/admin/invite/${n.id}`,{withCredentials:!0}),t((e=>e.filter((e=>e.id!==n.id)))),z("Invite cancelled")}catch{z("Failed to cancel invite","error")}finally{B()}},children:"Yes"})]})]}),d.jsx(ra,{open:P.open,message:P.message,autoHideDuration:5e3,onClose:()=>F((e=>({...e,open:!1}))),anchorOrigin:{vertical:"bottom",horizontal:"center"}})]})]})},uo=()=>{const[e,t]=l.useState({userId:"",fcmToken:"",title:"Hello from Admin",body:"This is a test push notification 🚀",data:{url:"/",type:"test"}}),s=e=>{const{name:s,value:a}=e.target;t((e=>({...e,[s]:a})))};return d.jsxs("div",{style:{padding:20},children:[d.jsx("h3",{children:"🔔 Test Push Notification"}),d.jsx("label",{children:"User ID:"}),d.jsx("input",{name:"userId",value:e.userId,onChange:s,placeholder:"Optional (or use FCM token)",style:{width:"100%",marginBottom:8}}),d.jsx("label",{children:"FCM Token:"}),d.jsx("input",{name:"fcmToken",value:e.fcmToken,onChange:s,placeholder:"Optional (or use User ID)",style:{width:"100%",marginBottom:8}}),d.jsx("label",{children:"Title:"}),d.jsx("input",{name:"title",value:e.title,onChange:s,style:{width:"100%",marginBottom:8}}),d.jsx("label",{children:"Body:"}),d.jsx("input",{name:"body",value:e.body,onChange:s,style:{width:"100%",marginBottom:8}}),d.jsx("button",{onClick:async()=>{try{const{data:t}=await Ea.post("/api/test-push",e,{withCredentials:!0});B.success("✅ Push sent successfully!"),console.log("FCM Response:",t)}catch(t){B.error("❌ Push failed: "+(t.response?.data?.message||t.message)),console.error("Test Push Error:",t)}},style:{marginTop:10},children:"Send Push"})]})};oa.extend(la),oa.extend(da);const xo={title:"",body:"",imageUrl:"",url:"",sendAt:null},po=()=>{const[e,t]=l.useState(xo),[s,a]=l.useState(!1),[i,r]=l.useState(!1),[n,o]=l.useState({}),u=l.useCallback((e=>{const{name:s,value:a}=e.target;t((e=>({...e,[s]:a}))),o((e=>({...e,[s]:""})))}),[]),x=l.useCallback((e=>{t((t=>({...t,sendAt:e}))),o((e=>({...e,sendAt:""})))}),[]),p=l.useCallback((()=>{const t={};return e.title.trim()||(t.title="Title is required."),e.body.trim()||(t.body="Body is required."),e.sendAt&&oa(e.sendAt).isBefore(oa())&&(t.sendAt="Scheduled time must be in the future."),e.url&&!/^(ftp|http|https):\/\/[^ "]+$/.test(e.url)&&(t.url="Invalid URL format."),e.imageUrl&&!/^(ftp|http|https):\/\/[^ "]+$/.test(e.imageUrl)&&(t.imageUrl="Invalid Image URL format."),o(t),0===Object.keys(t).length}),[e]),g=l.useCallback((async()=>{if(p()){r(!0);try{const s={...e,sendAt:e.sendAt?oa(e.sendAt).utc().toISOString():null},i=await Ea.post("/api/admin/global-update",s,{withCredentials:!0});B.success(i.data.message||"Notification sent/scheduled successfully! 🎉"),t(xo),a(!1),o({})}catch(s){console.error("Failed to send global update:",s);const e=s.response?.data?.message||"Failed to send notification. Please try again.";B.error(e)}finally{r(!1)}}else B.error("Please correct the highlighted errors.")}),[e,p]),j=l.useMemo((()=>{if(!s)return null;const t=e.sendAt?oa(e.sendAt).format("YYYY-MM-DD HH:mm"):"Immediately";return d.jsxs(c,{mt:4,children:[d.jsx(h,{variant:"h6",gutterBottom:!0,children:"Notification Preview 📱"}),d.jsxs(R,{sx:{bgcolor:"#f4f6f8",p:2,borderRadius:2,boxShadow:1},children:[d.jsx(h,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:e.title||"Untitled Notification"}),d.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:e.body||"No content provided."}),e.imageUrl&&d.jsx(c,{mt:1,mb:2,children:d.jsx("img",{src:e.imageUrl,alt:"Preview",style:{maxWidth:"100%",height:"auto",borderRadius:8,objectFit:"cover"},onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/150?text=Image+Load+Error"}})}),e.url&&d.jsxs(h,{mt:1,variant:"body2",color:"primary",sx:{wordBreak:"break-all"},children:["➤ ",d.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.url})]}),d.jsxs(h,{variant:"caption",color:"text.secondary",display:"block",mt:1,children:["Scheduled: ",t]})]})]})}),[s,e]);return d.jsx(c,{maxWidth:"md",mx:"auto",p:3,children:d.jsxs(R,{elevation:4,children:[d.jsx(I,{title:"Global Push Notification Management"}),d.jsxs(ue,{children:[d.jsxs(N,{spacing:3,children:[d.jsx(T,{label:"Notification Title",name:"title",value:e.title,onChange:u,fullWidth:!0,required:!0,error:!!n.title,helperText:n.title}),d.jsx(T,{label:"Notification Body",name:"body",value:e.body,onChange:u,fullWidth:!0,multiline:!0,rows:4,required:!0,error:!!n.body,helperText:n.body}),d.jsx(T,{label:"Image URL (optional)",name:"imageUrl",value:e.imageUrl,onChange:u,fullWidth:!0,type:"url",error:!!n.imageUrl,helperText:n.imageUrl}),d.jsx(T,{label:"Redirect URL (optional)",name:"url",value:e.url,onChange:u,fullWidth:!0,type:"url",error:!!n.url,helperText:n.url}),d.jsx(os,{dateAdapter:ca,children:d.jsx(ha,{label:"Schedule Date & Time (optional)",value:e.sendAt,onChange:x,slotProps:{textField:{fullWidth:!0,error:!!n.sendAt,helperText:n.sendAt}},minDateTime:oa(),timezone:"UTC"})}),d.jsxs(N,{direction:"row",spacing:2,justifyContent:"flex-end",children:[d.jsx(m,{variant:"outlined",onClick:()=>a((e=>!e)),disabled:i,children:s?"Hide Preview":"Show Preview"}),d.jsx(m,{variant:"contained",color:"primary",onClick:g,disabled:i,startIcon:i&&d.jsx(C,{size:20,color:"inherit"}),children:i?"Sending...":"Send Notification"})]})]}),j]})]})})};function go(){const[e,t]=l.useState({notifications:[],page:1,pages:1}),s=async e=>{const s=await Ea.get("/api/notifications",{params:{page:e}});t(s.data)};return l.useEffect((()=>{s(1)}),[]),d.jsxs(N,{spacing:2,p:2,children:[d.jsx(Te,{children:e.notifications.map((e=>d.jsx(Pt,{divider:!0,children:d.jsx(Fe,{primary:e.message,secondary:new Date(e.createdAt).toLocaleString()})},e._id)))}),d.jsx(ma,{count:e.pages,page:e.page,onChange:(e,t)=>s(t)})]})}const jo=()=>{const[e,t]=l.useState(!1),[s,a]=l.useState(!1);return d.jsxs(c,{sx:{p:4,backgroundColor:"#f5f5f5",minHeight:"100vh"},children:[d.jsx(h,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"📦 Job Queue Dashboard"}),d.jsx(h,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:"Monitor and manage your job queues via BullMQ."}),!e&&!s&&d.jsxs(c,{sx:{height:"75vh",display:"flex",alignItems:"center",justifyContent:"center"},children:[d.jsx(C,{}),d.jsx(h,{sx:{ml:2},color:"text.secondary",children:"Loading BullBoard..."})]}),s&&d.jsx(_,{severity:"error",icon:d.jsx(ua,{}),sx:{mt:4,height:"75vh",display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsxs(c,{children:[d.jsx(h,{variant:"h6",children:"Failed to load BullBoard interface."}),d.jsx(h,{variant:"body2",color:"text.secondary",children:"Ensure your backend is running and CORS is correctly configured."})]})}),d.jsx(H,{elevation:3,sx:{mt:3,display:e?"block":"none",height:"80vh",overflow:"hidden",borderRadius:2},children:d.jsx("iframe",{src:"http://localhost:5000/api/admin/queues",title:"BullBoard",style:{width:"100%",height:"100%",border:"none"},onLoad:()=>t(!0),onError:()=>a(!0)})})]})};function fo(){return d.jsx("div",{children:d.jsxs(Rt,{children:[d.jsx(It,{path:"dashboard",element:d.jsx(Fn,{allowedRoles:["admin","super-admin","admin-manager"],children:d.jsx(no,{children:d.jsx(oo,{})})})}),d.jsx(It,{path:"add",element:d.jsx(Fn,{allowedRoles:["super-admin","admin-manager"],children:d.jsx(no,{children:d.jsx(zn,{})})})}),d.jsx(It,{path:"list",element:d.jsx(Fn,{allowedRoles:["admin","super-admin","admin-manager"],children:d.jsx(no,{children:d.jsx(Wn,{})})})}),d.jsx(It,{path:"book",element:d.jsx(Fn,{allowedRoles:["admin","super-admin","admin-manager"],children:d.jsx(no,{children:d.jsx(Ln,{})})})}),d.jsx(It,{path:"add-driver",element:d.jsx(Fn,{allowedRoles:["super-admin","admin-manager"],children:d.jsx(no,{children:d.jsx(Mn,{})})})}),d.jsx(It,{path:"list-drivers",element:d.jsx(Fn,{allowedRoles:["admin","super-admin","admin-manager"],children:d.jsx(no,{children:d.jsx(qn,{})})})}),d.jsx(It,{path:"assign-rides",element:d.jsx(Fn,{allowedRoles:["super-admin","admin-manager"],children:d.jsx(no,{children:d.jsx(Un,{})})})}),d.jsx(It,{path:"update-ride/:id",element:d.jsx(Fn,{allowedRoles:["super-admin","admin-manager"],children:d.jsx(no,{children:d.jsx(_n,{})})})}),d.jsx(It,{path:"update-driver/:id",element:d.jsx(Fn,{allowedRoles:["super-admin","admin-manager"],children:d.jsx(no,{children:d.jsx(Jn,{})})})}),d.jsx(It,{path:"finance",element:d.jsx(Fn,{allowedRoles:["super-admin","admin-manager"],children:d.jsx(no,{children:d.jsx($n,{})})})}),d.jsx(It,{path:"settings",element:d.jsx(Fn,{allowedRoles:["admin-manager","super-admin"],children:d.jsx(mo,{})})}),d.jsx(It,{path:"push-test",allowedRoles:["super-admin"],element:d.jsx(Fn,{allowedRoles:["super-admin"],children:d.jsx(uo,{})})}),d.jsx(It,{path:"push-global",allowedRoles:["super-admin"],element:d.jsx(Fn,{allowedRoles:["super-admin","admin-manager"],children:d.jsx(po,{})})}),d.jsx(It,{path:"push-history",allowedRoles:["super-admin","admin-manager"],element:d.jsx(Fn,{allowedRoles:["super-admin"],children:d.jsx(go,{})})}),d.jsx(It,{path:"bull",allowedRoles:["super-admin","admin-manager"],element:d.jsx(Fn,{allowedRoles:["super-admin","admin-manager"],children:d.jsx(jo,{})})}),d.jsx(It,{path:"*",element:d.jsx(gn,{})})]})})}const bo=()=>{const[e,t]=l.useState((()=>{try{const e=sessionStorage.getItem("adminAccess");return e?JSON.parse(e):{checked:!1,allowed:!1}}catch{return{checked:!1,allowed:!1}}}));return l.useEffect((()=>{e.checked||(async()=>{const e=sessionStorage.getItem("adminAccess");if(e)try{const{checked:t,allowed:s}=JSON.parse(e);if(t&&!s)return!1}catch{}try{const e=await fetch("/api/admin/check-ip",{credentials:"include"}),t=e.headers.get("content-type")||"";if(!e.ok||!t.includes("application/json"))return sessionStorage.setItem("adminAccess",JSON.stringify({checked:!0,allowed:!1})),!1;const s=await e.json();return sessionStorage.setItem("adminAccess",JSON.stringify({checked:!0,allowed:s.allowed})),s.allowed}catch(t){return console.error("IP check failed:",t),sessionStorage.setItem("adminAccess",JSON.stringify({checked:!0,allowed:!1})),!1}})().then((e=>{t({checked:!0,allowed:e})}))}),[e.checked]),{...e}},yo=()=>d.jsxs(c,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f4f7f9",color:"#333",p:2},children:[d.jsx(c,{sx:{width:"50%",mb:2},children:d.jsx(u,{})}),d.jsx(h,{variant:"h6",sx:{fontWeight:"500"},children:"Verifying your access..."})]}),vo=({children:e})=>{const{checked:t,allowed:s}=bo();return t?s?e:d.jsx(gn,{}):d.jsx(yo,{})};function wo(){const e="/Oauth2/v1/admin";l.useEffect((()=>{"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",(e=>{if("PLAY_SOUND"===e.data?.type){new Audio("sounds/apple-toast.mp3").play().catch((e=>console.warn("Audio playback blocked:",e)))}}))}),[]);const t=()=>d.jsx(hi,{children:d.jsx(fo,{})});return d.jsx(os,{dateAdapter:ls,children:d.jsxs(Rt,{children:[d.jsx(It,{path:"/jerryDek/*",element:d.jsx(En,{})}),d.jsx(It,{path:`${e}/login`,element:d.jsx(vo,{children:d.jsx(mi,{children:d.jsx(ii,{})})})}),d.jsx(It,{path:`${e}/forgot-password`,element:d.jsx(vo,{children:d.jsx(mi,{children:d.jsx(ri,{})})})}),d.jsx(It,{path:`${e}/reset-password/:token`,element:d.jsx(vo,{children:d.jsx(mi,{children:d.jsx(ni,{})})})}),d.jsx(It,{path:`${e}/accept-invite`,element:d.jsx(vo,{children:d.jsx(mi,{children:d.jsx(li,{})})})}),d.jsx(It,{path:`${e}/setup-2fa`,element:d.jsx(vo,{children:d.jsx(mi,{children:d.jsx(oi,{})})})}),d.jsx(It,{path:`${e}/verify-backup-code`,element:d.jsx(vo,{children:d.jsx(mi,{children:d.jsx(di,{})})})}),d.jsx(It,{path:`${e}/unauthorized`,element:d.jsx(vo,{children:d.jsx(mi,{children:d.jsx(ci,{})})})}),d.jsx(It,{path:"/auth0/admin/*",element:d.jsx(vo,{children:d.jsx(t,{})})}),d.jsx(It,{path:"*",element:d.jsx(Z,{to:"/jerryDek/",replace:!0})})]})})}class ko extends Ce.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t}),console.error("ErrorBoundary caught:",e,t)}render(){return this.state.hasError?d.jsxs("div",{style:{padding:20},children:[d.jsx("h2",{children:"Something went wrong:"}),d.jsx("pre",{style:{whiteSpace:"pre-wrap",color:"red"},children:this.state.error?.toString()}),this.state.errorInfo?.componentStack&&d.jsx("details",{style:{whiteSpace:"pre-wrap",marginTop:10},children:this.state.errorInfo.componentStack})]}):this.props.children}}function So(){const{pathname:e}=Q();return l.useEffect((()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})}),[e]),null}const Co=new xa("offlineQueueDB");Co.version(1).stores({requests:"++id, method, url, nextRetryAt, attempts"});const Ro=new Set,Io=(e,t)=>Ro.forEach((s=>s(e,t))),Ao=e=>new Promise((t=>setTimeout(t,e)));const No=new class{constructor(){this.processing=!1,window.addEventListener("online",(()=>{this.processAll().catch((e=>console.error("processAll error",e)))}))}async size(){return Co.requests.count()}async enqueue(e){const t=(e=>{const{url:t,method:s="get",data:a,params:i,headers:r,withCredentials:n=!0,timeout:o}=e;return{url:t,method:s,data:a,params:i,headers:r,withCredentials:n,timeout:o}})(e),s=Date.now(),a={...t,attempts:0,createdAt:s,nextRetryAt:s},i=await Co.requests.add(a);return Io("queued",{id:i}),i}async processAll(e){if(!this.processing){this.processing=!0;try{for(;;){const a=Date.now(),i=await Co.requests.where("nextRetryAt").belowOrEqual(a).first();if(!i)break;try{await e({url:i.url,method:i.method,data:i.data,params:i.params,headers:i.headers,withCredentials:i.withCredentials,timeout:i.timeout}),await Co.requests.delete(i.id),Io("flushed_one",{id:i.id})}catch(s){const e=i.attempts+1;if(e>=5)await Co.requests.delete(i.id),Io("dropped",{id:i.id,error:s});else{const s=Date.now()+(t=e,Math.min(2e3*2**t,6e4)+Math.floor(300*Math.random()));await Co.requests.update(i.id,{attempts:e,nextRetryAt:s}),Io("retry_scheduled",{id:i.id,attempts:e,nextRetryAt:s})}}await Ao(0)}}finally{this.processing=!1}var t}}},To=i.create({baseURL:"http://localhost:3000",withCredentials:!0});function Do(){const[e,t]=l.useState(0);l.useEffect((()=>{let e=!0;const s=async()=>{const s=await No.size();e&&t(s)};s();const a=(i=async()=>{await s()},Ro.add(i),()=>Ro.delete(i));var i;return navigator.onLine&&No.processAll(To),()=>{e=!1,a()}}),[]);return{queuedCount:e,retryNow:()=>No.processAll(To)}}To.interceptors.response.use((e=>e),(async e=>{const t=e.config||{};return(e=>!navigator.onLine||"ERR_NETWORK"===e.code||!!e.message?.includes("Network Error"))(e)?(await No.enqueue(t),Promise.resolve({queued:!0,offline:!0})):Promise.reject(e)}));const Po=()=>{const[e,t]=l.useState(navigator.onLine),[s,a]=l.useState(!1),[i,r]=l.useState(""),[n,o]=l.useState("info"),[m,u]=l.useState(null),{queuedCount:x,retryNow:p}=Do(),g=l.useRef(new f.Howl({src:["sounds/bubble-pop.mp3"],volume:2})).current,j=l.useCallback(((e,t)=>{r(e),o(t),a(!0),window.setTimeout((()=>a(!1)),2500)}),[]),b=l.useCallback((async()=>{try{await fetch("https://www.google.com/favicon.ico",{method:"HEAD",mode:"no-cors",cache:"no-store"}),navigator.onLine||v()}catch{v()}}),[]),y=l.useCallback((()=>{t(!0);const e=null!=m?((Date.now()-m)/1e3).toFixed(1):0;j(e>0?`Back online after ${e}s${x>0?` • retrying ${x} queued request(s)…`:""}`:"You are back online","success"),g.play(),u(null),p()}),[m,x,p,j]),v=l.useCallback((()=>{t(!1),u(Date.now()),j("You are currently offline","warning")}),[j]);l.useEffect((()=>(window.addEventListener("online",y),window.addEventListener("offline",v),b(),()=>{window.removeEventListener("online",y),window.removeEventListener("offline",v)})),[y,v,b]);const w=()=>window.location.reload(),k=()=>{e?(p(),j("Retrying queued requests…","info")):j("Retry will auto-run when you're back online","warning")};return d.jsx(ra,{open:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:e=>d.jsx(ba,{...e,direction:"up"}),sx:{"& .MuiSnackbarContent-root":{minWidth:320,maxWidth:420}},children:d.jsx(_,{severity:n,sx:{width:"100%",backgroundColor:"#1a237e",color:"#ffffff",borderRadius:"8px",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.15)","& .MuiAlert-icon":{color:e?"#4caf50":"#ff9800"},"& .MuiAlert-message":{padding:0,display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"}},icon:e?d.jsx(ja,{sx:{fontSize:40}}):d.jsx(fa,{sx:{fontSize:40}}),action:d.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[x>0&&d.jsx(Ie,{label:`${x} pending`,onClick:k,size:"small",variant:"outlined",sx:{color:"#bbdefb",borderColor:"#bbdefb","&:hover":{backgroundColor:"rgba(255,255,255,0.08)"}}}),d.jsx(E,{size:"small",onClick:k,sx:{color:"#ffffff","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},title:"Retry all queued requests now",children:d.jsx(pa,{fontSize:"small"})}),!e&&d.jsx(E,{size:"small",onClick:w,sx:{color:"#ffffff","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},title:"Reload page",children:d.jsx(ga,{fontSize:"small"})}),d.jsx(E,{size:"small",onClick:()=>a(!1),sx:{color:"#ffffff","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:d.jsx(Je,{fontSize:"small"})})]}),children:d.jsxs(c,{sx:{display:"flex",alignItems:"center",flex:1},children:[d.jsx(h,{variant:"body2",sx:{fontWeight:500,fontSize:"14px",color:"#ffffff"},children:i}),!e&&d.jsx(h,{variant:"body2",sx:{ml:2,color:"#bbdefb",fontSize:"13px",cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:w,children:"Refresh"})]})})})},Eo=ya({key:"css",nonce:window.__CSP_NONCE__}),Fo=na(Dn);"serviceWorker"in navigator&&navigator.serviceWorker.register("firebase-messaging-sw.js",{scope:"/jerryDek/"}).then((e=>console.log("✅ Service worker registered with scope:",e.scope))).catch((e=>console.error("❌ Service worker registration failed:",e))),va.createRoot(document.getElementById("root")).render(d.jsx(wa,{store:Dn,children:d.jsx(ka,{loading:null,persistor:Fo,children:d.jsxs(Sa,{children:[d.jsx(So,{}),d.jsx(Po,{}),d.jsx(He,{}),d.jsx(Ca,{children:d.jsx(Ra,{theme:Ta,children:d.jsx(ko,{children:d.jsxs(Ia,{timeout:288e5,onIdle:()=>{console.log("User idle – logging out"),Dn.dispatch(Nr()).unwrap().catch((()=>{})).finally((()=>{window.location.href="/jerryDek/"}))},debounce:500,events:["mousemove","keydown","wheel","touchstart"],children:[d.jsx(Aa,{position:"top-right"}),d.jsx(Na,{value:Eo,children:d.jsx(wo,{})})]})})})})]})})}));
